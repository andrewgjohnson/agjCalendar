/**
 * agjCalendar v1.0.0
 *
 * Copyright (c) 2013-2023 Andrew G. Johnson <andrew@andrewgjohnson.com>
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * @author Andrew G. Johnson <andrew@andrewgjohnson.com>
 * @copyright 2013-2023 Andrew G. Johnson <andrew@andrewgjohnson.com>
 * @link http://github.com/andrewgjohnson/agjCalendar
 * @license https://opensource.org/license/mit/ The MIT License
 * @version 1.0.0
 * @package agjCalendar
 *
 */
!function(S){function o(e){for(var a=e.height(),t=["margin-top","borderTopWidth","padding-top","padding-bottom","borderBottomWidth","margin-bottom"],n=0;n<t.length;n++){var l=e.css(t[n]);"px"==l.substring(l.length-2).toLowerCase()&&(l=l.substring(0,l.length-2)),isNaN(l)||(a+=parseInt(l,10))}return a}function R(e,a,t){if(void 0===a&&(a=!0),"en"==(t=void 0===t?"en":t))switch(e){case 1:return a?"January":"Jan";case 2:return a?"February":"Feb";case 3:return a?"March":"Mar";case 4:return a?"April":"Apr";case 5:return"May";case 6:return a?"June":"Jun";case 7:return a?"July":"Jul";case 8:return a?"August":"Aug";case 9:return a?"September":"Sep";case 10:return a?"October":"Oct";case 11:return a?"November":"Nov";case 12:return a?"December":"Dec"}return""}function k(e,a){if("en"==(a=void 0===a?"en":a))switch(e){case"Jan":case"January":return 1;case"Feb":case"February":return 2;case"Mar":case"March":return 3;case"Apr":case"April":return 4;case"May":return 5;case"Jun":case"June":return 6;case"Jul":case"July":return 7;case"Aug":case"August":return 8;case"Sep":case"September":return 9;case"Oct":case"October":return 10;case"Nov":case"November":return 11;case"Dec":case"December":return 12}return""}function N(e,a){if("en"==(a=void 0===a?"en":a))if(!0===T[H].startWeekOnMonday)switch(e){case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";case 7:return"Sunday"}else switch(e){case 1:return"Sunday";case 2:return"Monday";case 3:return"Tuesday";case 4:return"Wednesday";case 5:return"Thursday";case 6:return"Friday";case 7:return"Saturday"}return""}function O(e,a){switch(parseInt(a,10)){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return e%4==0&&e%100!=0||e%400==0?29:28}return 0}function m(){var e="",a=function(){switch(T[H].dayNameFormat){case"full":return Number.MAX_SAFE_INTEGER;case"medium":return 3}return 1}();return!0===T[H].startWeekOnMonday?e+='<div class="agjCalendar-monday">'+N(1).substring(0,a)+'</div><div class="agjCalendar-tuesday">'+N(2).substring(0,a)+'</div><div class="agjCalendar-wednesday">'+N(3).substring(0,a)+'</div><div class="agjCalendar-thursday">'+N(4).substring(0,a)+'</div><div class="agjCalendar-friday">'+N(5).substring(0,a)+'</div><div class="agjCalendar-saturday">'+N(6).substring(0,a)+'</div><div class="agjCalendar-sunday">'+N(7).substring(0,a)+"</div>":e+='<div class="agjCalendar-sunday">'+N(1).substring(0,a)+'</div><div class="agjCalendar-monday">'+N(2).substring(0,a)+'</div><div class="agjCalendar-tuesday">'+N(3).substring(0,a)+'</div><div class="agjCalendar-wednesday">'+N(4).substring(0,a)+'</div><div class="agjCalendar-thursday">'+N(5).substring(0,a)+'</div><div class="agjCalendar-friday">'+N(6).substring(0,a)+'</div><div class="agjCalendar-saturday">'+N(7).substring(0,a)+"</div>",e}var T=[],H=-1,E=!1,v="",c="",A={1:new RegExp(/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/),2:new RegExp(/^([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/),3:new RegExp(/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/),4:new RegExp(/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/),month:new RegExp(/([0-9]{4})-([0-9]{2})$/)};S(document).on("resize",function(){S.agjCalendar.setPosition()}).on("click",function(e){if(0<S("#agjCalendar").length&&0<=H)switch(T[H].inputType){case"text":var a=T[H][E?"endDateSelector":"dateSelector"];0<S(e.target).parents("#agjCalendar").length||"agjCalendar"==S(e.target).attr("id")||0<S(e.target).parents(a).length||S(e.target).is(a)||S.agjCalendar.hide();break;case"dropdown":0<S(e.target).parents("#agjCalendar").length||"agjCalendar"==S(e.target).attr("id")||S.agjCalendar.hide()}return!0}).on("keyup",function(e){return!("Escape"===e.key&&0<=H&&("modal"==T[H].calendarDisplay||"full"==T[H].calendarDisplay)&&0<S("#agjCalendar").length&&(S("*:focus").trigger("blur"),S.agjCalendar.hide(),1))}),S(window).on("scroll",function(){0<=H&&S.agjCalendar.setPosition()}),S(window).on("resize",function(){0<=H&&S.agjCalendar.setPosition()}),S.fn.agjCalendar=function(e){if("object"!=typeof e&&(e={}),"input"==this.prop("tagName").toLowerCase()){for(var a;a="agjCalendar-"+Math.round(899999*Math.random()+1e5),0<S("input."+a).length;);this.addClass(a),e.dateSelector="input."+a,S.agjCalendar(e)}return this},S.agjCalendar=function(t){var e,a,n,l,r={calendarCount:1};if(!t.calendarCount||isNaN(t.calendarCount)||1<=parseInt(t.calendarCount,10)&&parseInt(t.calendarCount,10)<=3&&(r.calendarCount=parseInt(t.calendarCount,10)),r.overwriteMonthOptions=!0,!t.overwriteMonthOptions&&!1!==t.overwriteMonthOptions||0!=t.overwriteMonthOptions||(r.overwriteMonthOptions=!1),r.overwriteDayOptions=!0,!t.overwriteDayOptions&&!1!==t.overwriteDayOptions||0!=t.overwriteDayOptions||(r.overwriteDayOptions=!1),r.autoSetEndDate=!1,t.autoSetEndDate&&!0===t.autoSetEndDate&&(r.autoSetEndDate=!0),r.allowBlankDates=!1,t.allowBlankDates&&!0===t.allowBlankDates&&(r.allowBlankDates=!0),r.startWeekOnMonday=!1,t.startWeekOnMonday&&!0===t.startWeekOnMonday&&(r.startWeekOnMonday=!0),r.dayNameFormat="short",t.dayNameFormat)switch(t.dayNameFormat){case"short":case"medium":case"full":r.dayNameFormat=t.dayNameFormat}if(r.dateFormat=1,!t.dateFormat||2!=t.dateFormat&&3!=t.dateFormat&&4!=t.dateFormat||(r.dateFormat=t.dateFormat),r.minimumDate=new Date,t.minimumDate&&(A[4].test(t.minimumDate)?(e=t.minimumDate.substring(0,4),a=t.minimumDate.substring(5,7),n=t.minimumDate.substring(8,10),r.minimumDate.setFullYear(e,parseInt(a,10)-1,n)):t.minimumDate instanceof Date&&r.minimumDate.setFullYear(t.minimumDate.getFullYear(),t.minimumDate.getMonth(),t.minimumDate.getDate())),r.minimumDate.setHours(0,0,0,0),r.maximumDate=new Date,r.maximumDate.setFullYear(r.maximumDate.getFullYear()+1,r.maximumDate.getMonth(),r.maximumDate.getDate()),t.maximumDate&&(A[4].test(t.maximumDate)?(e=t.maximumDate.substring(0,4),a=t.maximumDate.substring(5,7),n=t.maximumDate.substring(8,10),(l=new Date).setFullYear(e,parseInt(a,10)-1,n),r.minimumDate<=l&&(r.maximumDate=l)):t.maximumDate instanceof Date&&t.maximumDate>=r.minimumDate&&r.maximumDate.setFullYear(t.maximumDate.getFullYear(),t.maximumDate.getMonth(),t.maximumDate.getDate())),r.maximumDate.setHours(23,59,59,999),r.defaultDate=new Date,t.defaultDate&&(A[4].test(t.defaultDate)?(e=t.defaultDate.substring(0,4),a=t.defaultDate.substring(5,7),n=t.defaultDate.substring(8,10),(l=new Date).setFullYear(e,parseInt(a,10)-1,n),r.minimumDate<=l&&l<=r.maximumDate&&(r.defaultDate=l)):t.defaultDate instanceof Date?r.defaultDate.setFullYear(t.defaultDate.getFullYear(),t.defaultDate.getMonth(),t.defaultDate.getDate()):r.allowBlankDates&&"blank"==t.defaultDate&&(r.defaultDate=t.defaultDate)),r.defaultDate<r.minimumDate?r.defaultDate.setFullYear(r.minimumDate.getFullYear(),r.minimumDate.getMonth(),r.minimumDate.getDate()):r.maximumDate<r.defaultDate&&r.defaultDate.setFullYear(r.maximumDate.getFullYear(),r.maximumDate.getMonth(),r.maximumDate.getDate()),r.allowRange=!1,t.allowRange&&!0===t.allowRange&&(r.allowRange=!0),t.allowRange){var s=0,g=new Date;for(g.setFullYear(r.minimumDate.getFullYear(),r.minimumDate.getMonth(),r.minimumDate.getDate());g<=r.maximumDate;)s++,g.setFullYear(g.getFullYear(),g.getMonth(),g.getDate()+1);r.minimumRange=0==s?0:1,!t.minimumRange&&0!==t.minimumRange||isNaN(t.minimumRange)||parseInt(t.minimumRange,10)<=s&&(r.minimumRange=t.minimumRange),r.maximumRange=0==s?0:s,!t.maximumRange&&0!==t.maximumRange||isNaN(t.maximumRange)||parseInt(t.maximumRange,10)<=s&&(r.maximumRange=t.maximumRange),r.defaultRange=0==s?0:1,!t.defaultRange&&0!==t.defaultRange||isNaN(t.defaultRange)||parseInt(t.defaultRange,10)>=r.minimumRange&&parseInt(t.defaultRange,10)<=r.maximumRange&&(r.defaultRange=t.defaultRange)}else r.defaultRange=0,r.minimumRange=0,r.maximumRange=0;switch(r.calendarDisplay="inline",!t.calendarDisplay||"modal"!=t.calendarDisplay&&"full"!=t.calendarDisplay||(r.calendarDisplay=t.calendarDisplay),r.inputType="text",t.inputType&&"dropdown"==t.inputType&&(r.inputType=t.inputType),r.inputType){case"text":var i,u,o=S(t.expanderSelector),d=S(t.dateSelector);t.allowRange&&(m=S(t.endExpanderSelector),i=S(t.endDateSelector)),1!=d.length||t.allowRange&&1!=i.length||(r.expanderSelector=t.expanderSelector,r.dateSelector=t.dateSelector,t.allowRange&&(r.endExpanderSelector=t.endExpanderSelector,r.endDateSelector=t.endDateSelector),h=T.length,T[h]=r,p=H,H=h,S.agjCalendar.setNewDate(r.defaultDate),H=p,u=function(){return H!=h||E||S(d).is(":focus")?(H=h,E=!1,S.agjCalendar.show()):S.agjCalendar.hide(),!1},0<o.length&&o.on("click",u),d.on("focus",u).on("keydown",function(e){return"Tab"===e.key&&t.allowRange&&setTimeout(function(){S(":focus")[0]!=i[0]&&S.agjCalendar.hide()},1),!0})),t.allowRange&&(p=H,"blank"==r.defaultDate?D="blank":(D=new Date).setFullYear(r.defaultDate.getFullYear(),r.defaultDate.getMonth(),r.defaultDate.getDate()+r.defaultRange),H=h,E=!0,S.agjCalendar.setNewDate(D,!0),H=p,E=!1,d.on("blur",function(){A[1].test(S(this).val())&&S.agjCalendar.checkEndDate(h)}),i.on("keydown",function(e){return"Tab"===e.key&&setTimeout(function(){S(":focus")[0]!=d[0]&&S.agjCalendar.hide()},1),!0}),u=function(){return H!=h||!E||S(i).is(":focus")?(H=h,E=!0,S.agjCalendar.show()):S.agjCalendar.hide(),!1},0<m.length&&m.on("click",u),i.on("focus",u));break;case"dropdown":var m,v,c,h,p,D,o=S(t.expanderSelector),b=S(t.monthSelector),F=S(t.daySelector);t.allowRange&&(m=S(t.endExpanderSelector),v=S(t.endMonthSelector),c=S(t.endDaySelector)),1!=b.length||1!=F.length||t.allowRange&&(1!=v.length||1!=c.length)||(r.monthSelector=t.monthSelector,r.daySelector=t.daySelector,r.expanderSelector=t.expanderSelector,t.allowRange&&(r.endMonthSelector=t.endMonthSelector,r.endDaySelector=t.endDaySelector,r.endExpanderSelector=t.endExpanderSelector),h=T.length,T[h]=r,S.agjCalendar.updateMonthSelectors(h),S.agjCalendar.updateDaySelectors(h),p=H,H=h,S.agjCalendar.setNewDate(r.defaultDate),H=p,0<o.length&&o.on("click",function(){return H!=h||E?(H=h,E=!1,S.agjCalendar.show()):S.agjCalendar.hide(),!1}),b.on("change",function(){var e,a;S.agjCalendar.updateDaySelectors(h),t.allowRange&&((e=new Date).setFullYear(b.val().substring(0,4),parseInt(b.val().substring(5,7),10)-1,F.val()),e.setHours(0,0,0,0),(a=new Date).setFullYear(v.val().substring(0,4),parseInt(v.val().substring(5,7),10)-1,c.val()),a.setHours(0,0,0,0),S.agjCalendar.updateMonthSelectors(h,!0),S.agjCalendar.updateDaySelectors(h,!0),a<e)&&(H=h,(a=new Date).setFullYear(e.getFullYear(),e.getMonth(),e.getDate()+r.defaultRange),S.agjCalendar.setNewDate(a,!0),H=-1)}),t.allowRange&&(S.agjCalendar.updateMonthSelectors(h,!0),S.agjCalendar.updateDaySelectors(h,!0),p=H,"blank"==r.defaultDate?D="blank":(D=new Date).setFullYear(r.defaultDate.getFullYear(),r.defaultDate.getMonth(),r.defaultDate.getDate()+r.defaultRange),H=h,E=!0,S.agjCalendar.setNewDate(D,!0),H=p,E=!1,F.on("change",function(){S.agjCalendar.checkEndDate(h),S.agjCalendar.updateMonthSelectors(h,!0),S.agjCalendar.updateDaySelectors(h,!0)}),0<m.length&&m.on("click",function(){return H==h&&E?S.agjCalendar.hide():(H=h,E=!0,S.agjCalendar.show()),!1}),v.on("change",function(){S.agjCalendar.updateDaySelectors(h,!0)})))}},S.agjCalendar.show=function(){var e=!1;switch(T[H].inputType){case"text":var a,t=S(T[H][E?"endDateSelector":"dateSelector"]);E&&(a=S(T[H].dateSelector)),e=1==t.length&&(!E||1==a.length);break;case"dropdown":var n,l,r=S(T[H][E?"endMonthSelector":"monthSelector"]),s=S(T[H][E?"endDaySelector":"daySelector"]);E&&(n=S(T[H].monthSelector),l=S(T[H].daySelector)),e=1==r.length&&1==s.length&&(!E||1==n.length&&1==l.length)}if(!0===T[H].startWeekOnMonday?S("#agjCalendar-body").addClass("agjCalendar-start-week-on-monday"):S("#agjCalendar-body").removeClass("agjCalendar-start-week-on-monday"),S("div.agjCalendar-days").empty().append(m()),e){var g=S("#agjCalendar");0==g.length&&(S.agjCalendar.addToDom(),g=S("#agjCalendar"));g.is(":visible")&&g.hide(),"modal"!=T[H].calendarDisplay&&"full"!=T[H].calendarDisplay||(window.scrollTo(0,1),window.scrollTo(0,0),v=S("body").css("overflow"),c=S("body").css("marginRight"),0<=String(c).indexOf("px")&&(c=c.substring(0,c.length-2)),c=parseInt(c,10),S("body").css({overflow:"hidden",marginRight:c+17}),S("#agjCalendar-modal-background").css({display:"block"})),S.agjCalendar.setPosition(),S.agjCalendar.updateMonthDropdown();var i,u,o,d=new Date;switch(T[H].inputType){case"text":switch(T[H].dateFormat){case 1:A[1].test(t.val())?d.setFullYear(t.val().substring(6,10),parseInt(t.val().substring(0,2),10)-1,parseInt(t.val().substring(3,5),10)):E&&A[1].test(a.val())?d.setFullYear(a.val().substring(6,10),parseInt(a.val().substring(0,2),10)-1,parseInt(a.val().substring(3,5),10)+T[H].minimumRange):E?d.setFullYear(T[H].minimumDate.getFullYear(),T[H].minimumDate.getMonth(),T[H].minimumDate.getDate()+T[H].minimumRange):d.setFullYear(T[H].minimumDate.getFullYear(),T[H].minimumDate.getMonth(),T[H].minimumDate.getDate()),E&&A[1].test(a.val())&&((i=new Date).setFullYear(a.val().substring(6,10),parseInt(a.val().substring(0,2),10)-1,parseInt(a.val().substring(3,5),10)),Math.ceil(Math.abs(d.getTime()-i.getTime())/864e5)>T[H].maximumRange)&&(d=new Date(i.getTime()+864e5*T[H].maximumRange));break;case 2:A[2].test(t.val())?(i=t.val().substring(t.val().length-4,t.val().length),u=k(t.val().substring(0,3)),o=t.val().substring(t.val().indexOf(" ")+1,t.val().indexOf(",")),d.setFullYear(i,u-1,o)):E&&A[2].test(a.val())?(i=a.val().substring(a.val().length-4,a.val().length),u=k(a.val().substring(0,3)),o=a.val().substring(a.val().indexOf(" ")+1,a.val().indexOf(",")),d.setFullYear(i,u-1,parseInt(o,10)+T[H].minimumRange)):E?d.setFullYear(T[H].minimumDate.getFullYear(),T[H].minimumDate.getMonth(),T[H].minimumDate.getDate()+T[H].minimumRange):d.setFullYear(T[H].minimumDate.getFullYear(),T[H].minimumDate.getMonth(),T[H].minimumDate.getDate());break;case 3:A[3].test(t.val())?d.setFullYear(t.val().substring(6,10),parseInt(t.val().substring(3,5),10)-1,parseInt(t.val().substring(0,2),10)):E&&A[3].test(a.val())?d.setFullYear(a.val().substring(6,10),parseInt(a.val().substring(3,5),10)-1,parseInt(a.val().substring(0,2),10)+T[H].minimumRange):E?d.setFullYear(T[H].minimumDate.getFullYear(),T[H].minimumDate.getMonth(),T[H].minimumDate.getDate()+T[H].minimumRange):d.setFullYear(T[H].minimumDate.getFullYear(),T[H].minimumDate.getMonth(),T[H].minimumDate.getDate());break;case 4:A[4].test(t.val())?d.setFullYear(t.val().substring(0,4),parseInt(t.val().substring(5,7),10)-1,parseInt(t.val().substring(8,10),10)):E&&A[4].test(a.val())?d.setFullYear(a.val().substring(0,4),parseInt(a.val().substring(5,7),10)-1,parseInt(a.val().substring(8,10),10)+T[H].minimumRange):E?d.setFullYear(T[H].minimumDate.getFullYear(),T[H].minimumDate.getMonth(),T[H].minimumDate.getDate()+T[H].minimumRange):d.setFullYear(T[H].minimumDate.getFullYear(),T[H].minimumDate.getMonth(),T[H].minimumDate.getDate())}break;case"dropdown":A.month.test(r.val())?d.setFullYear(r.val().substring(0,4),parseInt(r.val().substring(5,7),10)-1,1):E&&A.month.test(n.val())?d.setFullYear(n.val().substring(0,4),parseInt(n.val().substring(5,7),10)-1,parseInt(l.val(),10)+T[H].minimumRange):E?d.setFullYear(T[H].minimumDate.getFullYear(),T[H].minimumDate.getMonth(),T[H].minimumDate.getDate()+T[H].minimumRange):d.setFullYear(T[H].minimumDate.getFullYear(),T[H].minimumDate.getMonth(),T[H].minimumDate.getDate())}switch(d<T[H].minimumDate?d.setFullYear(T[H].minimumDate.getFullYear(),T[H].minimumDate.getMonth(),T[H].minimumDate.getDate()):d>T[H].maximumDate&&d.setFullYear(T[H].maximumDate.getFullYear(),T[H].maximumDate.getMonth(),T[H].maximumDate.getDate()),d.setHours(0,0,0,0),S.agjCalendar.updateCalendars(d),T[H].calendarCount){case 1:S("#agjCalendar").removeClass("agjCalendar-double agjCalendar-triple").addClass("agjCalendar-single"),S("#agjCalendar-first").show(),S("#agjCalendar-second, #agjCalendar-third").hide();break;case 2:S("#agjCalendar").removeClass("agjCalendar-single agjCalendar-triple").addClass("agjCalendar-double"),S("#agjCalendar-first, #agjCalendar-second").show(),S("#agjCalendar-third").hide();break;case 3:S("#agjCalendar").removeClass("agjCalendar-single agjCalendar-double").addClass("agjCalendar-triple"),S("#agjCalendar-first, #agjCalendar-second, #agjCalendar-third").show()}g.show(),S.agjCalendar.setPosition()}"full"==T[H].calendarDisplay&&setTimeout(function(){S(document).trigger("resize"),S(window).trigger("resize"),S(window).trigger("scroll")},100)},S.agjCalendar.setPosition=function(){if(0<=H)switch(T[H].calendarDisplay){case"inline":switch(T[H].inputType){case"text":var e=S("#agjCalendar"),a=S(T[H][E?"endDateSelector":"dateSelector"]),t=S(T[H][E?"endExpanderSelector":"expanderSelector"]);1==e.length&&1==a.length&&(s=0<t.length?t.offset().top+o(t):0,l="hidden"==a.attr("type")?a.parent().offset().top+o(a.parent()):a.offset().top+o(a),l=Math.max(s,l)+1,r=0<t.length?t.offset().left:Number.MAX_SAFE_INTEGER,a=("hidden"==a.attr("type")?a.parent():a).offset().left,i=Math.min(r,a),e.css({left:i,top:l}));break;case"dropdown":var n,l,r,s,g,i,e=S("#agjCalendar"),a=S(T[H][E?"endMonthSelector":"monthSelector"]),u=S(T[H][E?"endDaySelector":"daySelector"]),t=S(T[H][E?"endExpanderSelector":"expanderSelector"]);1==e.length&&1==a.length&&1==u.length&&(s=0<t.length?t.offset().top+o(t):0,g=a.offset().top+o(a),n=u.offset().top+o(u),l=Math.max(s,g,n)+1,r=0<t.length?t.offset().left:Number.MAX_SAFE_INTEGER,s=a.offset().left,g=u.offset().left,i=Math.min(r,s,g),e.css({left:i,top:l}))}(e=S("#agjCalendar")).removeClass("agjCalendar-full").css({position:"absolute"}),S("#agjCalendar-modal-background").addClass("agjCalendar-modal-background-full");break;case"modal":(e=S("#agjCalendar")).removeClass("agjCalendar-full").css({left:S(window).width()/2-function(e){for(var a=e.width(),t=["margin-left","borderLeftWidth","padding-left","padding-right","borderRightWidth","margin-right"],n=0;n<t.length;n++){var l=e.css(t[n]);"px"==l.substring(l.length-2).toLowerCase()&&(l=l.substring(0,l.length-2)),isNaN(l)||(a+=parseInt(l,10))}return a}(e)/2,position:"fixed",top:S(window).height()/2-o(e)/2}),S("#agjCalendar-modal-background").addClass("agjCalendar-modal-background-full");break;case"full":(e=S("#agjCalendar")).addClass("agjCalendar-full").css({left:0,position:"fixed",top:0}),S("#agjCalendar-modal-background").addClass("agjCalendar-modal-background-full")}},S.agjCalendar.hide=function(){var e=S("#agjCalendar");0<=H&&("modal"==T[H].calendarDisplay||"full"==T[H].calendarDisplay)&&(S("body").css({overflow:v,marginRight:c}),S("#agjCalendar-modal-background").hide()),1==e.length&&(e.hide(),H=-1)},S.agjCalendar.updateMonthSelectors=function(e,a){if(void 0===a&&(a=!1),T[e].overwriteMonthOptions){var t,n,l=S(T[e][a?"endMonthSelector":"monthSelector"]),r=S(T[e][a?"endDaySelector":"daySelector"]);if(T[e].allowRange&&a&&(t=S(T[e].monthSelector),n=S(T[e].daySelector)),1==l.length&&1==r.length&&(!T[e].allowRange||!a||1==t.length&&1==n.length)){A.month.test(l.val())&&0<r.val().length&&((s=new Date).setFullYear(l.val().substring(0,4),parseInt(l.val().substring(5,7),10)-1,1),O(s.getFullYear(),s.getMonth()+1)<parseInt(r.val(),10)?s.setFullYear(l.val().substring(0,4),parseInt(l.val().substring(5,7),10)-1,O(s.getFullYear(),s.getMonth()+1)):s.setFullYear(l.val().substring(0,4),parseInt(l.val().substring(5,7),10)-1,parseInt(r.val(),10))),l.html(""),T[e].allowBlankDates&&l.append('<option value=""></option>');for(var s,g,i=new Date,u=(i.setFullYear(T[e].minimumDate.getFullYear(),T[e].minimumDate.getMonth(),T[e].minimumDate.getDate()),a&&1==t.length&&1==n.length&&0<t.val().length&&0<n.val().length&&i.setFullYear(t.val().substring(0,4),parseInt(t.val().substring(5,7),10)-1,parseInt(n.val(),10)+T[e].minimumRange),i.setHours(0,0,0,0),new Date),o=(u.setFullYear(T[e].maximumDate.getFullYear(),T[e].maximumDate.getMonth(),T[e].maximumDate.getDate()),T[e].allowRange&&(a&&A.month.test(t.val())&&0<n.val().length&&((g=new Date).setFullYear(t.val().substring(0,4),parseInt(t.val().substring(5,7),10)-1,1),O(g.getFullYear(),g.getMonth()+1)<parseInt(r.val(),10)?g.setFullYear(t.val().substring(0,4),parseInt(t.val().substring(5,7),10)-1,O(g.getFullYear(),g.getMonth()+1)):g.setFullYear(t.val().substring(0,4),parseInt(t.val().substring(5,7),10)-1,parseInt(n.val(),10))),a?void 0!==g&&u.setFullYear(g.getFullYear(),g.getMonth(),g.getDate()+T[e].maximumRange):u.setFullYear(u.getFullYear(),u.getMonth(),u.getDate()-T[e].minimumRange)),u.setHours(23,59,59,999),i);o<u;){var d="";void 0!==s&&s.getFullYear()==o.getFullYear()&&s.getMonth()==o.getMonth()&&(d=' selected="selected"'),l.append('<option value="'+o.getFullYear()+"-"+(o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1)+'"'+d+">"+R(o.getMonth()+1)+" "+o.getFullYear()+"</option>"),o.setFullYear(o.getFullYear(),o.getMonth()+1,1)}}}},S.agjCalendar.updateDaySelectors=function(e,a){if(void 0===a&&(a=!1),0<=e&&T[e].overwriteDayOptions){var t=S(T[e][a?"endMonthSelector":"monthSelector"]),n=S(T[e][a?"endDaySelector":"daySelector"]);if(T[e].allowRange&&a&&(s=S(T[e].monthSelector),g=S(T[e].daySelector)),1==t.length&&1==n.length)if(A.month.test(t.val())){0<n.find("option").length&&0<n.val().length&&((l=new Date).setFullYear(t.val().substring(0,4),parseInt(t.val().substring(5,7),10)-1,1),O(l.getFullYear(),l.getMonth()+1)<parseInt(n.val(),10)?l.setFullYear(t.val().substring(0,4),parseInt(t.val().substring(5,7),10)-1,O(l.getFullYear(),l.getMonth()+1)):l.setFullYear(t.val().substring(0,4),parseInt(t.val().substring(5,7),10)-1,parseInt(n.val(),10)));var l,r=O(t.val().substring(0,4),t.val().substring(5,7));if(0<r){n.html(""),T[e].allowBlankDates&&n.append('<option value=""></option>');var s,g,i,u=new Date,o=(u.setFullYear(T[e].minimumDate.getFullYear(),T[e].minimumDate.getMonth(),T[e].minimumDate.getDate()),a&&(s=S(T[e].monthSelector),g=S(T[e].daySelector),1==s.length&&1==g.length&&0<s.val().length&&0<g.val().length?u.setFullYear(s.val().substring(0,4),parseInt(s.val().substring(5,7),10)-1,parseInt(g.val(),10)+T[e].minimumRange):u.setFullYear(u.getFullYear(),u.getMonth(),u.getDate()+T[e].minimumRange)),u.setHours(0,0,0,0),new Date),d=(o.setFullYear(T[e].maximumDate.getFullYear(),T[e].maximumDate.getMonth(),T[e].maximumDate.getDate()),T[e].allowRange&&(a&&A.month.test(s.val())&&0<g.val().length&&((i=new Date).setFullYear(s.val().substring(0,4),parseInt(s.val().substring(5,7),10)-1,1),O(i.getFullYear(),i.getMonth()+1)<parseInt(n.val(),10)?i.setFullYear(s.val().substring(0,4),parseInt(s.val().substring(5,7),10)-1,O(i.getFullYear(),i.getMonth()+1)):i.setFullYear(s.val().substring(0,4),parseInt(s.val().substring(5,7),10)-1,parseInt(g.val(),10))),a?void 0!==i&&o.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()+T[e].maximumRange):o.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()-T[e].minimumRange)),o.setHours(23,59,59,999),new Date);d.setFullYear(t.val().substring(0,4),parseInt(t.val().substring(5,7),10)-1,1),d<u&&!T[e].overwriteMonthOptions&&d.setFullYear(u.getFullYear(),u.getMonth(),1);for(var m=1;m<=r;m++){d.setFullYear(d.getFullYear(),d.getMonth(),m),d.setHours(12,30,30,500);var v="";void 0!==l&&l.getDate()==m&&(v=' selected="selected"'),u<=d&&d<=o&&n.append('<option value="'+(m<10?"0"+m:m)+'"'+v+">"+m+"</option>")}}}else n.html('<option value=""></option>')}},S.agjCalendar.updateMonthDropdown=function(){var e=S("#agjCalendar-dropdown");if((l=new Date).setFullYear(T[H].minimumDate.getFullYear(),T[H].minimumDate.getMonth(),T[H].minimumDate.getDate()),E)switch(T[H].inputType){case"text":var a,t,n,l,r=S(T[H].dateSelector);1==r.length&&(1==T[H].dateFormat&&A[1].test(r.val())?l.setFullYear(r.val().substring(6,10),parseInt(r.val().substring(0,2),10)-1,parseInt(r.val().substring(3,5),10)+T[H].minimumRange):2==T[H].dateFormat&&A[2].test(r.val())?(a=r.val().substring(r.val().length-4,r.val().length),t=k(r.val().substring(0,3)),n=r.val().substring(r.val().indexOf(" ")+1,r.val().indexOf(",")),(l=new Date).setFullYear(a,t-1,n)):3==T[H].dateFormat&&A[3].test(r.val())?l.setFullYear(r.val().substring(6,10),parseInt(r.val().substring(3,5),10)-1,parseInt(r.val().substring(0,2),10)+T[H].minimumRange):4==T[H].dateFormat&&A[4].test(r.val())?l.setFullYear(r.val().substring(0,4),parseInt(r.val().substring(5,7),10)-1,parseInt(r.val().substring(8,10),10)+T[H].minimumRange):l.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()+T[H].minimumRange));break;case"dropdown":var s=S(T[H].monthSelector),g=S(T[H].daySelector);1==s.length&&1==g.length&&0<s.val().length&&0<g.val().length?l.setFullYear(s.val().substring(0,4),parseInt(s.val().substring(5,7),10)-1,parseInt(g.val(),10)+T[H].minimumRange):l.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()+T[H].minimumRange)}l.setHours(0,0,0,0);var i,u,o,d,m=new Date;if(m.setFullYear(T[H].maximumDate.getFullYear(),T[H].maximumDate.getMonth(),T[H].maximumDate.getDate()),T[H].allowRange)switch(T[H].inputType){case"text":E&&(1==T[H].dateFormat&&A[1].test(r.val())?(d=new Date).setFullYear(r.val().substring(6,10),parseInt(r.val().substring(0,2),10)-1,parseInt(r.val().substring(3,5),10)):2==T[H].dateFormat&&A[2].test(r.val())?(i=r.val().substring(r.val().length-4,r.val().length),u=k(r.val().substring(0,3)),o=r.val().substring(r.val().indexOf(" ")+1,r.val().indexOf(",")),(d=new Date).setFullYear(i,u-1,o)):3==T[H].dateFormat&&A[3].test(r.val())?(d=new Date).setFullYear(r.val().substring(6,10),parseInt(r.val().substring(3,5),10)-1,parseInt(r.val().substring(0,2),10)):4==T[H].dateFormat&&A[4].test(r.val())&&(d=new Date).setFullYear(r.val().substring(0,4),parseInt(r.val().substring(5,7),10)-1,parseInt(r.val().substring(8,10),10))),E?void 0!==d&&m.setFullYear(d.getFullYear(),d.getMonth(),d.getDate()+T[H].maximumRange):m.setFullYear(m.getFullYear(),m.getMonth(),m.getDate()-T[H].minimumRange),E&&m>T[H].maximumDate&&(m=T[H].maximumDate);break;case"dropdown":E&&A.month.test(s.val())&&0<g.val().length&&(d=new Date).setFullYear(s.val().substring(0,4),parseInt(s.val().substring(5,7),10)-1,g.val()),E?void 0!==d&&m.setFullYear(d.getFullYear(),d.getMonth(),d.getDate()+T[H].maximumRange):m.setFullYear(m.getFullYear(),m.getMonth(),m.getDate()-T[H].minimumRange),E&&m>T[H].maximumDate&&(m=T[H].maximumDate)}m.setHours(23,59,59,999),e.html("");for(var v=l;v<m;)e.append('<option value="'+v.getFullYear()+"-"+(v.getMonth()+1<10?"0"+(v.getMonth()+1):v.getMonth()+1)+'">'+R(v.getMonth()+1,!1)+" "+v.getFullYear()+"</option>"),v.setFullYear(v.getFullYear(),v.getMonth()+1,1)},S.agjCalendar.updateCalendars=function(e){var a,t,n,l,r;switch(1!=e.getDate()&&e.setFullYear(e.getFullYear(),e.getMonth(),1),T[H].inputType){case"text":var s=S(T[H][E?"endDateSelector":"dateSelector"]);T[H].allowRange&&(b=S(E?T[H].dateSelector:T[H].endDateSelector));break;case"dropdown":var g=S(T[H][E?"endMonthSelector":"monthSelector"]),i=S(T[H][E?"endDaySelector":"daySelector"]);T[H].allowRange&&E&&(F=S(T[H].monthSelector),C=S(T[H].daySelector))}switch(T[H].inputType){case"text":if(1==s.length)switch(T[H].dateFormat){case 1:parseInt(s.val().substring(3,5),10)<=O(parseInt(s.val().substring(6,10)),parseInt(s.val().substring(0,2),10))&&A[1].test(s.val())&&((r=new Date).setFullYear(s.val().substring(6,10),parseInt(s.val().substring(0,2),10)-1,parseInt(s.val().substring(3,5),10)),r.setHours(0,0,0,0),T[H].allowRange)&&parseInt(b.val().substring(3,5),10)<=O(parseInt(b.val().substring(6,10)),parseInt(b.val().substring(0,2),10))&&A[1].test(b.val())&&((l=new Date).setFullYear(b.val().substring(6,10),parseInt(b.val().substring(0,2),10)-1,parseInt(b.val().substring(3,5),10)),l.setHours(0,0,0,0));break;case 2:A[2].test(s.val())&&(a=s.val().substring(s.val().length-4,s.val().length),t=k(s.val().substring(0,3)),n=s.val().substring(s.val().indexOf(" ")+1,s.val().indexOf(",")),(r=new Date).setFullYear(a,t-1,n),r.setHours(0,0,0,0),T[H].allowRange)&&A[2].test(b.val())&&(a=b.val().substring(b.val().length-4,b.val().length),t=k(b.val().substring(0,3)),n=b.val().substring(b.val().indexOf(" ")+1,b.val().indexOf(",")),(l=new Date).setFullYear(a,t-1,n),l.setHours(0,0,0,0));break;case 3:parseInt(s.val().substring(0,2),10)<=O(parseInt(s.val().substring(6,10)),parseInt(s.val().substring(3,5),10))&&A[3].test(s.val())&&((r=new Date).setFullYear(s.val().substring(6,10),parseInt(s.val().substring(3,5),10)-1,parseInt(s.val().substring(0,2),10)),r.setHours(0,0,0,0),T[H].allowRange)&&parseInt(b.val().substring(0,2),10)<=O(parseInt(b.val().substring(6,10)),parseInt(b.val().substring(3,5),10))&&A[3].test(b.val())&&((l=new Date).setFullYear(b.val().substring(6,10),parseInt(b.val().substring(3,5),10)-1,parseInt(b.val().substring(0,2),10)),l.setHours(0,0,0,0));break;case 4:parseInt(s.val().substring(8,10),10)<=O(parseInt(s.val().substring(0,4)),parseInt(s.val().substring(5,7),10))&&A[4].test(s.val())&&((r=new Date).setFullYear(s.val().substring(0,4),parseInt(s.val().substring(5,7),10)-1,parseInt(s.val().substring(8,10),10)),r.setHours(0,0,0,0),T[H].allowRange)&&parseInt(b.val().substring(8,10),10)<=O(parseInt(b.val().substring(0,4)),parseInt(b.val().substring(5,7),10))&&A[4].test(b.val())&&((l=new Date).setFullYear(b.val().substring(0,4),parseInt(b.val().substring(5,7),10)-1,parseInt(b.val().substring(8,10),10)),l.setHours(0,0,0,0))}break;case"dropdown":1==g.length&&1==i.length&&parseInt(i.val(),10)<=O(g.val().substring(0,4),parseInt(g.val().substring(5,7),10))&&((r=new Date).setFullYear(g.val().substring(0,4),parseInt(g.val().substring(5,7),10)-1,parseInt(i.val(),10)),r.setHours(0,0,0,0))}for(var u=S("#agjCalendar-dropdown"),o=T[H].calendarCount,d=1;d<=o;d++){var m=!0===T[H].startWeekOnMonday?(e.getDay()+6)%7:e.getDay(),v=function(){switch(d){case 1:return"#agjCalendar-first";case 2:return"#agjCalendar-second";case 3:return"#agjCalendar-third"}return!1}(),c=(1==d?u.val(e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)):2!=d&&3!=d||S(v+"-month-name").text(R(e.getMonth()+1)+" "+e.getFullYear()),""),h=0;if(0<m){c+='<div class="agjCalendar-week agjCalendar-week-one">';for(var p=1;p<=m;p++)c+='<div class="agjCalendar-blank agjCalendar-'+N(++h%7).toLowerCase()+'"></div>'}var D=new Date;if(D.setFullYear(T[H].minimumDate.getFullYear(),T[H].minimumDate.getMonth(),T[H].minimumDate.getDate()),E)switch(T[H].inputType){case"text":var b=S(T[H].dateSelector);switch(T[H].dateFormat){case 1:A[1].test(b.val())?D.setFullYear(b.val().substring(6,10),parseInt(b.val().substring(0,2),10)-1,parseInt(b.val().substring(3,5),10)+T[H].minimumRange):D.setFullYear(D.getFullYear(),D.getMonth(),D.getDate()+T[H].minimumRange);break;case 2:A[2].test(b.val())?(Y=b.val().substring(b.val().length-4,b.val().length),w=k(b.val().substring(0,3)),f=b.val().substring(b.val().indexOf(" ")+1,b.val().indexOf(",")),D.setFullYear(Y,w-1,parseInt(f,10)+T[H].minimumRange)):D.setFullYear(D.getFullYear(),D.getMonth(),D.getDate()+T[H].minimumRange);break;case 3:A[3].test(b.val())?D.setFullYear(b.val().substring(6,10),parseInt(b.val().substring(3,5),10)-1,parseInt(b.val().substring(0,2),10)+T[H].minimumRange):D.setFullYear(D.getFullYear(),D.getMonth(),D.getDate()+T[H].minimumRange);break;case 4:A[4].test(b.val())?D.setFullYear(b.val().substring(0,4),parseInt(b.val().substring(5,7),10)-1,parseInt(b.val().substring(8,10),10)+T[H].minimumRange):D.setFullYear(D.getFullYear(),D.getMonth(),D.getDate()+T[H].minimumRange)}break;case"dropdown":var F=S(T[H].monthSelector),C=S(T[H].daySelector);1==F.length&&1==C.length&&0<F.val().length&&0<C.val().length?D.setFullYear(F.val().substring(0,4),parseInt(F.val().substring(5,7),10)-1,parseInt(C.val(),10)+T[H].minimumRange):D.setFullYear(D.getFullYear(),D.getMonth(),D.getDate()+T[H].minimumRange)}D.setHours(0,0,0,0);var Y,w,f,j,M,I,y=new Date;if(y.setFullYear(T[H].maximumDate.getFullYear(),T[H].maximumDate.getMonth(),T[H].maximumDate.getDate()),T[H].allowRange){if(E)switch("text"==T[H].inputType){case"text":switch(T[H].dateFormat){case 1:A[1].test(b.val())&&((j=new Date).setFullYear(b.val().substring(6,10),parseInt(b.val().substring(0,2),10)-1,1),O(j.getFullYear(),j.getMonth()+1)<parseInt(b.val().substring(3,5),10)?j.setFullYear(b.val().substring(6,10),parseInt(b.val().substring(0,2),10)-1,O(j.getFullYear(),j.getMonth()+1)):j.setFullYear(b.val().substring(6,10),parseInt(b.val().substring(0,2),10)-1,parseInt(b.val().substring(3,5),10)));break;case 2:A[2].test(b.val())&&(Y=b.val().substring(b.val().length-4,b.val().length),w=k(b.val().substring(0,3)),f=b.val().substring(b.val().indexOf(" ")+1,b.val().indexOf(",")),(j=new Date).setFullYear(Y,w-1,1),O(j.getFullYear(),j.getMonth()+1)<f?j.setFullYear(Y,w-1,O(j.getFullYear(),j.getMonth()+1)):j.setFullYear(Y,w-1,f));break;case 3:A[3].test(b.val())&&((j=new Date).setFullYear(b.val().substring(6,10),parseInt(b.val().substring(3,5),10)-1,1),O(j.getFullYear(),j.getMonth()+1)<parseInt(b.val().substring(0,2),10)?j.setFullYear(b.val().substring(6,10),parseInt(b.val().substring(3,5),10)-1,O(j.getFullYear(),j.getMonth()+1)):j.setFullYear(b.val().substring(6,10),parseInt(b.val().substring(3,5),10)-1,parseInt(b.val().substring(0,2),10)));break;case 4:A[4].test(b.val())&&((j=new Date).setFullYear(b.val().substring(0,4),parseInt(b.val().substring(5,7),10)-1,1),O(j.getFullYear(),j.getMonth()+1)<parseInt(b.val().substring(8,10),10)?j.setFullYear(b.val().substring(0,4),parseInt(b.val().substring(5,7),10)-1,O(j.getFullYear(),j.getMonth()+1)):j.setFullYear(b.val().substring(0,4),parseInt(b.val().substring(5,7),10)-1,parseInt(b.val().substring(8,10),10)))}break;case"dropdown":A.month.test(F.val())&&0<C.val().length&&((j=new Date).setFullYear(F.val().substring(0,4),parseInt(F.val().substring(5,7),10)-1,1),O(j.getFullYear(),j.getMonth()+1)<parseInt(i.val(),10)?j.setFullYear(F.val().substring(0,4),parseInt(F.val().substring(5,7),10)-1,O(j.getFullYear(),j.getMonth()+1)):j.setFullYear(F.val().substring(0,4),parseInt(F.val().substring(5,7),10)-1,parseInt(C.val(),10)))}E?void 0!==j&&y.setFullYear(j.getFullYear(),j.getMonth(),j.getDate()+T[H].maximumRange):y.setFullYear(y.getFullYear(),y.getMonth(),y.getDate()-T[H].minimumRange),E&&y>T[H].maximumDate&&(y=T[H].maximumDate)}for(y.setHours(23,59,59,999),p=1;p<=42-m;p++)h%7==0&&(0<c.length&&(c+="</div>"),c+='<div class="agjCalendar-week agjCalendar-week-'+function(e){switch(e=isNaN(e)?e:parseInt(e,10)){case 0:return"Zero";case 1:return"One";case 2:return"Two";case 3:return"Three";case 4:return"Four";case 5:return"Five";case 6:return"Six";case 7:return"Seven";case 8:return"Eight";case 9:return"Nine";case 10:return"Ten"}return""}(Math.round(h/7)+1).toLowerCase()+'">'),p<=O(e.getFullYear(),e.getMonth()+1)?((M=new Date).setFullYear(e.getFullYear(),e.getMonth(),p),I="",D<=M&&M<=y&&(I+=" agjCalendar-selectable"),M.getFullYear()==(new Date).getFullYear()&&M.getMonth()==(new Date).getMonth()&&M.getDate()==(new Date).getDate()&&(I+=" agjCalendar-today"),r&&M.getFullYear()==r.getFullYear()&&M.getMonth()==r.getMonth()&&M.getDate()==r.getDate()&&(I+=" agjCalendar-active"),l&&M.getFullYear()==l.getFullYear()&&M.getMonth()==l.getMonth()&&M.getDate()==l.getDate()&&(I+=" agjCalendar-other-active"),r&&l&&r!=l&&(r<l&&r<=M&&M<=l||l<r&&M<=r&&l<=M)&&(I+=" agjCalendar-in-range"),c+='<div class="agjCalendar-'+N(h++%7+1).toLowerCase()+I+'">',D<=M&&M<=y&&(c+='<a href="#" title="'+R(e.getMonth()+1)+" "+p+", "+e.getFullYear()+'" id="agjCalendar-'+e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(p<10?"0"+p:p)+'">'),c+=p,M>=T[H].minimumDate&&M<=y&&(c+="</a>"),c+="</div>"):c+='<div class="agjCalendar-blank agjCalendar-'+N(h++%7+1).toLowerCase()+'"></div>';c+="</div>",S(v+" div.agjCalendar-week").remove(),S(v).append(c),7==S(v+" div.agjCalendar-week-five div.agjCalendar-blank").length?S(v).addClass("agjCalendar-four-weeks").removeClass("agjCalendar-five-weeks").removeClass("agjCalendar-six-weeks"):7==S(v+" div.agjCalendar-week-six div.agjCalendar-blank").length?S(v).removeClass("agjCalendar-four-weeks").addClass("agjCalendar-five-weeks").removeClass("agjCalendar-six-weeks"):S(v).removeClass("agjCalendar-four-weeks").removeClass("agjCalendar-five-weeks").addClass("agjCalendar-six-weeks"),e.setFullYear(e.getFullYear(),e.getMonth()+1,1)}S("#agjCalendar div.agjCalendar-week a").on("click",function(){var e=new Date;return e.setFullYear(this.id.substring(12,16),parseInt(this.id.substring(17,19),10)-1,this.id.substring(20,22)),S.agjCalendar.setNewDate(e,E),0<=H&&!E&&T[H].allowRange&&S.agjCalendar.checkEndDate(H),S.agjCalendar.hide(),!1});var x=new Date;x.setFullYear(u.val().substring(0,4),parseInt(u.val().substring(5,7),10)-2,1),0==u.find("option[value="+x.getFullYear()+"-"+(x.getMonth()+1<10?"0"+(x.getMonth()+1):x.getMonth()+1)+"]").length?S("#agjCalendar a.agjCalendar-previous-month").fadeTo(1,.33):S("#agjCalendar a.agjCalendar-previous-month").fadeTo(1,1),x.setFullYear(u.val().substring(0,4),parseInt(u.val().substring(5,7),10),1),0==u.find("option[value="+x.getFullYear()+"-"+(x.getMonth()+1<10?"0"+(x.getMonth()+1):x.getMonth()+1)+"]").length?S("#agjCalendar a.agjCalendar-next-month").fadeTo(1,.33):S("#agjCalendar a.agjCalendar-next-month").fadeTo(1,1)},S.agjCalendar.setNewDate=function(e,a){switch(void 0===a&&(a=!1),T[H].inputType){case"text":var t=S(T[H][a?"endDateSelector":"dateSelector"]);if("blank"==e)switch(T[H].dateFormat){case 1:t.val("mm/dd/yyyy").trigger("change");break;case 2:t.val("Select a Date").trigger("change");break;case 3:t.val("dd/mm/yyyy").trigger("change");break;case 4:t.val("yyyy-mm-dd").trigger("change")}else switch(T[H].dateFormat){case 1:t.val((e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"/"+(e.getDate()<10?"0"+e.getDate():e.getDate())+"/"+e.getFullYear()).trigger("change");break;case 2:t.val(R(e.getMonth()+1,!1)+" "+e.getDate()+", "+e.getFullYear()).trigger("change");break;case 3:t.val((e.getDate()<10?"0"+e.getDate():e.getDate())+"/"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"/"+e.getFullYear()).trigger("change");break;case 4:t.val(e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())).trigger("change")}break;case"dropdown":var n=S(T[H][a?"endMonthSelector":"monthSelector"]),l="blank"==e?"":e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1),r=S(T[H][a?"endDaySelector":"daySelector"]),s="blank"==e?"":e.getDate()<10?"0"+e.getDate():e.getDate();0<l.length&&0<n.find("option[value="+l+"]").length&&("blank"==e||parseInt(s,10)<=O(e.getFullYear(),e.getMonth()+1))&&(n.val(l).trigger("change"),S.agjCalendar.updateDaySelectors(H,a),r.val(s).trigger("change"))}},S.agjCalendar.checkEndDate=function(e){switch(T[e].inputType){case"text":var a,t,n,l,r,s,g,i=S(T[e].dateSelector),u=S(T[e].endDateSelector);if(1==i.length&&1==u.length)switch(T[e].dateFormat){case 1:A[1].test(i.val())&&(A[1].test(u.val())?((o=new Date).setFullYear(i.val().substring(6,10),parseInt(i.val().substring(0,2),10)-1,parseInt(i.val().substring(3,5),10)),o.setHours(0,0,0,0),(d=new Date).setFullYear(u.val().substring(6,10),parseInt(u.val().substring(0,2),10)-1,parseInt(u.val().substring(3,5),10)),d.setHours(0,0,0,0),(a=new Date).setFullYear(o.getFullYear(),o.getMonth(),o.getDate()+T[e].minimumRange),a.setHours(0,0,0,0),(t=new Date).setFullYear(o.getFullYear(),o.getMonth(),o.getDate()+T[e].maximumRange),t.setHours(0,0,0,0),(d<a||t<d)&&(t<d?d.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):d.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()+T[e].defaultRange),v=H,H=e,S.agjCalendar.setNewDate(d,!0),H=v)):T[e].autoSetEndDate&&((g=new Date).setFullYear(i.val().substring(6,10),parseInt(i.val().substring(0,2),10)-1,parseInt(i.val().substring(3,5),10)+T[e].defaultRange),v=H,H=e,S.agjCalendar.setNewDate(g,!0),H=v));break;case 2:A[2].test(i.val())&&(A[2].test(u.val())?(l=i.val().substring(i.val().length-4,i.val().length),r=k(i.val().substring(0,3)),s=i.val().substring(i.val().indexOf(" ")+1,i.val().indexOf(",")),(o=new Date).setFullYear(l,r-1,s),a=u.val().substring(u.val().length-4,u.val().length),t=k(u.val().substring(0,3)),n=u.val().substring(u.val().indexOf(" ")+1,u.val().indexOf(",")),(d=new Date).setFullYear(a,t-1,n),d.setHours(0,0,0,0),(m=new Date).setFullYear(o.getFullYear(),o.getMonth(),o.getDate()+T[e].minimumRange),m.setHours(0,0,0,0),d<m&&(m.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()+T[e].defaultRange),v=H,H=e,S.agjCalendar.setNewDate(m,!0),H=v)):T[e].autoSetEndDate&&(l=i.val().substring(i.val().length-4,i.val().length),r=k(i.val().substring(0,3)),s=i.val().substring(i.val().indexOf(" ")+1,i.val().indexOf(",")),(g=new Date).setFullYear(l,r-1,parseInt(s,10)+T[e].defaultRange),v=H,H=e,S.agjCalendar.setNewDate(g,!0),H=v));break;case 3:A[3].test(i.val())&&(A[3].test(u.val())?((o=new Date).setFullYear(i.val().substring(6,10),parseInt(i.val().substring(3,5),10)-1,parseInt(i.val().substring(0,2),10)),(d=new Date).setFullYear(u.val().substring(6,10),parseInt(u.val().substring(3,5),10)-1,parseInt(u.val().substring(0,2),10)),d.setHours(0,0,0,0),(m=new Date).setFullYear(o.getFullYear(),o.getMonth(),o.getDate()+T[e].minimumRange),m.setHours(0,0,0,0),d<m&&(m.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()+T[e].defaultRange),v=H,H=e,S.agjCalendar.setNewDate(m,!0),H=v)):T[e].autoSetEndDate&&((g=new Date).setFullYear(i.val().substring(6,10),parseInt(i.val().substring(3,5),10)-1,parseInt(i.val().substring(0,2),10)+T[e].defaultRange),v=H,H=e,S.agjCalendar.setNewDate(g,!0),H=v));break;case 4:A[4].test(i.val())&&(A[4].test(u.val())?((o=new Date).setFullYear(i.val().substring(0,4),parseInt(i.val().substring(5,7),10)-1,parseInt(i.val().substring(8,10),10)),(d=new Date).setFullYear(u.val().substring(0,4),parseInt(u.val().substring(5,7),10)-1,parseInt(u.val().substring(8,10),10)),d.setHours(0,0,0,0),(m=new Date).setFullYear(o.getFullYear(),o.getMonth(),o.getDate()+T[e].minimumRange),m.setHours(0,0,0,0),d<m&&(m.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()+T[e].defaultRange),v=H,H=e,S.agjCalendar.setNewDate(m,!0),H=v)):T[e].autoSetEndDate&&((g=new Date).setFullYear(i.val().substring(0,4),parseInt(i.val().substring(5,7),10)-1,parseInt(i.val().substring(8,10),10)+T[e].defaultRange),v=H,H=e,S.agjCalendar.setNewDate(g,!0),H=v))}break;case"dropdown":var o,d,m,v,c=S(T[e].monthSelector),h=S(T[e].daySelector),p=S(T[e].endMonthSelector),D=S(T[e].endDaySelector);1==c.length&&1==h.length&&1==p.length&&1==D.length&&A.month.test(c.val())&&0<h.val().length&&((o=new Date).setFullYear(c.val().substring(0,4),parseInt(c.val().substring(5,7),10)-1,parseInt(h.val(),10)),(d=new Date).setFullYear(p.val().substring(0,4),parseInt(p.val().substring(5,7),10)-1,parseInt(D.val(),10)),d.setHours(0,0,0,0),(m=new Date).setFullYear(o.getFullYear(),o.getMonth(),o.getDate()+T[e].minimumRange),m.setHours(0,0,0,0),d<m)&&(m.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()+T[e].defaultRange),v=H,H=e,S.agjCalendar.setNewDate(m,!0),H=v)}},S.agjCalendar.addToDom=function(){var e=m(),a="";a+='<div id="agjCalendar-modal-background"></div><div id="agjCalendar"><div id="agjCalendar-header"><div id="agjCalendar-header-inner"><a href="#" title="Hide Calendar" id="agjCalendar-hide">Hide Calendar</a><span>Powered by</span> <a href="https://agjcalendar.agjjquery.org/" target="_blank" title="agjCalendar" id="agjCalendar-powered-by">agjCalendar</a></div></div><div id="agjCalendar-body"',!0===T[H].startWeekOnMonday&&(a+=' class="agjCalendar-start-week-on-monday"'),a+='><div id="agjCalendar-first"><div class="agjCalendar-month"><div class="agjCalendar-month-inner-1"><div class="agjCalendar-month-inner-2"><select id="agjCalendar-dropdown"></select><a href="#" title="Next Month" class="agjCalendar-next-month"><span class="agjCalendar-next-month-inner">Next Month</span></a><a href="#" title="Previous Month" class="agjCalendar-previous-month"><span class="agjCalendar-previous-month-inner">Previous Month</span></a></div></div></div><div class="agjCalendar-days">'+e+'</div></div><div id="agjCalendar-second"><div class="agjCalendar-month"><div class="agjCalendar-month-inner" colspan="5"><strong id="agjCalendar-second-month-name"></strong><a href="#" title="Next Month" class="agjCalendar-next-month"><span class="agjCalendar-next-month-inner">Next Month</span></a><a href="#" title="Previous Month" class="agjCalendar-previous-month"><span class="agjCalendar-previous-month-inner">Previous Month</span></a></div></div><div class="agjCalendar-days">'+e+'</div></div><div id="agjCalendar-third"><div class="agjCalendar-month"><div class="agjCalendar-month-inner" colspan="5"><strong id="agjCalendar-third-month-name"></strong><a href="#" title="Next Month" class="agjCalendar-next-month"><span class="agjCalendar-next-month-inner">Next Month</span></a><a href="#" title="Previous Month" class="agjCalendar-previous-month"><span class="agjCalendar-previous-month-inner">Previous Month</span></a></div></div><div class="agjCalendar-days">'+e+"</div></div></div></div>",S("body").prepend(a),S("#agjCalendar-hide").on("click",function(){return S.agjCalendar.hide(),!1}),S("#agjCalendar-dropdown").on("change",function(){var e;A.month.test(S(this).val())&&((e=new Date).setFullYear(S(this).val().substring(0,4),parseInt(S(this).val().substring(5,7),10)-1,1),S.agjCalendar.updateCalendars(e))}),S("#agjCalendar a.agjCalendar-previous-month, #agjCalendar a.agjCalendar-next-month").on("click",function(){var e;return A.month.test(S("#agjCalendar-dropdown").val())&&((e=new Date).setFullYear(S("#agjCalendar-dropdown").val().substring(0,4),parseInt(S("#agjCalendar-dropdown").val().substring(5,7),10)-1,1),S(this).hasClass("agjCalendar-previous-month")?e.setFullYear(e.getFullYear(),e.getMonth()-1,e.getDate()):S(this).hasClass("agjCalendar-next-month")&&e.setFullYear(e.getFullYear(),e.getMonth()+1,e.getDate()),e=e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1),0<S("#agjCalendar-dropdown option[value="+e+"]").length)&&S("#agjCalendar-dropdown").val(e).trigger("change"),!1})},S.ctcCalendar=function(e){S.agjCalendar(e)}}(jQuery);