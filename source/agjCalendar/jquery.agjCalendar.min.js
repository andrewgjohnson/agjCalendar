/**
 * Javascript source code of agjCalendar v1.0.1.
 *
 * Copyright (c) 2013-2023 Andrew G. Johnson <andrew@andrewgjohnson.com>
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 * @file The Javascript source code for the agjCalendar jQuery plugin.
 * @copyright 2013-2023 Andrew G. Johnson <andrew@andrewgjohnson.com>
 * @license MIT
 * @see {@link https://github.com/andrewgjohnson/agjCalendar GitHub Repository}
 * @see {@link https://agjCalendar.agjjQuery.org/ Online Documentation}
 * @author Andrew G. Johnson <andrew@andrewgjohnson.com>
 * @version 1.0.1
 */
!function(M){function r(t,e){for(var n=-1,a=["full","abbreviated"],r=0;r<a.length&&(M.map(S[e].months[a[r]],function(e,a){if(-1===n&&e.toLowerCase()==t.toLowerCase())return n=a,!1}),-1===n);r++);return n}function f(e){e="agjCalendar Error! "+e;var a=window.console;a&&a.error?a.error(e):a&&a.log&&a.log(e)}function p(e,a){if(void 0===a&&(a=!1),e.overwriteDayOptions){var t=M(e[a?"endMonthSelector":"monthSelector"]),n=M(e[a?"endDaySelector":"daySelector"]);if(n.find("option").remove(),y.month.test(t.val())){e.allowBlankDates&&n.append('<option value=""></option>');for(var r,l,i=I(e,a),o=(e.allowRange&&a&&(r=I(e,!1)),new Date(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate())),d=(a&&(-1===r?o.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()+e.minimumRange):o.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()+e.minimumRange)),o.setHours(0,0,0,0),new Date(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()-e.minimumRange)),s=(a&&(-1===r||(d.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()+e.maximumRange),d>e.maximumDate))&&d.setFullYear(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()),d.setHours(23,59,59,999),t.val().substring(5,7)),s=parseInt(s,10)-1,g=new Date(t.val().substring(0,4),s,1);g<d&&g.getMonth()==s;)o<=g&&(l="<option",l+=' value="'+O(g,"DD",e.language)+'"',-1!==i&&g.getDate()==i.getDate()&&(l+=' selected="selected"'),l=(l+=">")+g.getDate()+"</option>",n.append(l)),g.setFullYear(g.getFullYear(),g.getMonth(),g.getDate()+1)}0===n.find("option").length&&n.append('<option value=""></option>')}}function C(e,a){if(void 0===a&&(a=!1),e.overwriteMonthOptions)for(var t,n=M(e[a?"endMonthSelector":"monthSelector"]),r=(n.find("option").remove(),e.allowBlankDates&&n.append('<option value=""></option>'),I(e,a)),l=(e.allowRange&&a&&(t=I(e,!1)),new Date(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate())),i=(a&&(-1===t?l.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()+e.minimumRange):l.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+e.minimumRange)),l.setHours(0,0,0,0),new Date(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()-e.minimumRange)),o=(a&&(-1===t||(i.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+e.maximumRange),i>e.maximumDate))&&i.setFullYear(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()),i.setHours(23,59,59,999),new Date(l.getFullYear(),l.getMonth(),l.getDate()));o<i;){var d="<option";d+=' value="'+O(o,"YYYY-MM",e.language)+'"',-1!==r&&o.getFullYear()==r.getFullYear()&&o.getMonth()==r.getMonth()&&(d+=' selected="selected"'),d=(d+=">")+O(o,"MMMM YYYY",e.language)+"</option>",n.append(d),o.setFullYear(o.getFullYear(),o.getMonth()+1,1)}}var Y=[],w=!1,j="",x="",b=0,F=0,y={1:new RegExp(/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/),2:new RegExp(/^([A-Za-zÀ-ÖØ-öø-ÿ]+) ([0-9]{1,2}), ([0-9]{4})$/),3:new RegExp(/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/),4:new RegExp(/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/),5:new RegExp(/^([0-9]{1,2}) ([A-Za-zÀ-ÖØ-öø-ÿ]+) ([0-9]{4})$/),month:new RegExp(/([0-9]{4})-([0-9]{2})$/)},S={en:{daysOfWeek:{full:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},medium:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},short:{0:"S",1:"M",2:"T",3:"W",4:"T",5:"F",6:"S"}},months:{full:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},abbreviated:{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"}},hideCalendar:"Hide Calendar",nextMonth:"Next Month",previousMonth:"Previous Month",poweredBy:"Powered by",selectADate:"Select a Date"},fr:{daysOfWeek:{full:{0:"dimanche",1:"lundi",2:"mardi",3:"mercredi",4:"jeudi",5:"vendredi",6:"samedi"},medium:{0:"dim",1:"lun",2:"mar",3:"mer",4:"jeu",5:"ven",6:"sam"},short:{0:"d",1:"l",2:"m",3:"m",4:"j",5:"v",6:"s"}},months:{full:{0:"janvier",1:"février",2:"mars",3:"avril",4:"mai",5:"juin",6:"juillet",7:"août",8:"septembre",9:"octobre",10:"novembre",11:"décembre"},abbreviated:{0:"janv",1:"févr",2:"mars",3:"avr",4:"mai",5:"juin",6:"juil",7:"août",8:"sept",9:"octo",10:"nov",11:"déc"}},hideCalendar:"Masquer le calendrier",nextMonth:"Le mois prochain",previousMonth:"Le mois précédent",poweredBy:"Propulsé par",selectADate:"Sélectionnez une date"}},k=function(e){var a,t,n,r,l;e.allowRange&&-1!==(a=I(e))&&(t=!1,n=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e.minimumRange),r<e.minimumDate&&n.setFullYear(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate()),(r=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e.maximumRange))>e.maximumDate&&r.setFullYear(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()),t=-1!==(l=I(e,!0))&&(l<n||r<l)&&("always"==e.autoSetEndDate||"dates"==e.autoSetEndDate)||-1===l&&("always"==e.autoSetEndDate||"blanks"==e.autoSetEndDate)||t)&&((l=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e.defaultRange))<n?l.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()):r<l&&l.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),q(e,l,!0))},R=function(e,a){if(M.agjCalendar.isActive()){var t=M("#agjCalendar");if(t.attr("data-active")==e)return(!0===t.attr("data-active-is-end")||"true"===t.attr("data-active-is-end"))===a}return!1},E=function(){function e(){var e,a;M.agjCalendar.isActive()&&(a=M("#agjCalendar"),e=Y[a.attr("data-active")],a=!0===a.attr("data-active-is-end")||"true"===a.attr("data-active-is-end"),H(e,a))}var a=M("body").append('<div id="agjCalendar-modal-background"></div><div id="agjCalendar"><div id="agjCalendar-header"><div id="agjCalendar-header-inner"><a href="#" id="agjCalendar-hide"></a><span></span> <a href="https://agjcalendar.agjjquery.org/" target="_blank" title="agjCalendar" id="agjCalendar-powered-by">agjCalendar</a></div></div><div id="agjCalendar-body"><div id="agjCalendar-first"><div class="agjCalendar-month"><div class="agjCalendar-month-inner-1"><div class="agjCalendar-month-inner-2"><select id="agjCalendar-dropdown"></select><a href="#" class="agjCalendar-next-month"><span class="agjCalendar-next-month-inner"></span></a><a href="#" class="agjCalendar-previous-month"><span class="agjCalendar-previous-month-inner"></span></a></div></div></div><div class="agjCalendar-days"></div></div><div id="agjCalendar-second"><div class="agjCalendar-month"><div class="agjCalendar-month-inner" colspan="5"><strong id="agjCalendar-second-month-name"></strong><a href="#" class="agjCalendar-next-month"><span class="agjCalendar-next-month-inner"></span></a><a href="#" class="agjCalendar-previous-month"><span class="agjCalendar-previous-month-inner"></span></a></div></div><div class="agjCalendar-days"></div></div><div id="agjCalendar-third"><div class="agjCalendar-month"><div class="agjCalendar-month-inner" colspan="5"><strong id="agjCalendar-third-month-name"></strong><a href="#" class="agjCalendar-next-month"><span class="agjCalendar-next-month-inner"></span></a><a href="#" class="agjCalendar-previous-month"><span class="agjCalendar-previous-month-inner"></span></a></div></div><div class="agjCalendar-days"></div></div></div></div>').find("#agjCalendar");M("#agjCalendar-hide").on("click",function(){return M.agjCalendar.deactivate(),!1}),M("#agjCalendar-dropdown").on("change",function(){var e;y.month.test(M(this).val())&&(e=new Date(M(this).val().substring(0,4),parseInt(M(this).val().substring(5,7),10)-1,1),B(e))}),M("a.agjCalendar-previous-month, a.agjCalendar-next-month").on("click",function(){var e;return y.month.test(M("#agjCalendar-dropdown").val())&&(e=new Date(M("#agjCalendar-dropdown").val().substring(0,4),parseInt(M("#agjCalendar-dropdown").val().substring(5,7),10)-1,1),M(this).hasClass("agjCalendar-previous-month")?e.setFullYear(e.getFullYear(),e.getMonth()-1,e.getDate()):M(this).hasClass("agjCalendar-next-month")&&e.setFullYear(e.getFullYear(),e.getMonth()+1,e.getDate()),e=O(e,"YYYY-MM"),0<M("#agjCalendar-dropdown option[value="+e+"]").length)&&M("#agjCalendar-dropdown").val(e).trigger("change"),!1});return M(window).on("resize",e),M(document).on("resize",e).on("keyup",function(e){return"Escape"!==e.key||!M.agjCalendar.isActive()||(M("*:focus").trigger("blur"),M.agjCalendar.deactivate(),!1)}).on("click",function(e){if(w=!1,M.agjCalendar.isActive()){var a="agjCalendar"==M(e.target).attr("id")||0<M(e.target).parents("#agjCalendar").length,e=M(e.target).is(".agjCalendar-active-input")||0<M(e.target).parents(".agjCalendar-active-input").length;if(a||e)w=!0;else if(!a&&!e){a=-1,e=M("#agjCalendar").attr("data-active");switch(a=0<=e?Y[e].calendarDisplay:a){case"modal":case"full":break;default:M.agjCalendar.deactivate()}}}return!0}),a},O=function(t,n,a){a="fr"===a?a:"en";for(var e={DD:function(e){return(e.getDate()<10?"0":"")+e.getDate()},D:function(e){return e.getDate()},MMMM:function(e){return o(e.getMonth(),!0,a)},MMM:function(e){return o(e.getMonth(),!1,a)},MM:function(e){return(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)},M:function(e){return e.getMonth()+1},YYYY:function(e){return e.getFullYear()}},r="",l=0;n.length>l;){var i=!1;M.map(e,function(e,a){i||n.substring(l,l+a.length)!=a||(r+=e(t),l+=a.length,i=!0)}),i||(r+=n.substring(l,l+1),l++)}return r},N=function(e,a,t){if(0<=e&&e<=6)switch(a){case"full":case"medium":case"short":return S[t].daysOfWeek[a][e]}return-1},I=function(e,a){var t=-1;if(!(a=!0!==a?!1:a)||e.allowRange)switch(e.inputType){case"text":t=i(M(e[a?"endDateSelector":"dateSelector"]).val(),e.dateFormat,e.language);break;case"dropdown":var n=M(e[a?"endMonthSelector":"monthSelector"]).val();n=(n+="-")+M(e[a?"endDaySelector":"daySelector"]).val(),t=i(n,4,e.language)}if(-1===t)return-1;if(t<e.minimumDate)return e.minimumDate;if(t>e.maximumDate)return e.maximumDate;if(0<e.excludeDates.length)for(var r=0;r<e.excludeDates.length;r++){var l=e.excludeDates[r];if(t.getFullYear()===l.getFullYear()&&t.getMonth()===l.getMonth()&&t.getDate()===l.getDate())return-1}return t},T=function(e){return"px"==e.substring(e.length-2).toLowerCase()&&(e=e.substring(0,e.length-2)),isNaN(e)?0:parseInt(e,10)},A=function(e,a){switch(a=isNaN(a)?a:parseInt(a,10)){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return(e=parseInt(e,10))%4==0&&e%100!=0||e%400==0?29:28}return-1},m=function(e){for(var a=e.height(),t=["margin-top","borderTopWidth","padding-top","padding-bottom","borderBottomWidth","margin-bottom"],n=0;n<t.length;n++){var r=T(e.css(t[n]));isNaN(r)||(a+=r)}return a},c=function(e){for(var a=e.width(),t=["margin-left","borderLeftWidth","padding-left","padding-right","borderRightWidth","margin-right"],n=0;n<t.length;n++){var r=T(e.css(t[n]));isNaN(r)||(a+=r)}return a},W=function(){var e=M("#agjCalendar-modal-background");e.is(":visible")&&(window.scrollTo(b,F),M("body").css({marginRight:j,overflow:x}),e.hide())},o=function(e,a,t){return 0<=e&&e<=11?S[t].months[a?"full":"abbreviated"][e]:-1},L=function(e){switch(e=isNaN(e)?e:parseInt(e,10)){case 0:return"Zero";case 1:return"One";case 2:return"Two";case 3:return"Three";case 4:return"Four";case 5:return"Five";case 6:return"Six";case 7:return"Seven";case 8:return"Eight";case 9:return"Nine";case 10:return"Ten"}return-1},H=function(e,a){var t=M("#agjCalendar");switch(e.calendarDisplay){case"inline":switch(e.inputType){case"text":var n=M(e[a?"endDateSelector":"dateSelector"]),r=M(e[a?"endExpanderSelector":"expanderSelector"]);1==t.length&&1==n.length&&((l=0)<r.length&&(l=r.offset().top,l+=m(r)),"hidden"===n.attr("type")?(s=n.parent().offset().top,s+=m(n.parent())):(s=n.offset().top,s+=m(n)),i=Number.MAX_SAFE_INTEGER,0<r.length&&(i=r.offset().left),n=("hidden"===n.attr("type")?n.parent():n).offset().left,t.css({left:Math.min(i,n),top:Math.max(l,s)+1}));break;case"dropdown":var l,i,o,d,n=M(e[a?"endMonthSelector":"monthSelector"]),s=M(e[a?"endDaySelector":"daySelector"]),r=M(e[a?"endExpanderSelector":"expanderSelector"]);1==t.length&&1==n.length&&1==s.length&&((l=0)<r.length&&(l=r.offset().top,l+=m(r)),o=n.offset().top,o+=m(n),d=s.offset().top,d+=m(s),l=1+Math.max(l,o,d),i=Number.MAX_SAFE_INTEGER,0<r.length&&(i=r.offset().left),o=n.offset().left,d=s.offset().left,r=Math.min(i,o,d),t.css({left:r,top:l}))}t.removeClass("agjCalendar-full").css({position:"absolute"});break;case"modal":var g=M(window).width()/2,u=(g-=c(t)/2,M(window).height()/2);u-=m(t)/2,t.removeClass("agjCalendar-full").css({left:g,position:"fixed",top:u}),M("#agjCalendar-modal-background").removeClass("agjCalendar-modal-background-full");break;case"full":t.addClass("agjCalendar-full").css({left:0,position:"fixed",top:0}),M("#agjCalendar-modal-background").addClass("agjCalendar-modal-background-full")}},B=function(e){1!=e.getDate()&&e.setFullYear(e.getFullYear(),e.getMonth(),1),e.setHours(0,0,0,0);var a=M("#agjCalendar");if(0<a.length){for(var t=Y[a.attr("data-active")],n=!0===a.attr("data-active-is-end")||"true"===a.attr("data-active-is-end"),r=I(t),l=-1,i=(t.allowRange&&(l=I(t,!0)),M("#agjCalendar-dropdown")),o=1;o<=t.calendarCount;o++){var d=t.startWeekOnMonday?(e.getDay()+6)%7:e.getDay(),s=-1;switch(o){case 1:s="#agjCalendar-first";break;case 2:s="#agjCalendar-second";break;case 3:s="#agjCalendar-third"}switch(o){case 1:i.val(O(e,"YYYY-MM",t.language));break;case 2:case 3:M(s+"-month-name").text(O(e,"MMMM YYYY",t.language))}var g="",u=0;if(0<d)for(var g=(g+="<div")+' class="agjCalendar-week agjCalendar-week-one"'+">",m=1;m<=d;m++)g=(g+='<div class="agjCalendar-blank')+" agjCalendar-"+N((++u-(t.startWeekOnMonday?0:1))%7,"full","en").toLowerCase()+'"></div>';var c=new Date(t.minimumDate.getFullYear(),t.minimumDate.getMonth(),t.minimumDate.getDate()),D=(t.allowRange&&n&&(-1===r?c.setFullYear(c.getFullYear(),c.getMonth(),c.getDate()+t.minimumRange):c.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()+t.minimumRange)),c.setHours(0,0,0,0),new Date(t.maximumDate.getFullYear(),t.maximumDate.getMonth(),t.maximumDate.getDate()));for(t.allowRange&&(n?-1!==r&&(D.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()+t.maximumRange),D>t.maximumDate)&&D.setFullYear(t.maximumDate.getFullYear(),t.maximumDate.getMonth(),t.maximumDate.getDate()):D.setFullYear(D.getFullYear(),D.getMonth(),D.getDate()-t.minimumRange)),D.setHours(23,59,59,999),m=1;m<=42-d;m++){u%7==0&&(0<g.length&&(g+="</div>"),g=(g+='<div class="agjCalendar-week')+" agjCalendar-week-"+L(Math.round(u/7)+1).toLowerCase()+'">');var h=A(e.getFullYear(),e.getMonth()+1);if(t.startWeekOnMonday&&h++,m<=h){var v=new Date(e.getFullYear(),e.getMonth(),m),f=!1;if(c<=v&&v<=D&&(f=!0,0<t.excludeDates.length))for(var p=0;p<t.excludeDates.length;p++){var C=t.excludeDates[p];if(v.getFullYear()===C.getFullYear()&&v.getMonth()===C.getMonth()&&v.getDate()===C.getDate()){f=!1;break}}h="agjCalendar-"+N((u+(t.startWeekOnMonday?1:0))%7,"full","en").toLowerCase();if(f&&(h+=" agjCalendar-selectable"),v.getFullYear()==(new Date).getFullYear()&&v.getMonth()==(new Date).getMonth()&&v.getDate()==(new Date).getDate()&&(h+=" agjCalendar-today"),-1!==r&&v.getFullYear()==r.getFullYear()&&v.getMonth()==r.getMonth()&&v.getDate()==r.getDate()&&(h+=n?" agjCalendar-other-active":" agjCalendar-active"),-1!==l&&v.getFullYear()==l.getFullYear()&&v.getMonth()==l.getMonth()&&v.getDate()==l.getDate()&&(h+=n?" agjCalendar-active":" agjCalendar-other-active"),-1!==r&&-1!==l&&r!=l&&(r<l&&r<=v&&v<=l||l<r&&v<=r&&l<=v)&&(h+=" agjCalendar-in-range"),g+='<div class="'+h+'">',f){var w="";switch(t.language){case"en":w=O(v,"MMMM D, YYYY",t.language);break;case"fr":w=O(v,"D MMMM YYYY",t.language)}g=(g=(g+="<a")+' href="#"'+(' title="'+w+'"'))+(' id="agjCalendar-'+O(v,"YYYY-MM-DD",t.language)+'"')+">"}g+=m,f&&(g+="</a>"),g+="</div>"}else g=(g+='<div class="agjCalendar-blank')+" agjCalendar-"+N((u+(t.startWeekOnMonday?1:0))%7,"full","en").toLowerCase()+'"></div>';u++}g+="</div>",M(s+" div.agjCalendar-week").remove(),M(s).append(g),7==M(s+" div.agjCalendar-week-five div.agjCalendar-blank").length?M(s).removeClass("agjCalendar-five-weeks agjCalendar-six-weeks").addClass("agjCalendar-four-weeks"):7==M(s+" div.agjCalendar-week-six div.agjCalendar-blank").length?M(s).removeClass("agjCalendar-four-weeks agjCalendar-six-weeks").addClass("agjCalendar-five-weeks"):M(s).removeClass("agjCalendar-four-weeks agjCalendar-five-weeks").addClass("agjCalendar-six-weeks"),e.setFullYear(e.getFullYear(),e.getMonth()+1,1)}M("div.agjCalendar-week a").on("click",function(){var e=new Date(this.id.substring(12,16),parseInt(this.id.substring(17,19),10)-1,this.id.substring(20,22));return q(t,e,n),t.allowRange&&!n&&k(t),M.agjCalendar.deactivate(),!1}),null!==i.val()&&(a=new Date(i.val().substring(0,4),parseInt(i.val().substring(5,7),10),1),0==i.find("option[value="+O(a,"YYYY-MM",t.language)+"]").length?M("a.agjCalendar-next-month").fadeTo(1,.33):M("a.agjCalendar-next-month").fadeTo(1,1),a.setFullYear(a.getFullYear(),a.getMonth()-2,a.getDate()),0==i.find("option[value="+O(a,"YYYY-MM",t.language)+"]").length?M("a.agjCalendar-previous-month").fadeTo(1,.33):M("a.agjCalendar-previous-month").fadeTo(1,1))}},q=function(e,a,t){switch(void 0===t&&(t=!1),e.inputType){case"text":var n=M(e[t?"endDateSelector":"dateSelector"]),r="";if("blank"===a)switch(e.dateFormat){case 1:r="mm/dd/yyyy";break;case 2:r=S[e.language].selectADate;break;case 3:r="dd/mm/yyyy";break;case 4:r="yyyy-mm-dd";break;case 5:r=S[e.language].selectADate}else switch(e.dateFormat){case 1:r=O(a,"MM/DD/YYYY",e.language);break;case 2:r=O(a,"MMM D, YYYY",e.language);break;case 3:r=O(a,"DD/MM/YYYY",e.language);break;case 4:r=O(a,"YYYY-MM-DD",e.language);break;case 5:r=O(a,"D MMMM YYYY",e.language)}0<r.length&&n.val(r).trigger("change");break;case"dropdown":var n="blank"===a?"":O(a,"DD",e.language),l=M(e[t?"endMonthSelector":"monthSelector"]),i="blank"===a?"":O(a,"YYYY-MM",e.language);0<i.length&&0<l.find("option[value="+i+"]").length&&("blank"===a||parseInt(n,10)<=A(a.getFullYear(),a.getMonth()+1))&&(l.val(i).trigger("change"),p(e,t),M(e[t?"endDaySelector":"daySelector"]).val(n).trigger("change"))}},i=function(e,a,t){switch(a){case 1:if(y[1].test(e))return new Date(e.substring(6,10),parseInt(e.substring(0,2),10)-1,e.substring(3,5));break;case 2:if(y[2].test(e))if(-1!==(n=r(e.substring(0,e.indexOf(" ")),t)))return new Date(e.substring(e.length-4,e.length),n,e.substring(e.indexOf(" ")+1,e.indexOf(",")));break;case 3:if(y[3].test(e))return new Date(e.substring(6,10),parseInt(e.substring(3,5),10)-1,e.substring(0,2),10);break;case 4:if(y[4].test(e))return new Date(e.substring(0,4),parseInt(e.substring(5,7),10)-1,e.substring(8,10));break;case 5:var n;if(y[5].test(e))if(-1!==(n=r(e.substring(e.indexOf(" ")+1,e.lastIndexOf(" ")),t)))return new Date(e.substring(e.lastIndexOf(" ")+1),n,e.substring(0,e.indexOf(" ")))}return-1},J=function(e,a){void 0===a&&(a=!1);for(var t=-1,n=(a&&(t=I(e)),new Date(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate())),r=(a&&-1!==t&&n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+e.minimumRange),n.setHours(0,0,0,0),new Date(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate())),l=(a&&-1!==t&&(a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+e.maximumRange))<e.maximumRange&&r.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),r.setHours(23,59,59,999),M("#agjCalendar-dropdown")),i=(l.find("option").remove(),new Date(n.getFullYear(),n.getMonth(),n.getDate()));l.append('<option value="'+O(i,"YYYY-MM",e.language)+'">'+O(i,"MMM YYYY",e.language)+"</option>"),i.setFullYear(i.getFullYear(),i.getMonth()+1,1),i<r;);};M.fn.agjCalendar=function(e){if("object"!=typeof e&&(e={}),"input"==this.prop("tagName").toLowerCase()){for(var a;a="agjCalendar-"+(t=1e5,n=999999,Math.round(Math.random()*(n-t)+t)),0<M("input."+a).length;);this.addClass(a),e.dateSelector="input."+a,M.agjCalendar(e)}var t,n;return this},M.agjCalendar=function(e){e=M.extend({allowBlankDates:!1,allowRange:!1,autoSetEndDate:"dates",calendarCount:1,calendarDisplay:"inline",dateFormat:1,dateSelector:null,dayNameFormat:"short",daySelector:null,defaultDate:new Date,defaultRange:-1,endDateSelector:null,endDaySelector:null,endExpanderSelector:null,endMonthSelector:null,excludeDates:[],expanderSelector:null,inputType:"text",language:"en",maximumDate:new Date((new Date).getFullYear()+1,(new Date).getMonth(),(new Date).getDate()),maximumRange:-1,minimumDate:new Date,minimumRange:-1,monthSelector:null,overwriteDayOptions:!0,overwriteMonthOptions:!0,startWeekOnMonday:!1},e);var g={position:Y.length,language:"en"};switch("fr"===e.language&&(g.language="fr"),!(g.overwriteMonthOptions=!0)===e.overwriteMonthOptions&&(g.overwriteMonthOptions=!1),!(g.overwriteDayOptions=!0)===e.overwriteDayOptions&&(g.overwriteDayOptions=!1),!(g.allowBlankDates=!1)===e.allowBlankDates&&(g.allowBlankDates=!0),!(g.startWeekOnMonday=!1)===e.startWeekOnMonday&&(g.startWeekOnMonday=!0),!(g.allowRange=!1)===e.allowRange&&(g.allowRange=!0),g.inputType="text","dropdown"==e.inputType&&(g.inputType="dropdown"),g.calendarCount=1,e.calendarCount){case 2:case 3:g.calendarCount=e.calendarCount}switch(g.calendarDisplay="inline",e.calendarDisplay){case"modal":case"full":g.calendarDisplay=e.calendarDisplay}switch(g.dayNameFormat="short",e.dayNameFormat){case"medium":case"full":g.dayNameFormat=e.dayNameFormat}switch(g.dateFormat=1,e.dateFormat){case 2:case 3:case 4:case 5:g.dateFormat=e.dateFormat}switch(g.autoSetEndDate="dates",e.autoSetEndDate){case!0:g.autoSetEndDate="always";break;case!1:g.autoSetEndDate="never";break;case"blanks":case"dates":case"always":case"never":g.autoSetEndDate=e.autoSetEndDate}if(g.minimumDate=new Date,g.minimumDate.setHours(0,0,0,0),y[4].test(e.minimumDate)?(d=e.minimumDate.substring(0,4),o=e.minimumDate.substring(5,7),n=e.minimumDate.substring(8,10),g.minimumDate.setFullYear(d,parseInt(o,10)-1,n)):e.minimumDate instanceof Date&&g.minimumDate.setFullYear(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate()),g.maximumDate=new Date((new Date).getFullYear()+1,(new Date).getMonth(),(new Date).getDate()),g.maximumDate.setHours(23,59,59,999),y[4].test(e.maximumDate)?(d=new Date(e.maximumDate.substring(0,4),parseInt(e.maximumDate.substring(5,7),10)-1,e.maximumDate.substring(8,10)),g.minimumDate<=d&&g.maximumDate.setFullYear(d.getFullYear(),d.getMonth(),d.getDate())):e.maximumDate instanceof Date&&e.maximumDate>=g.minimumDate&&g.maximumDate.setFullYear(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()),g.defaultDate=new Date,y[4].test(e.defaultDate)?(o=new Date(e.defaultDate.substring(0,4),parseInt(e.defaultDate.substring(5,7),10)-1,e.defaultDate.substring(8,10)),g.minimumDate<=o&&o<=g.maximumDate&&g.defaultDate.setFullYear(o.getFullYear(),o.getMonth(),o.getDate())):e.defaultDate instanceof Date?g.defaultDate.setFullYear(e.defaultDate.getFullYear(),e.defaultDate.getMonth(),e.defaultDate.getDate()):g.allowBlankDates&&"blank"===e.defaultDate&&(g.defaultDate="blank"),"blank"!=g.defaultDate&&g.defaultDate<g.minimumDate?g.defaultDate.setFullYear(g.minimumDate.getFullYear(),g.minimumDate.getMonth(),g.minimumDate.getDate()):"blank"!=g.defaultDate&&g.maximumDate<g.defaultDate&&g.defaultDate.setFullYear(g.maximumDate.getFullYear(),g.maximumDate.getMonth(),g.maximumDate.getDate()),g.excludeDates=[],e.excludeDates&&e.excludeDates instanceof Array&&0<e.excludeDates.length)for(var a=0;a<e.excludeDates.length;a++){var t=-1;y[4].test(e.excludeDates[a])?t=new Date(e.excludeDates[a].substring(0,4),parseInt(e.excludeDates[a].substring(5,7),10)-1,e.excludeDates[a].substring(8,10)):e.excludeDates[a]instanceof Date&&(t=new Date(e.excludeDates[a].getFullYear(),e.excludeDates[a].getMonth(),e.excludeDates[a].getDate())),-1!==t&&g.minimumDate<=t&&t<=g.maximumDate&&g.excludeDates.push(t)}if(g.minimumRange=0,g.maximumRange=0,g.defaultRange=0,g.allowRange){for(var n,r=0,l=new Date(g.minimumDate.getFullYear(),g.minimumDate.getMonth(),g.minimumDate.getDate());l<=g.maximumDate;)r++,l.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()+1);g.minimumRange=0===r?0:1,!isNaN(e.minimumRange)&&0<=parseInt(e.minimumRange,10)&&parseInt(e.minimumRange,10)<=r&&(g.minimumRange=e.minimumRange),g.maximumRange=0===r?0:r,!isNaN(e.maximumRange)&&0<=parseInt(e.maximumRange,10)&&parseInt(e.maximumRange,10)<=r&&(g.maximumRange=e.maximumRange),g.defaultRange=0===r?0:1,isNaN(e.defaultRange)||(n=parseInt(e.defaultRange,10),g.minimumRange<=n&&n<=g.maximumRange&&(g.defaultRange=n))}function i(e){if(R(g.position,e.data.isEnd))M.agjCalendar.deactivate();else{var a=g,t=e.data.isEnd;switch(!0!==t&&(t=!1),M.agjCalendar.isActive()&&!R(a.position,t)&&W(),a.inputType){case"text":M(a[t?"endDateSelector":"dateSelector"]).addClass("agjCalendar-active-input");break;case"dropdown":M(a[t?"endMonthSelector":"monthSelector"]).addClass("agjCalendar-active-input"),M(a[t?"endDaySelector":"daySelector"]).addClass("agjCalendar-active-input")}var n=M("#agjCalendar");switch((n=0==n.length?E():n).attr({"data-active":a.position,"data-active-is-end":t}),n.find("#agjCalendar-hide").attr("title",S[a.language].hideCalendar).text(S[a.language].hideCalendar),n.find("#agjCalendar-header-inner span").text(S[a.language].poweredBy),n.find("a.agjCalendar-previous-month").attr("title",S[a.language].previousMonth).find("span.agjCalendar-previous-month-inner").text(S[a.language].previousMonth),n.find("a.agjCalendar-next-month").attr("title",S[a.language].nextMonth).find("span.agjCalendar-next-month-inner").text(S[a.language].nextMonth),a.calendarCount){case 1:n.removeClass("agjCalendar-double agjCalendar-triple").addClass("agjCalendar-single");break;case 2:n.removeClass("agjCalendar-single agjCalendar-triple").addClass("agjCalendar-double");break;case 3:n.removeClass("agjCalendar-single agjCalendar-double").addClass("agjCalendar-triple")}a.startWeekOnMonday?n.addClass("agjCalendar-start-week-on-monday"):n.removeClass("agjCalendar-start-week-on-monday");for(var r=a.startWeekOnMonday?[1,2,3,4,5,6,0]:[0,1,2,3,4,5,6],l="",i=0;i<r.length;i++)l=(l=(l=(l+="<div")+' class="agjCalendar-'+N(r[i],"full","en").toLowerCase()+'"')+' title="'+N(r[i],"full",a.language)+'">')+N(r[i],a.dayNameFormat,a.language)+"</div>";switch(n.find("div.agjCalendar-days").empty().append(l),a.calendarDisplay){case"full":case"modal":var o=M("body"),d=(j=T(o.css("marginRight")),isNaN(j)&&(j=0),x=o.css("overflow"),M(window).width());o.css({overflow:"hidden"}).css({marginRight:j+M(window).width()-d}),b=M(window).scrollLeft(),F=M(window).scrollTop(),"full"==a.calendarDisplay&&(window.scrollTo(0,1),window.scrollTo(0,0)),M("#agjCalendar-modal-background").show()}J(a,t);var s,e=I(a,t);-1===e&&(-1!==(s=I(a,!1))?e=new Date(s.getFullYear(),s.getMonth(),s.getDate()+a.minimumRange):(e=new Date(a.minimumDate.getFullYear(),a.minimumDate.getMonth(),a.minimumDate.getDate()),t&&e.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()+a.minimumRange))),B(e),H(a,t),M("body").addClass("agjCalendar-active")}return!1}var o,d=M(e.expanderSelector);switch(0<d.length&&(g.expanderSelector=e.expanderSelector,d.on("click",{isEnd:!1},i),g.allowRange)&&0<(o=M(e.endExpanderSelector)).length&&(g.endExpanderSelector=e.endExpanderSelector,o.on("click",{isEnd:!0},i)),g.inputType){case"text":var s=M(e.dateSelector);if(1!==s.length)return f('Invalid `dateSelector` value: "'+e.dateSelector+'" ('+s.length+" elements found, 1 required)"),!1;g.dateSelector=e.dateSelector;function u(e){return setTimeout(function(){switch(g.calendarDisplay){case"full":case"modal":break;default:w||(M.agjCalendar.deactivate(),e.data.isEnd&&k(g))}},1),!0}var m=s.val();if(s.on("blur",{isEnd:!1},u).on("focus",{isEnd:!1},i),q(g,g.defaultDate),0<m.length&&s.val(m),g.allowRange){s=M(e.endDateSelector);if(1!==s.length)return f('Invalid `endDateSelector` value: "'+e.endDateSelector+'" ('+s.length+" elements found, 1 required)"),!1;g.endDateSelector=e.endDateSelector,m=s.val(),s.on("blur",{isEnd:!0},u).on("focus",{isEnd:!0},i),c="blank"===g.defaultDate?"blank":new Date(g.defaultDate.getFullYear(),g.defaultDate.getMonth(),g.defaultDate.getDate()+g.defaultRange),q(g,c,!0),0<m.length&&s.val(m)}break;case"dropdown":var c=M(e.monthSelector);if(1!==c.length)return f('Invalid `monthSelector` value: "'+e.monthSelector+'" ('+c.length+" elements found, 1 required)"),!1;s=M(e.daySelector);if(1!==s.length)return f('Invalid `daySelector` value: "'+e.daySelector+'" ('+s.length+" elements found, 1 required)"),!1;g.monthSelector=e.monthSelector,g.daySelector=e.daySelector;function D(e){p(g,e.data.isEnd),e.data.isEnd||k(g)}var m=c.val(),h=s.val();if(c.on("change",{isEnd:!1},D),C(g),p(g),null!==m&&0<m.length&&0<c.find("option[value="+m+"]").length&&c.val(m).trigger("change"),null!==h&&0<h.length&&0<s.find("option[value="+h+"]").length&&s.val(h).trigger("change"),g.allowRange){c=M(e.endMonthSelector);if(1!==c.length)return f('Invalid `endMonthSelector` value: "'+e.endMonthSelector+'" ('+c.length+" elements found, 1 required)"),!1;var v=M(e.endDaySelector);if(1!==v.length)return f('Invalid `endDaySelector` value: "'+e.endDaySelector+'" ('+v.length+" elements found, 1 required)"),!1;g.endMonthSelector=e.endMonthSelector,g.endDaySelector=e.endDaySelector;m=c.val(),h=v.val();s.on("change",function(){k(g),C(g,!0),p(g,!0)}),c.on("change",{isEnd:!0},D),C(g,!0),p(g,!0),null!==m&&0<m.length&&0<c.find("option[value="+m+"]").length&&c.val(m).trigger("change"),null!==h&&0<h.length&&0<v.find("option[value="+h+"]").length&&v.val(h).trigger("change")}}return Y.push(g),!0},M.agjCalendar.deactivate=function(){w=!1;var e=M("#agjCalendar");0<e.length&&(M("body").removeClass("agjCalendar-active"),e.attr("data-active",-1),M(".agjCalendar-active-input").removeClass("agjCalendar-active-input")),W()},M.agjCalendar.isActive=function(){return M("body").hasClass("agjCalendar-active")},M.ctcCalendar=function(e){return M.agjCalendar(e)}}(jQuery);