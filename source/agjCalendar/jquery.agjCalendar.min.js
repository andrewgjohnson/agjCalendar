/**
 * Javascript source code of agjCalendar v1.0.0.
 *
 * Copyright (c) 2013-2023 Andrew G. Johnson <andrew@andrewgjohnson.com>
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 * @file The Javascript source code for the agjCalendar jQuery plugin.
 * @copyright 2013-2023 Andrew G. Johnson <andrew@andrewgjohnson.com>
 * @license MIT
 * @see {@link https://github.com/andrewgjohnson/agjCalendar GitHub repository}
 * @see {@link https://agjCalendar.agjjQuery.org/ Online documentation}
 * @author Andrew G. Johnson <andrew@andrewgjohnson.com>
 * @version 1.0.0
 */
!function(w){function r(t,e){for(var n=-1,a=["full","abbreviated"],r=0;r<a.length&&(w.map(F[e].months[a[r]],function(e,a){if(-1===n&&e.toLowerCase()==t.toLowerCase())return n=a,!1}),-1===n);r++);return n}function h(e){e="agjCalendar Error! "+e;var a=window.console;a&&a.error?a.error(e):a&&a.log&&a.log(e)}function v(e,a){if(void 0===a&&(a=!1),e.overwriteDayOptions){var t=w(e[a?"endMonthSelector":"monthSelector"]),n=w(e[a?"endDaySelector":"daySelector"]);if(n.find("option").remove(),b.month.test(t.val())){e.allowBlankDates&&n.append('<option value=""></option>');for(var r,l,i=N(e,a),o=(e.allowRange&&a&&(r=N(e,!1)),new Date(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate())),d=(a&&(-1===r?o.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()+e.minimumRange):o.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()+e.minimumRange)),o.setHours(0,0,0,0),new Date(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()-e.minimumRange)),s=(a&&(-1===r||(d.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()+e.maximumRange),d>e.maximumDate))&&d.setFullYear(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()),d.setHours(23,59,59,999),t.val().substring(5,7)),s=parseInt(s,10)-1,u=new Date(t.val().substring(0,4),s,1);u<d&&u.getMonth()==s;)o<=u&&(l="<option",l+=' value="'+R(u,"DD",e.language)+'"',-1!==i&&u.getDate()==i.getDate()&&(l+=' selected="selected"'),l=(l+=">")+u.getDate()+"</option>",n.append(l)),u.setFullYear(u.getFullYear(),u.getMonth(),u.getDate()+1)}0===n.find("option").length&&n.append('<option value=""></option>')}}function f(e,a){if(void 0===a&&(a=!1),e.overwriteMonthOptions)for(var t,n=w(e[a?"endMonthSelector":"monthSelector"]),r=(n.find("option").remove(),e.allowBlankDates&&n.append('<option value=""></option>'),N(e,a)),l=(e.allowRange&&a&&(t=N(e,!1)),new Date(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate())),i=(a&&(-1===t?l.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()+e.minimumRange):l.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+e.minimumRange)),l.setHours(0,0,0,0),new Date(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()-e.minimumRange)),o=(a&&(-1===t||(i.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+e.maximumRange),i>e.maximumDate))&&i.setFullYear(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()),i.setHours(23,59,59,999),new Date(l.getFullYear(),l.getMonth(),l.getDate()));o<i;){var d="<option";d+=' value="'+R(o,"YYYY-MM",e.language)+'"',-1!==r&&o.getFullYear()==r.getFullYear()&&o.getMonth()==r.getMonth()&&(d+=' selected="selected"'),d=(d+=">")+R(o,"MMMM YYYY",e.language)+"</option>",n.append(d),o.setFullYear(o.getFullYear(),o.getMonth()+1,1)}}var Y=[],p=!1,C="",M="",j=0,x=0,b={1:new RegExp(/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/),2:new RegExp(/^([A-Za-zÀ-ÖØ-öø-ÿ]+) ([0-9]{1,2}), ([0-9]{4})$/),3:new RegExp(/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/),4:new RegExp(/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/),5:new RegExp(/^([0-9]{1,2}) ([A-Za-zÀ-ÖØ-öø-ÿ]+) ([0-9]{4})$/),month:new RegExp(/([0-9]{4})-([0-9]{2})$/)},F={en:{daysOfWeek:{full:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},medium:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},short:{0:"S",1:"M",2:"T",3:"W",4:"T",5:"F",6:"S"}},months:{full:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"}},hideCalendar:"Hide Calendar",nextMonth:"Next Month",previousMonth:"Previous Month",poweredBy:"Powered by",selectADate:"Select a Date"},fr:{daysOfWeek:{full:{0:"dimanche",1:"lundi",2:"mardi",3:"mercredi",4:"jeudi",5:"vendredi",6:"samedi"},medium:{0:"dim",1:"lun",2:"mar",3:"mer",4:"jeu",5:"ven",6:"sam"},short:{0:"d",1:"l",2:"m",3:"m",4:"j",5:"v",6:"s"}},months:{full:{1:"janvier",2:"février",3:"mars",4:"avril",5:"mai",6:"juin",7:"juillet",8:"août",9:"septembre",10:"octobre",11:"novembre",12:"décembre"},abbreviated:{1:"janv",2:"févr",3:"mars",4:"avr",5:"mai",6:"juin",7:"juil",8:"août",9:"sept",10:"octo",11:"nov",12:"déc"}},hideCalendar:"Masquer le calendrier",nextMonth:"Le mois prochain",previousMonth:"Le mois précédent",poweredBy:"Propulsé par",selectADate:"Sélectionnez une date"}},y=function(e){var a,t,n,r,l;e.allowRange&&-1!==(a=N(e))&&(t=!1,n=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e.minimumRange),r<e.minimumDate&&n.setFullYear(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate()),(r=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e.maximumRange))>e.maximumDate&&r.setFullYear(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()),t=-1!==(l=N(e,!0))&&(l<n||r<l)&&("always"==e.autoSetEndDate||"dates"==e.autoSetEndDate)||-1===l&&("always"==e.autoSetEndDate||"blanks"==e.autoSetEndDate)||t)&&((l=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e.defaultRange))<n?l.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()):r<l&&l.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),L(e,l,!0))},S=function(e,a){if(w.agjCalendar.isActive()){var t=w("#agjCalendar");if(t.attr("data-active")==e)return(!0===t.attr("data-active-is-end")||"true"===t.attr("data-active-is-end"))===a}return!1},k=function(){function e(){var e,a;w.agjCalendar.isActive()&&(a=w("#agjCalendar"),e=Y[a.attr("data-active")],a=!0===a.attr("data-active-is-end")||"true"===a.attr("data-active-is-end"),W(e,a))}var a=w("body").append('<div id="agjCalendar-modal-background"></div><div id="agjCalendar" data-active="-1" data-active-is-end="false"><div id="agjCalendar-header"><div id="agjCalendar-header-inner"><a href="#" title="Hide Calendar" id="agjCalendar-hide">Hide Calendar</a><span>Powered by</span> <a href="https://agjcalendar.agjjquery.org/" target="_blank" title="agjCalendar" id="agjCalendar-powered-by">agjCalendar</a></div></div><div id="agjCalendar-body"><div id="agjCalendar-first"><div class="agjCalendar-month"><div class="agjCalendar-month-inner-1"><div class="agjCalendar-month-inner-2"><select id="agjCalendar-dropdown"></select><a href="#" title="Next Month" class="agjCalendar-next-month"><span class="agjCalendar-next-month-inner">Next Month</span></a><a href="#" title="Previous Month" class="agjCalendar-previous-month"><span class="agjCalendar-previous-month-inner">Previous Month</span></a></div></div></div><div class="agjCalendar-days"></div></div><div id="agjCalendar-second"><div class="agjCalendar-month"><div class="agjCalendar-month-inner" colspan="5"><strong id="agjCalendar-second-month-name"></strong><a href="#" title="Next Month" class="agjCalendar-next-month"><span class="agjCalendar-next-month-inner">Next Month</span></a><a href="#" title="Previous Month" class="agjCalendar-previous-month"><span class="agjCalendar-previous-month-inner">Previous Month</span></a></div></div><div class="agjCalendar-days"></div></div><div id="agjCalendar-third"><div class="agjCalendar-month"><div class="agjCalendar-month-inner" colspan="5"><strong id="agjCalendar-third-month-name"></strong><a href="#" title="Next Month" class="agjCalendar-next-month"><span class="agjCalendar-next-month-inner">Next Month</span></a><a href="#" title="Previous Month" class="agjCalendar-previous-month"><span class="agjCalendar-previous-month-inner">Previous Month</span></a></div></div><div class="agjCalendar-days"></div></div></div></div>').find("#agjCalendar");w("#agjCalendar-hide").on("click",function(){return w.agjCalendar.deactivate(),!1}),w("#agjCalendar-dropdown").on("change",function(){var e;b.month.test(w(this).val())&&(e=new Date(w(this).val().substring(0,4),parseInt(w(this).val().substring(5,7),10)-1,1),H(e))}),w("a.agjCalendar-previous-month, a.agjCalendar-next-month").on("click",function(){var e;return b.month.test(w("#agjCalendar-dropdown").val())&&(e=new Date(w("#agjCalendar-dropdown").val().substring(0,4),parseInt(w("#agjCalendar-dropdown").val().substring(5,7),10)-1,1),w(this).hasClass("agjCalendar-previous-month")?e.setFullYear(e.getFullYear(),e.getMonth()-1,e.getDate()):w(this).hasClass("agjCalendar-next-month")&&e.setFullYear(e.getFullYear(),e.getMonth()+1,e.getDate()),e=R(e,"YYYY-MM"),0<w("#agjCalendar-dropdown option[value="+e+"]").length)&&w("#agjCalendar-dropdown").val(e).trigger("change"),!1});return w(window).on("resize",e),w(document).on("resize",e).on("keyup",function(e){return"Escape"!==e.key||!w.agjCalendar.isActive()||(w("*:focus").trigger("blur"),w.agjCalendar.deactivate(),!1)}).on("click",function(e){if(p=!1,w.agjCalendar.isActive()){var a="agjCalendar"==w(e.target).attr("id")||0<w(e.target).parents("#agjCalendar").length,e=w(e.target).is(".agjCalendar-active-input")||0<w(e.target).parents(".agjCalendar-active-input").length;if(a||e)p=!0;else if(!a&&!e){a=-1,e=w("#agjCalendar").attr("data-active");switch(a=0<=e?Y[e].calendarDisplay:a){case"modal":case"full":break;default:w.agjCalendar.deactivate()}}}return!0}),a},R=function(t,n,a){"fr"!==a&&(a="en");for(var e={DD:function(e){return(e.getDate()+1<10?"0":"")+e.getDate()},D:function(e){return e.getDate()},MMMM:function(e){return o(e.getMonth()+1,!0,a)},MMM:function(e){return o(e.getMonth()+1,!1,a)},MM:function(e){return(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)},M:function(e){return e.getMonth()+1},YYYY:function(e){return e.getFullYear()}},r="",l=0;n.length>l;){var i=!1;w.map(e,function(e,a){i||n.substring(l,l+a.length)!=a||(r+=e(t),l+=a.length,i=!0)}),i||(r+=n.substring(l,l+1),l++)}return r},E=function(e,a,t){if(0<=e&&e<=6)switch(a){case"full":case"medium":case"short":return F[t].daysOfWeek[a][e]}return-1},N=function(e,a){var t=-1;if(!(a=!0!==a?!1:a)||e.allowRange)switch(e.inputType){case"text":t=i(w(e[a?"endDateSelector":"dateSelector"]).val(),e.dateFormat,e.language);break;case"dropdown":var n=w(e[a?"endMonthSelector":"monthSelector"]).val();n=(n+="-")+w(e[a?"endDaySelector":"daySelector"]).val(),t=i(n,4,e.language)}if(-1===t)return-1;if(t<e.minimumDate)return e.minimumDate;if(t>e.maximumDate)return e.maximumDate;if(0<e.excludeDates.length)for(var r=0;r<e.excludeDates.length;r++){var l=e.excludeDates[r];if(t.getFullYear()===l.getFullYear()&&t.getMonth()===l.getMonth()&&t.getDate()===l.getDate())return-1}return t},I=function(e){return"px"==e.substring(e.length-2).toLowerCase()&&(e=e.substring(0,e.length-2)),isNaN(e)?0:parseInt(e,10)},O=function(e,a){switch(a=isNaN(a)?a:parseInt(a,10)){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return(e=parseInt(e,10))%4==0&&e%100!=0||e%400==0?29:28}return-1},m=function(e){for(var a=e.height(),t=["margin-top","borderTopWidth","padding-top","padding-bottom","borderBottomWidth","margin-bottom"],n=0;n<t.length;n++){var r=I(e.css(t[n]));isNaN(r)||(a+=r)}return a},c=function(e){for(var a=e.width(),t=["margin-left","borderLeftWidth","padding-left","padding-right","borderRightWidth","margin-right"],n=0;n<t.length;n++){var r=I(e.css(t[n]));isNaN(r)||(a+=r)}return a},T=function(){var e=w("#agjCalendar-modal-background");e.is(":visible")&&(window.scrollTo(j,x),w("body").css({marginRight:C,overflow:M}),e.hide())},o=function(e,a,t){return 1<=e&&e<=12?F[t].months[a?"full":"abbreviated"][e]:-1},A=function(e){switch(e=isNaN(e)?e:parseInt(e,10)){case 0:return"Zero";case 1:return"One";case 2:return"Two";case 3:return"Three";case 4:return"Four";case 5:return"Five";case 6:return"Six";case 7:return"Seven";case 8:return"Eight";case 9:return"Nine";case 10:return"Ten"}return-1},W=function(e,a){var t=w("#agjCalendar");switch(e.calendarDisplay){case"inline":switch(e.inputType){case"text":var n=w(e[a?"endDateSelector":"dateSelector"]),r=w(e[a?"endExpanderSelector":"expanderSelector"]);1==t.length&&1==n.length&&((l=0)<r.length&&(l=r.offset().top,l+=m(r)),"hidden"===n.attr("type")?(s=n.parent().offset().top,s+=m(n.parent())):(s=n.offset().top,s+=m(n)),i=Number.MAX_SAFE_INTEGER,0<r.length&&(i=r.offset().left),n=("hidden"===n.attr("type")?n.parent():n).offset().left,t.css({left:Math.min(i,n),top:Math.max(l,s)+1}));break;case"dropdown":var l,i,o,d,n=w(e[a?"endMonthSelector":"monthSelector"]),s=w(e[a?"endDaySelector":"daySelector"]),r=w(e[a?"endExpanderSelector":"expanderSelector"]);1==t.length&&1==n.length&&1==s.length&&((l=0)<r.length&&(l=r.offset().top,l+=m(r)),o=n.offset().top,o+=m(n),d=s.offset().top,d+=m(s),l=1+Math.max(l,o,d),i=Number.MAX_SAFE_INTEGER,0<r.length&&(i=r.offset().left),o=n.offset().left,d=s.offset().left,r=Math.min(i,o,d),t.css({left:r,top:l}))}t.removeClass("agjCalendar-full").css({position:"absolute"});break;case"modal":var u=w(window).width()/2,g=(u-=c(t)/2,w(window).height()/2);g-=m(t)/2,t.removeClass("agjCalendar-full").css({left:u,position:"fixed",top:g}),w("#agjCalendar-modal-background").removeClass("agjCalendar-modal-background-full");break;case"full":t.addClass("agjCalendar-full").css({left:0,position:"fixed",top:0}),w("#agjCalendar-modal-background").addClass("agjCalendar-modal-background-full")}},H=function(e){1!=e.getDate()&&e.setFullYear(e.getFullYear(),e.getMonth(),1),e.setHours(0,0,0,0);var a=w("#agjCalendar");if(0<a.length){for(var t=Y[a.attr("data-active")],n=!0===a.attr("data-active-is-end")||"true"===a.attr("data-active-is-end"),r=N(t),l=-1,i=(t.allowRange&&(l=N(t,!0)),w("#agjCalendar-dropdown")),o=1;o<=t.calendarCount;o++){var d=t.startWeekOnMonday?(e.getDay()+6)%7:e.getDay(),s=-1;switch(o){case 1:s="#agjCalendar-first";break;case 2:s="#agjCalendar-second";break;case 3:s="#agjCalendar-third"}switch(o){case 1:i.val(R(e,"YYYY-MM",t.language));break;case 2:case 3:w(s+"-month-name").text(R(e,"MMMM YYYY",t.language))}var u="",g=0;if(0<d)for(var u=(u+="<div")+' class="agjCalendar-week agjCalendar-week-one"'+">",m=1;m<=d;m++)u=(u+='<div class="agjCalendar-blank ')+"agjCalendar-"+E(++g%7,"full","en").toLowerCase()+'"></div>';var c=new Date(t.minimumDate.getFullYear(),t.minimumDate.getMonth(),t.minimumDate.getDate()),D=(t.allowRange&&n&&(-1===r?c.setFullYear(c.getFullYear(),c.getMonth(),c.getDate()+t.minimumRange):c.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()+t.minimumRange)),c.setHours(0,0,0,0),new Date(t.maximumDate.getFullYear(),t.maximumDate.getMonth(),t.maximumDate.getDate()));for(t.allowRange&&(n?-1!==r&&(D.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()+t.maximumRange),D>t.maximumDate)&&D.setFullYear(t.maximumDate.getFullYear(),t.maximumDate.getMonth(),t.maximumDate.getDate()):D.setFullYear(D.getFullYear(),D.getMonth(),D.getDate()-t.minimumRange)),D.setHours(23,59,59,999),m=1;m<=42-d;m++){g%7==0&&(0<u.length&&(u+="</div>"),u=(u+='<div class="agjCalendar-week')+" agjCalendar-week-"+A(Math.round(g/7)+1).toLowerCase()+'">');var h=O(e.getFullYear(),e.getMonth()+1);if(t.startWeekOnMonday&&h++,m<=h){var v=new Date(e.getFullYear(),e.getMonth(),m),f=!1;if(c<=v&&v<=D&&(f=!0,0<t.excludeDates.length))for(var p=0;p<t.excludeDates.length;p++){var C=t.excludeDates[p];if(v.getFullYear()===C.getFullYear()&&v.getMonth()===C.getMonth()&&v.getDate()===C.getDate()){f=!1;break}}h="agjCalendar-"+E((g+(t.startWeekOnMonday?1:0))%7,"full","en").toLowerCase();if(f&&(h+=" agjCalendar-selectable"),v.getFullYear()==(new Date).getFullYear()&&v.getMonth()==(new Date).getMonth()&&v.getDate()==(new Date).getDate()&&(h+=" agjCalendar-today"),-1!==r&&v.getFullYear()==r.getFullYear()&&v.getMonth()==r.getMonth()&&v.getDate()==r.getDate()&&(h+=n?" agjCalendar-other-active":" agjCalendar-active"),-1!==l&&v.getFullYear()==l.getFullYear()&&v.getMonth()==l.getMonth()&&v.getDate()==l.getDate()&&(h+=n?" agjCalendar-active":" agjCalendar-other-active"),-1!==r&&-1!==l&&r!=l&&(r<l&&r<=v&&v<=l||l<r&&v<=r&&l<=v)&&(h+=" agjCalendar-in-range"),u+='<div class="'+h+'">',f){var M="";switch(t.language){case"en":M=R(v,"MMMM D, YYYY",t.language);break;case"fr":M=R(v,"DD MMMM YYYY",t.language)}u=(u=(u+="<a")+' href="#"'+(' title="'+M+'"'))+(' id="agjCalendar-'+R(v,"YYYY-MM-DD",t.language)+'"')+">"}u+=m,f&&(u+="</a>"),u+="</div>"}else u=(u+='<div class="agjCalendar-blank')+" agjCalendar-"+E(g%7,"full","en").toLowerCase()+'"></div>';g++}u+="</div>",w(s+" div.agjCalendar-week").remove(),w(s).append(u),7==w(s+" div.agjCalendar-week-five div.agjCalendar-blank").length?w(s).removeClass("agjCalendar-five-weeks agjCalendar-six-weeks").addClass("agjCalendar-four-weeks"):7==w(s+" div.agjCalendar-week-six div.agjCalendar-blank").length?w(s).removeClass("agjCalendar-four-weeks agjCalendar-six-weeks").addClass("agjCalendar-five-weeks"):w(s).removeClass("agjCalendar-four-weeks agjCalendar-five-weeks").addClass("agjCalendar-six-weeks"),e.setFullYear(e.getFullYear(),e.getMonth()+1,1)}w("div.agjCalendar-week a").on("click",function(){var e=new Date(this.id.substring(12,16),parseInt(this.id.substring(17,19),10)-1,this.id.substring(20,22));return L(t,e,n),t.allowRange&&!n&&y(t),w.agjCalendar.deactivate(),!1}),null!==i.val()&&(a=new Date(i.val().substring(0,4),parseInt(i.val().substring(5,7),10),1),0==i.find("option[value="+R(a,"YYYY-MM",t.language)+"]").length?w("a.agjCalendar-next-month").fadeTo(1,.33):w("a.agjCalendar-next-month").fadeTo(1,1),a.setFullYear(a.getFullYear(),a.getMonth()-2,a.getDate()),0==i.find("option[value="+R(a,"YYYY-MM",t.language)+"]").length?w("a.agjCalendar-previous-month").fadeTo(1,.33):w("a.agjCalendar-previous-month").fadeTo(1,1))}},L=function(e,a,t){switch(void 0===t&&(t=!1),e.inputType){case"text":var n=w(e[t?"endDateSelector":"dateSelector"]),r="";if("blank"===a)switch(e.dateFormat){case 1:r="mm/dd/yyyy";break;case 2:r=F[e.language].selectADate;break;case 3:r="dd/mm/yyyy";break;case 4:r="yyyy-mm-dd";break;case 5:r=F[e.language].selectADate}else switch(e.dateFormat){case 1:r=R(a,"MM/DD/YYYY",e.language);break;case 2:r=R(a,"MMM D, YYYY",e.language);break;case 3:r=R(a,"DD/MM/YYYY",e.language);break;case 4:r=R(a,"YYYY-MM-DD",e.language);break;case 5:r=R(a,"D MMMM YYYY",e.language)}0<r.length&&n.val(r).trigger("change");break;case"dropdown":var n="blank"===a?"":R(a,"DD",e.language),l=w(e[t?"endMonthSelector":"monthSelector"]),i="blank"===a?"":R(a,"YYYY-MM",e.language);0<i.length&&0<l.find("option[value="+i+"]").length&&("blank"===a||parseInt(n,10)<=O(a.getFullYear(),a.getMonth()+1))&&(l.val(i).trigger("change"),v(e,t),w(e[t?"endDaySelector":"daySelector"]).val(n).trigger("change"))}},i=function(e,a,t){switch(a){case 1:if(b[1].test(e))return new Date(e.substring(6,10),parseInt(e.substring(0,2),10)-1,e.substring(3,5));break;case 2:if(b[2].test(e))if(-1!==(n=r(e.substring(0,e.indexOf(" ")),t)))return new Date(e.substring(e.length-4,e.length),n-1,e.substring(e.indexOf(" ")+1,e.indexOf(",")));break;case 3:if(b[3].test(e))return new Date(e.substring(6,10),parseInt(e.substring(3,5),10)-1,e.substring(0,2),10);break;case 4:if(b[4].test(e))return new Date(e.substring(0,4),parseInt(e.substring(5,7),10)-1,e.substring(8,10));break;case 5:var n;if(b[5].test(e))if(-1!==(n=r(e.substring(e.indexOf(" ")+1,e.lastIndexOf(" ")),t)))return new Date(e.substring(e.lastIndexOf(" ")+1),n-1,e.substring(0,e.indexOf(" ")))}return-1},B=function(e,a){void 0===a&&(a=!1);for(var t=-1,n=(a&&(t=N(e)),new Date(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate())),r=(a&&-1!==t&&n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+e.minimumRange),n.setHours(0,0,0,0),new Date(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate())),l=(a&&-1!==t&&(a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+e.maximumRange))<e.maximumRange&&r.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),r.setHours(23,59,59,999),w("#agjCalendar-dropdown")),i=(l.find("option").remove(),new Date(n.getFullYear(),n.getMonth(),n.getDate()));l.append('<option value="'+R(i,"YYYY-MM",e.language)+'">'+R(i,"MMM YYYY",e.language)+"</option>"),i.setFullYear(i.getFullYear(),i.getMonth()+1,1),i<r;);};w.fn.agjCalendar=function(e){if("object"!=typeof e&&(e={}),"input"==this.prop("tagName").toLowerCase()){for(var a;a="agjCalendar-"+(t=1e5,n=999999,Math.round(Math.random()*(n-t)+t)),0<w("input."+a).length;);this.addClass(a),e.dateSelector="input."+a,w.agjCalendar(e)}var t,n;return this},w.agjCalendar=function(e){e=w.extend({allowBlankDates:!1,allowRange:!1,autoSetEndDate:"dates",calendarCount:1,calendarDisplay:"inline",dateFormat:1,dateSelector:null,dayNameFormat:"short",daySelector:null,defaultDate:new Date,defaultRange:-1,endDateSelector:null,endDaySelector:null,endExpanderSelector:null,endMonthSelector:null,excludeDates:[],expanderSelector:null,inputType:"text",language:"en",maximumDate:new Date((new Date).getFullYear()+1,(new Date).getMonth(),(new Date).getDate()),maximumRange:-1,minimumDate:new Date,minimumRange:-1,monthSelector:null,overwriteDayOptions:!0,overwriteMonthOptions:!0,startWeekOnMonday:!1},e);var u={position:Y.length,language:"en"};switch("fr"===e.language&&(u.language="fr"),!(u.overwriteMonthOptions=!0)===e.overwriteMonthOptions&&(u.overwriteMonthOptions=!1),!(u.overwriteDayOptions=!0)===e.overwriteDayOptions&&(u.overwriteDayOptions=!1),!(u.allowBlankDates=!1)===e.allowBlankDates&&(u.allowBlankDates=!0),!(u.startWeekOnMonday=!1)===e.startWeekOnMonday&&(u.startWeekOnMonday=!0),!(u.allowRange=!1)===e.allowRange&&(u.allowRange=!0),u.inputType="text","dropdown"==e.inputType&&(u.inputType="dropdown"),u.calendarCount=1,e.calendarCount){case 2:case 3:u.calendarCount=e.calendarCount}switch(u.calendarDisplay="inline",e.calendarDisplay){case"modal":case"full":u.calendarDisplay=e.calendarDisplay}switch(u.dayNameFormat="short",e.dayNameFormat){case"medium":case"full":u.dayNameFormat=e.dayNameFormat}switch(u.dateFormat=1,e.dateFormat){case 2:case 3:case 4:case 5:u.dateFormat=e.dateFormat}switch(u.autoSetEndDate="dates",e.autoSetEndDate){case!0:u.autoSetEndDate="always";break;case!1:u.autoSetEndDate="never";break;case"blanks":case"dates":case"always":case"never":u.autoSetEndDate=e.autoSetEndDate}if(u.minimumDate=new Date,u.minimumDate.setHours(0,0,0,0),b[4].test(e.minimumDate)?(d=e.minimumDate.substring(0,4),o=e.minimumDate.substring(5,7),n=e.minimumDate.substring(8,10),u.minimumDate.setFullYear(d,parseInt(o,10)-1,n)):e.minimumDate instanceof Date&&u.minimumDate.setFullYear(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate()),u.maximumDate=new Date((new Date).getFullYear()+1,(new Date).getMonth(),(new Date).getDate()),u.maximumDate.setHours(23,59,59,999),b[4].test(e.maximumDate)?(d=new Date(e.maximumDate.substring(0,4),parseInt(e.maximumDate.substring(5,7),10)-1,e.maximumDate.substring(8,10)),u.minimumDate<=d&&u.maximumDate.setFullYear(d.getFullYear(),d.getMonth(),d.getDate())):e.maximumDate instanceof Date&&e.maximumDate>=u.minimumDate&&u.maximumDate.setFullYear(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()),u.defaultDate=new Date,b[4].test(e.defaultDate)?(o=new Date(e.defaultDate.substring(0,4),parseInt(e.defaultDate.substring(5,7),10)-1,e.defaultDate.substring(8,10)),u.minimumDate<=o&&o<=u.maximumDate&&u.defaultDate.setFullYear(o.getFullYear(),o.getMonth(),o.getDate())):e.defaultDate instanceof Date?u.defaultDate.setFullYear(e.defaultDate.getFullYear(),e.defaultDate.getMonth(),e.defaultDate.getDate()):u.allowBlankDates&&"blank"===e.defaultDate&&(u.defaultDate="blank"),"blank"!=u.defaultDate&&u.defaultDate<u.minimumDate?u.defaultDate.setFullYear(u.minimumDate.getFullYear(),u.minimumDate.getMonth(),u.minimumDate.getDate()):"blank"!=u.defaultDate&&u.maximumDate<u.defaultDate&&u.defaultDate.setFullYear(u.maximumDate.getFullYear(),u.maximumDate.getMonth(),u.maximumDate.getDate()),u.excludeDates=[],e.excludeDates&&e.excludeDates instanceof Array&&0<e.excludeDates.length)for(var a=0;a<e.excludeDates.length;a++){var t=-1;b[4].test(e.excludeDates[a])?t=new Date(e.excludeDates[a].substring(0,4),parseInt(e.excludeDates[a].substring(5,7),10)-1,e.excludeDates[a].substring(8,10)):e.excludeDates[a]instanceof Date&&(t=new Date(e.excludeDates[a].getFullYear(),e.excludeDates[a].getMonth(),e.excludeDates[a].getDate())),-1!==t&&u.minimumDate<=t&&t<=u.maximumDate&&u.excludeDates.push(t)}if(u.minimumRange=0,u.maximumRange=0,u.defaultRange=0,u.allowRange){for(var n,r=0,l=new Date(u.minimumDate.getFullYear(),u.minimumDate.getMonth(),u.minimumDate.getDate());l<=u.maximumDate;)r++,l.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()+1);u.minimumRange=0===r?0:1,!isNaN(e.minimumRange)&&0<=parseInt(e.minimumRange,10)&&parseInt(e.minimumRange,10)<=r&&(u.minimumRange=e.minimumRange),u.maximumRange=0===r?0:r,!isNaN(e.maximumRange)&&0<=parseInt(e.maximumRange,10)&&parseInt(e.maximumRange,10)<=r&&(u.maximumRange=e.maximumRange),u.defaultRange=0===r?0:1,isNaN(e.defaultRange)||(n=parseInt(e.defaultRange,10),u.minimumRange<=n&&n<=u.maximumRange&&(u.defaultRange=n))}function i(e){if(S(u.position,e.data.isEnd))w.agjCalendar.deactivate();else{var a=u,t=e.data.isEnd;switch(!0!==t&&(t=!1),w.agjCalendar.isActive()&&!S(a.position,t)&&T(),a.inputType){case"text":w(a[t?"endDateSelector":"dateSelector"]).addClass("agjCalendar-active-input");break;case"dropdown":w(a[t?"endMonthSelector":"monthSelector"]).addClass("agjCalendar-active-input"),w(a[t?"endDaySelector":"daySelector"]).addClass("agjCalendar-active-input")}var n=w("#agjCalendar");switch((n=0==n.length?k():n).attr({"data-active":a.position,"data-active-is-end":t}),n.find("#agjCalendar-hide").attr("title",F[a.language].hideCalendar).text(F[a.language].hideCalendar),n.find("#agjCalendar-header-inner span").text(F[a.language].poweredBy),n.find("a.agjCalendar-previous-month").attr("title",F[a.language].previousMonth).find("span.agjCalendar-previous-month-inner").text(F[a.language].previousMonth),n.find("a.agjCalendar-next-month").attr("title",F[a.language].nextMonth).find("span.agjCalendar-next-month-inner").text(F[a.language].nextMonth),a.calendarCount){case 1:n.removeClass("agjCalendar-double agjCalendar-triple").addClass("agjCalendar-single");break;case 2:n.removeClass("agjCalendar-single agjCalendar-triple").addClass("agjCalendar-double");break;case 3:n.removeClass("agjCalendar-single agjCalendar-double").addClass("agjCalendar-triple")}a.startWeekOnMonday?n.addClass("agjCalendar-start-week-on-monday"):n.removeClass("agjCalendar-start-week-on-monday");for(var r=a.startWeekOnMonday?[1,2,3,4,5,6,0]:[0,1,2,3,4,5,6],l="",i=0;i<r.length;i++)l=(l=(l=(l+="<div")+' class="agjCalendar-'+E(r[i],"full","en").toLowerCase()+'"')+' title="'+E(r[i],"full",a.language)+'">')+E(r[i],a.dayNameFormat,a.language)+"</div>";switch(n.find("div.agjCalendar-days").empty().append(l),a.calendarDisplay){case"full":case"modal":var o=w("body"),d=(C=I(o.css("marginRight")),isNaN(C)&&(C=0),M=o.css("overflow"),w(window).width());o.css({overflow:"hidden"}).css({marginRight:C+w(window).width()-d}),j=w(window).scrollLeft(),x=w(window).scrollTop(),"full"==a.calendarDisplay&&(window.scrollTo(0,1),window.scrollTo(0,0)),w("#agjCalendar-modal-background").show()}B(a,t);var s,e=N(a,t);-1===e&&(-1!==(s=N(a,!1))?e=new Date(s.getFullYear(),s.getMonth(),s.getDate()+a.minimumRange):(e=new Date(a.minimumDate.getFullYear(),a.minimumDate.getMonth(),a.minimumDate.getDate()),t&&e.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()+a.minimumRange))),H(e),W(a,t),w("body").addClass("agjCalendar-active")}return!1}var o,d=w(e.expanderSelector);switch(0<d.length&&(u.expanderSelector=e.expanderSelector,d.on("click",{isEnd:!1},i),u.allowRange)&&0<(o=w(e.endExpanderSelector)).length&&(u.endExpanderSelector=e.endExpanderSelector,o.on("click",{isEnd:!0},i)),u.inputType){case"text":var s=w(e.dateSelector);if(1!==s.length)return h('Invalid `dateSelector` value: "'+e.dateSelector+'" ('+s.length+" elements found, 1 required)"),!1;function g(e){return setTimeout(function(){switch(u.calendarDisplay){case"full":case"modal":break;default:p||(w.agjCalendar.deactivate(),e.data.isEnd&&y(u))}},1),!0}if(u.dateSelector=e.dateSelector,s.on("blur",{isEnd:!1},g).on("focus",{isEnd:!1},i),L(u,u.defaultDate),u.allowRange){var s=w(e.endDateSelector);if(1!==s.length)return h('Invalid `endDateSelector` value: "'+e.endDateSelector+'" ('+s.length+" elements found, 1 required)"),!1;u.endDateSelector=e.endDateSelector,s.on("blur",{isEnd:!0},g).on("focus",{isEnd:!0},i),s="blank"===u.defaultDate?"blank":new Date(u.defaultDate.getFullYear(),u.defaultDate.getMonth(),u.defaultDate.getDate()+u.defaultRange),L(u,s,!0)}break;case"dropdown":s=w(e.monthSelector);if(1!==s.length)return h('Invalid `monthSelector` value: "'+e.monthSelector+'" ('+s.length+" elements found, 1 required)"),!1;var m=w(e.daySelector);if(1!==m.length)return h('Invalid `daySelector` value: "'+e.daySelector+'" ('+m.length+" elements found, 1 required)"),!1;function c(e){v(u,e.data.isEnd),e.data.isEnd||y(u)}if(u.monthSelector=e.monthSelector,u.daySelector=e.daySelector,s.on("change",{isEnd:!1},c),f(u),v(u),u.allowRange){s=w(e.endMonthSelector);if(1!==s.length)return h('Invalid `endMonthSelector` value: "'+e.endMonthSelector+'" ('+s.length+" elements found, 1 required)"),!1;var D=w(e.endDaySelector);if(1!==D.length)return h('Invalid `endDaySelector` value: "'+e.endDaySelector+'" ('+D.length+" elements found, 1 required)"),!1;u.endMonthSelector=e.endMonthSelector,u.endDaySelector=e.endDaySelector,m.on("change",function(){y(u),f(u,!0),v(u,!0)}),s.on("change",{isEnd:!0},c),f(u,!0),v(u,!0)}}return Y.push(u),!0},w.agjCalendar.deactivate=function(){p=!1;var e=w("#agjCalendar");0<e.length&&(w("body").removeClass("agjCalendar-active"),e.attr("data-active",-1),w(".agjCalendar-active-input").removeClass("agjCalendar-active-input")),T()},w.agjCalendar.isActive=function(){return w("body").hasClass("agjCalendar-active")},w.ctcCalendar=function(e){return w.agjCalendar(e)}}(jQuery);