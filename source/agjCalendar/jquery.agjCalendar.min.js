/**
 * Javascript source code of agjCalendar v1.0.3.
 *
 * Copyright (c) 2013-2023 Andrew G. Johnson <andrew@andrewgjohnson.com>
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 * @file The Javascript source code for the agjCalendar jQuery plugin.
 * @copyright 2013-2023 Andrew G. Johnson <andrew@andrewgjohnson.com>
 * @license MIT
 * @see {@link https://github.com/andrewgjohnson/agjCalendar GitHub Repository}
 * @see {@link https://agjCalendar.agjjQuery.org/ Online Documentation}
 * @author Andrew G. Johnson <andrew@andrewgjohnson.com>
 * @version 1.0.3
 */
!function(M){function l(t,e){for(var n=-1,a=["full","abbreviated"],l=0;l<a.length;l++)if(M.map(F[e].months[a[l]],function(e,a){if(-1===n&&e.toLowerCase()===t.toLowerCase())return n=a,!1}),-1!==n)return n;return n}function h(e){e="agjCalendar Error! "+e;var a=window.console;a&&a.error?a.error(e):a&&a.log&&a.log(e)}function f(e,a){if(void 0===a&&(a=!1),e.overwriteDayOptions){var t=M(e[a?"endMonthSelector":"monthSelector"]),n=M(e[a?"endDaySelector":"daySelector"]);if(n.find("option").remove(),b.month.test(t.val())){e.allowBlankDates&&n.append('<option value=""></option>');for(var l,r,i=I(e,a),d=(e.allowRange&&a&&(l=I(e,!1)),new Date(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate())),o=(a&&(-1===l?d.setFullYear(d.getFullYear(),d.getMonth(),d.getDate()+e.minimumRange):d.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()+e.minimumRange)),d.setHours(0,0,0,0),new Date(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()-e.minimumRange)),s=(a&&(-1===l||(o.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()+e.maximumRange),o>e.maximumDate))&&o.setFullYear(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()),o.setHours(23,59,59,999),t.val().substring(5,7)),s=parseInt(s,10)-1,g=new Date(t.val().substring(0,4),s,1);g<o&&g.getMonth()===s;)d<=g&&(r="<option",r+=' value="'+R(g,"DD",e.language)+'"',-1!==i&&g.getDate()===i.getDate()&&(r+=' selected="selected"'),r=(r+=">")+g.getDate()+"</option>",n.append(r)),g.setFullYear(g.getFullYear(),g.getMonth(),g.getDate()+1)}0===n.find("option").length&&n.append('<option value=""></option>')}}function v(e,a){if(void 0===a&&(a=!1),e.overwriteMonthOptions)for(var t,n=M(e[a?"endMonthSelector":"monthSelector"]),l=(n.find("option").remove(),e.allowBlankDates&&n.append('<option value=""></option>'),I(e,a)),r=(e.allowRange&&a&&(t=I(e,!1)),new Date(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate())),i=(a&&(-1===t?r.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()+e.minimumRange):r.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+e.minimumRange)),r.setHours(0,0,0,0),new Date(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()-e.minimumRange)),d=(a&&(-1===t||(i.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+e.maximumRange),i>e.maximumDate))&&i.setFullYear(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()),i.setHours(23,59,59,999),new Date(r.getFullYear(),r.getMonth(),r.getDate()));d<i;){var o="<option";o+=' value="'+R(d,"YYYY-MM",e.language)+'"',-1!==l&&d.getFullYear()===l.getFullYear()&&d.getMonth()===l.getMonth()&&(o+=' selected="selected"'),o=(o+=">")+R(d,"MMMM YYYY",e.language)+"</option>",n.append(o),d.setFullYear(d.getFullYear(),d.getMonth()+1,1)}}var Y=[],p=!1,C="",w="",j=0,x=0,b={1:new RegExp(/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/),2:new RegExp(/^([A-Za-zÀ-ÖØ-öø-ÿ]+) ([0-9]{1,2}), ([0-9]{4})$/),3:new RegExp(/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/),4:new RegExp(/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/),5:new RegExp(/^([0-9]{1,2}) ([A-Za-zÀ-ÖØ-öø-ÿ]+) ([0-9]{4})$/),month:new RegExp(/([0-9]{4})-([0-9]{2})$/)},F={en:{daysOfWeek:{full:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},medium:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},short:{0:"S",1:"M",2:"T",3:"W",4:"T",5:"F",6:"S"}},months:{full:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},abbreviated:{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"}},hideCalendar:"Hide Calendar",nextMonth:"Next Month",previousMonth:"Previous Month",poweredBy:"Powered by",selectADate:"Select a Date"},fr:{daysOfWeek:{full:{0:"dimanche",1:"lundi",2:"mardi",3:"mercredi",4:"jeudi",5:"vendredi",6:"samedi"},medium:{0:"dim",1:"lun",2:"mar",3:"mer",4:"jeu",5:"ven",6:"sam"},short:{0:"d",1:"l",2:"m",3:"m",4:"j",5:"v",6:"s"}},months:{full:{0:"janvier",1:"février",2:"mars",3:"avril",4:"mai",5:"juin",6:"juillet",7:"août",8:"septembre",9:"octobre",10:"novembre",11:"décembre"},abbreviated:{0:"janv",1:"févr",2:"mars",3:"avr",4:"mai",5:"juin",6:"juil",7:"août",8:"sept",9:"octo",10:"nov",11:"déc"}},hideCalendar:"Masquer le calendrier",nextMonth:"Le mois prochain",previousMonth:"Le mois précédent",poweredBy:"Propulsé par",selectADate:"Sélectionnez une date"}},y=function(e){var a,t,n,l,r;e.allowRange&&-1!==(a=I(e))&&(t=!1,n=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e.minimumRange),l<e.minimumDate&&n.setFullYear(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate()),(l=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e.maximumRange))>e.maximumDate&&l.setFullYear(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()),t=-1!==(r=I(e,!0))&&(r<n||l<r)&&("always"===e.autoSetEndDate||"dates"===e.autoSetEndDate)||-1===r&&("always"===e.autoSetEndDate||"blanks"===e.autoSetEndDate)||t)&&((r=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e.defaultRange))<n?r.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()):l<r&&r.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()),B(e,r,!0))},S=function(e,a){if(M.agjCalendar.isActive()){var t=M("#agjCalendar");if(parseInt(t.attr("data-active"),10)===e)return(!0===t.attr("data-active-is-end")||"true"===t.attr("data-active-is-end"))===a}return!1},k=function(){function e(){var e,a;M.agjCalendar.isActive()&&(a=M("#agjCalendar"),e=Y[a.attr("data-active")],a=!0===a.attr("data-active-is-end")||"true"===a.attr("data-active-is-end"),W(e,a))}var a=M("body").append('<div id="agjCalendar-modal-background"></div><div id="agjCalendar"><div id="agjCalendar-header"><div id="agjCalendar-header-inner"><a href="#" id="agjCalendar-hide"></a><span></span> <a href="https://agjcalendar.agjjquery.org/" target="_blank" title="agjCalendar" id="agjCalendar-powered-by">agjCalendar</a></div></div><div id="agjCalendar-body"><div id="agjCalendar-first"><div class="agjCalendar-month"><div class="agjCalendar-month-inner-1"><div class="agjCalendar-month-inner-2"><select id="agjCalendar-dropdown"></select><a href="#" class="agjCalendar-next-month"><span class="agjCalendar-next-month-inner"></span></a><a href="#" class="agjCalendar-previous-month"><span class="agjCalendar-previous-month-inner"></span></a></div></div></div><div class="agjCalendar-days"></div></div><div id="agjCalendar-second"><div class="agjCalendar-month"><div class="agjCalendar-month-inner" colspan="5"><strong id="agjCalendar-second-month-name"></strong><a href="#" class="agjCalendar-next-month"><span class="agjCalendar-next-month-inner"></span></a><a href="#" class="agjCalendar-previous-month"><span class="agjCalendar-previous-month-inner"></span></a></div></div><div class="agjCalendar-days"></div></div><div id="agjCalendar-third"><div class="agjCalendar-month"><div class="agjCalendar-month-inner" colspan="5"><strong id="agjCalendar-third-month-name"></strong><a href="#" class="agjCalendar-next-month"><span class="agjCalendar-next-month-inner"></span></a><a href="#" class="agjCalendar-previous-month"><span class="agjCalendar-previous-month-inner"></span></a></div></div><div class="agjCalendar-days"></div></div></div></div>').find("#agjCalendar");a.find("#agjCalendar-hide").on("click",function(){return M.agjCalendar.deactivate(),!1}),a.find("#agjCalendar-dropdown").on("change",function(){var e;b.month.test(M(this).val())&&(e=new Date(M(this).val().substring(0,4),parseInt(M(this).val().substring(5,7),10)-1,1),L(e))}),a.find("a.agjCalendar-previous-month, a.agjCalendar-next-month").on("click",function(){var e;return b.month.test(M("#agjCalendar-dropdown").val())&&(e=new Date(M("#agjCalendar-dropdown").val().substring(0,4),parseInt(M("#agjCalendar-dropdown").val().substring(5,7),10)-1,1),M(this).hasClass("agjCalendar-previous-month")?e.setFullYear(e.getFullYear(),e.getMonth()-1,e.getDate()):M(this).hasClass("agjCalendar-next-month")&&e.setFullYear(e.getFullYear(),e.getMonth()+1,e.getDate()),e=R(e,"YYYY-MM"),0<a.find("#agjCalendar-dropdown option[value="+e+"]").length)&&a.find("#agjCalendar-dropdown").val(e).trigger("change"),!1});return M(window).on("resize",e),M(document).on("resize",e).on("keyup",function(e){return"Escape"!==e.key||!M.agjCalendar.isActive()||(M("*:focus").trigger("blur"),M.agjCalendar.deactivate(),!1)}).on("click",function(e){if(p=!1,M.agjCalendar.isActive()){var a="agjCalendar"===M(e.target).attr("id")||0<M(e.target).parents("#agjCalendar").length,e=M(e.target).is(".agjCalendar-active-input")||0<M(e.target).parents(".agjCalendar-active-input").length;if(a||e)p=!0;else if(!a&&!e){a=-1,e=M("#agjCalendar").attr("data-active");switch(a=0<=e?Y[e].calendarDisplay:a){case"modal":case"full":break;default:M.agjCalendar.deactivate()}}}return!0}),a},R=function(t,n,a){a="fr"===a?a:"en";for(var e={DD:function(e){return(e.getDate()<10?"0":"")+e.getDate()},D:function(e){return e.getDate()},MMMM:function(e){return d(e.getMonth(),!0,a)},MMM:function(e){return d(e.getMonth(),!1,a)},MM:function(e){return(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)},M:function(e){return e.getMonth()+1},YYYY:function(e){return e.getFullYear()}},l="",r=0;n.length>r;){var i=!1;M.map(e,function(e,a){i||n.substring(r,r+a.length)!==a||(l+=e(t),r+=a.length,i=!0)}),i||(l+=n.substring(r,r+1),r++)}return l},E=function(e,a,t){if(0<=e&&e<=6)switch(a){case"full":case"medium":case"short":return F[t].daysOfWeek[a][e]}return-1},I=function(e,a){var t=-1;if(!(a=!0!==a?!1:a)||e.allowRange)switch(e.inputType){case"text":t=i(M(e[a?"endDateSelector":"dateSelector"]).val(),e.dateFormat,e.language);break;case"dropdown":var n=M(e[a?"endMonthSelector":"monthSelector"]).val();n=(n+="-")+M(e[a?"endDaySelector":"daySelector"]).val(),t=i(n,4,e.language)}if(-1===t)return-1;if(t<e.minimumDate)return e.minimumDate;if(t>e.maximumDate)return e.maximumDate;if(0<e.excludeDates.length)for(var l=0;l<e.excludeDates.length;l++){var r=e.excludeDates[l];if(t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()&&t.getDate()===r.getDate())return-1}return t},O=function(e){return"px"===e.substring(e.length-2).toLowerCase()&&(e=e.substring(0,e.length-2)),isNaN(e)?0:parseInt(e,10)},N=function(e,a){switch(e=isNaN(e)?e:parseInt(e,10)){case 0:case 2:case 4:case 6:case 7:case 9:case 11:return 31;case 3:case 5:case 8:case 10:return 30;case 1:return(a=parseInt(a,10))%4==0&&a%100!=0||a%400==0?29:28}return-1},m=function(e){for(var a=e.height(),t=["margin-top","borderTopWidth","padding-top","padding-bottom","borderBottomWidth","margin-bottom"],n=0;n<t.length;n++){var l=O(e.css(t[n]));isNaN(l)||(a+=l)}return a},c=function(e){for(var a=e.width(),t=["margin-left","borderLeftWidth","padding-left","padding-right","borderRightWidth","margin-right"],n=0;n<t.length;n++){var l=O(e.css(t[n]));isNaN(l)||(a+=l)}return a},T=function(){var e=M("#agjCalendar-modal-background");e.is(":visible")&&(window.scrollTo(j,x),M("body").css({marginRight:C,overflow:w}),e.hide())},d=function(e,a,t){return 0<=e&&e<=11?F[t].months[a?"full":"abbreviated"][e]:-1},A=function(e){switch(e=isNaN(e)?e:parseInt(e,10)){case 0:return"Zero";case 1:return"One";case 2:return"Two";case 3:return"Three";case 4:return"Four";case 5:return"Five";case 6:return"Six";case 7:return"Seven";case 8:return"Eight";case 9:return"Nine";case 10:return"Ten"}return-1},W=function(e,a){var t=M("#agjCalendar");switch(e.calendarDisplay){case"inline":switch(e.inputType){case"text":var n=M(e[a?"endDateSelector":"dateSelector"]),l=M(e[a?"endExpanderSelector":"expanderSelector"]);1===t.length&&1===n.length&&((r=0)<l.length&&(r=l.offset().top,r+=m(l)),"hidden"===n.attr("type")?(s=n.parent().offset().top,s+=m(n.parent())):(s=n.offset().top,s+=m(n)),i=Number.MAX_SAFE_INTEGER,0<l.length&&(i=l.offset().left),n=("hidden"===n.attr("type")?n.parent():n).offset().left,t.css({left:Math.min(i,n),top:Math.max(r,s)+1}));break;case"dropdown":var r,i,d,o,n=M(e[a?"endMonthSelector":"monthSelector"]),s=M(e[a?"endDaySelector":"daySelector"]),l=M(e[a?"endExpanderSelector":"expanderSelector"]);1===t.length&&1===n.length&&1===s.length&&((r=0)<l.length&&(r=l.offset().top,r+=m(l)),d=n.offset().top,d+=m(n),o=s.offset().top,o+=m(s),r=1+Math.max(r,d,o),i=Number.MAX_SAFE_INTEGER,0<l.length&&(i=l.offset().left),d=n.offset().left,o=s.offset().left,l=Math.min(i,d,o),t.css({left:l,top:r}))}t.removeClass("agjCalendar-full").css({position:"absolute"});break;case"modal":t.removeClass("agjCalendar-full");var g=M(window).width()/2,u=(g-=c(t)/2,M(window).height()/2);u-=m(t)/2,t.css({left:g,position:"fixed",top:u}),M("#agjCalendar-modal-background").removeClass("agjCalendar-modal-background-full");break;case"full":t.addClass("agjCalendar-full").css({left:0,position:"fixed",top:0}),M("#agjCalendar-modal-background").addClass("agjCalendar-modal-background-full")}},L=function(e){1!==e.getDate()&&e.setFullYear(e.getFullYear(),e.getMonth(),1),e.setHours(0,0,0,0);var a=M("#agjCalendar");if(0<a.length){for(var t=Y[a.attr("data-active")],n=!0===a.attr("data-active-is-end")||"true"===a.attr("data-active-is-end"),l=I(t),r=-1,i=(t.allowRange&&(r=I(t,!0)),M("#agjCalendar-dropdown")),d=1;d<=t.calendarCount;d++){var o=t.startWeekOnMonday?(e.getDay()+6)%7:e.getDay(),s=-1;switch(d){case 1:s="#agjCalendar-first";break;case 2:s="#agjCalendar-second";break;case 3:s="#agjCalendar-third"}switch(d){case 1:i.val(R(e,"YYYY-MM",t.language));break;case 2:case 3:M(s+"-month-name").text(R(e,"MMMM YYYY",t.language))}var g="",u=0;if(0<o)for(var g=(g+="<div")+' class="agjCalendar-week agjCalendar-week-one"'+">",m=1;m<=o;m++)g=(g+='<div class="agjCalendar-blank')+" agjCalendar-"+E((++u-(t.startWeekOnMonday?0:1))%7,"full","en").toLowerCase()+'"></div>';var c=new Date(t.minimumDate.getFullYear(),t.minimumDate.getMonth(),t.minimumDate.getDate()),D=(t.allowRange&&n&&(-1===l?c.setFullYear(c.getFullYear(),c.getMonth(),c.getDate()+t.minimumRange):c.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()+t.minimumRange)),c.setHours(0,0,0,0),new Date(t.maximumDate.getFullYear(),t.maximumDate.getMonth(),t.maximumDate.getDate()));for(t.allowRange&&(n?-1!==l&&(D.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()+t.maximumRange),D>t.maximumDate)&&D.setFullYear(t.maximumDate.getFullYear(),t.maximumDate.getMonth(),t.maximumDate.getDate()):D.setFullYear(D.getFullYear(),D.getMonth(),D.getDate()-t.minimumRange)),D.setHours(23,59,59,999),m=1;m<=42-o;m++){u%7==0&&(0<g.length&&(g+="</div>"),g=(g+='<div class="agjCalendar-week')+" agjCalendar-week-"+A(Math.round(u/7)+1).toLowerCase()+'">');var h=N(e.getMonth(),e.getFullYear());if(t.startWeekOnMonday&&h++,m<=h){var f=new Date(e.getFullYear(),e.getMonth(),m),v=!1;if(c<=f&&f<=D&&(v=!0,0<t.excludeDates.length))for(var p=0;p<t.excludeDates.length;p++){var C=t.excludeDates[p];if(f.getFullYear()===C.getFullYear()&&f.getMonth()===C.getMonth()&&f.getDate()===C.getDate()){v=!1;break}}h="agjCalendar-"+E((u+(t.startWeekOnMonday?1:0))%7,"full","en").toLowerCase();if(v&&(h+=" agjCalendar-selectable"),f.getFullYear()===(new Date).getFullYear()&&f.getMonth()===(new Date).getMonth()&&f.getDate()===(new Date).getDate()&&(h+=" agjCalendar-today"),-1!==l&&f.getFullYear()===l.getFullYear()&&f.getMonth()===l.getMonth()&&f.getDate()===l.getDate()&&(h+=n?" agjCalendar-other-active":" agjCalendar-active"),-1!==r&&f.getFullYear()===r.getFullYear()&&f.getMonth()===r.getMonth()&&f.getDate()===r.getDate()&&(h+=n?" agjCalendar-active":" agjCalendar-other-active"),-1!==l&&-1!==r&&l!==r&&(l<r&&l<=f&&f<=r||r<l&&f<=l&&r<=f)&&(h+=" agjCalendar-in-range"),g+='<div class="'+h+'">',v){var w="";switch(t.language){case"en":w=R(f,"MMMM D, YYYY",t.language);break;case"fr":w=R(f,"D MMMM YYYY",t.language)}g=(g=(g+="<a")+' href="#"'+(' title="'+w+'"'))+(' id="agjCalendar-'+R(f,"YYYY-MM-DD",t.language)+'"')+">"}g+=m,v&&(g+="</a>"),g+="</div>"}else g=(g+='<div class="agjCalendar-blank')+" agjCalendar-"+E((u+(t.startWeekOnMonday?1:0))%7,"full","en").toLowerCase()+'"></div>';u++}g+="</div>",M(s+" div.agjCalendar-week").remove(),M(s).append(g),7===M(s+" div.agjCalendar-week-five div.agjCalendar-blank").length?M(s).removeClass("agjCalendar-five-weeks agjCalendar-six-weeks").addClass("agjCalendar-four-weeks"):7===M(s+" div.agjCalendar-week-six div.agjCalendar-blank").length?M(s).removeClass("agjCalendar-four-weeks agjCalendar-six-weeks").addClass("agjCalendar-five-weeks"):M(s).removeClass("agjCalendar-four-weeks agjCalendar-five-weeks").addClass("agjCalendar-six-weeks"),e.setFullYear(e.getFullYear(),e.getMonth()+1,1)}M("div.agjCalendar-week a").on("click",function(){var e=new Date(this.id.substring(12,16),parseInt(this.id.substring(17,19),10)-1,this.id.substring(20,22));return B(t,e,n),t.allowRange&&!n&&y(t),M.agjCalendar.deactivate(),!1}),null!==i.val()&&(a=new Date(i.val().substring(0,4),parseInt(i.val().substring(5,7),10),1),0===i.find("option[value="+R(a,"YYYY-MM",t.language)+"]").length?M("a.agjCalendar-next-month").fadeTo(1,.33):M("a.agjCalendar-next-month").fadeTo(1,1),a.setFullYear(a.getFullYear(),a.getMonth()-2,a.getDate()),0===i.find("option[value="+R(a,"YYYY-MM",t.language)+"]").length?M("a.agjCalendar-previous-month").fadeTo(1,.33):M("a.agjCalendar-previous-month").fadeTo(1,1))}},B=function(e,a,t){switch(void 0===t&&(t=!1),e.inputType){case"text":var n=M(e[t?"endDateSelector":"dateSelector"]),l="";if("blank"===a)switch(e.dateFormat){case 1:l="mm/dd/yyyy";break;case 2:l=F[e.language].selectADate;break;case 3:l="dd/mm/yyyy";break;case 4:l="yyyy-mm-dd";break;case 5:l=F[e.language].selectADate}else switch(e.dateFormat){case 1:l=R(a,"MM/DD/YYYY",e.language);break;case 2:l=R(a,"MMM D, YYYY",e.language);break;case 3:l=R(a,"DD/MM/YYYY",e.language);break;case 4:l=R(a,"YYYY-MM-DD",e.language);break;case 5:l=R(a,"D MMMM YYYY",e.language)}0<l.length&&n.val(l).trigger("change");break;case"dropdown":var n="blank"===a?"":R(a,"DD",e.language),r=M(e[t?"endMonthSelector":"monthSelector"]),i="blank"===a?"":R(a,"YYYY-MM",e.language);0<i.length&&0<r.find("option[value="+i+"]").length&&("blank"===a||parseInt(n,10)<=N(a.getMonth(),a.getFullYear()))&&(r.val(i).trigger("change"),f(e,t),M(e[t?"endDaySelector":"daySelector"]).val(n).trigger("change"))}},i=function(e,a,t){switch(a){case 1:if(b[1].test(e))return new Date(e.substring(6,10),parseInt(e.substring(0,2),10)-1,e.substring(3,5));break;case 2:if(b[2].test(e))if(-1!==(n=l(e.substring(0,e.indexOf(" ")),t)))return new Date(e.substring(e.length-4,e.length),n,e.substring(e.indexOf(" ")+1,e.indexOf(",")));break;case 3:if(b[3].test(e))return new Date(e.substring(6,10),parseInt(e.substring(3,5),10)-1,e.substring(0,2),10);break;case 4:if(b[4].test(e))return new Date(e.substring(0,4),parseInt(e.substring(5,7),10)-1,e.substring(8,10));break;case 5:var n;if(b[5].test(e))if(-1!==(n=l(e.substring(e.indexOf(" ")+1,e.lastIndexOf(" ")),t)))return new Date(e.substring(e.lastIndexOf(" ")+1),n,e.substring(0,e.indexOf(" ")))}return-1},H=function(e,a){void 0===a&&(a=!1);for(var t=new Date(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate()),n=(t.setHours(0,0,0,0),new Date(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate())),l=(n.setHours(23,59,59,999),a&&-1!==(a=I(e))&&(t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()+e.minimumRange),(a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e.maximumRange))<e.maximumDate)&&n.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),M("#agjCalendar-dropdown")),r=(l.find("option").remove(),new Date(t.getFullYear(),t.getMonth(),t.getDate()));l.append('<option value="'+R(r,"YYYY-MM",e.language)+'">'+R(r,"MMM YYYY",e.language)+"</option>"),r.setFullYear(r.getFullYear(),r.getMonth()+1,1),r<n;);};M.fn.agjCalendar=function(e){if("object"!=typeof e&&(e={}),"input"===this.prop("tagName").toLowerCase()){for(var a;a="agjCalendar-"+(t=1e5,n=999999,Math.round(Math.random()*(n-t)+t)),0<M("input."+a).length;);this.addClass(a),e.dateSelector="input."+a,M.agjCalendar(e)}var t,n;return this},M.agjCalendar=function(e){e=M.extend({allowBlankDates:!1,allowRange:!1,autoSetEndDate:"dates",calendarCount:1,calendarDisplay:"inline",dateFormat:1,dateSelector:null,dayNameFormat:"short",daySelector:null,defaultDate:new Date,defaultEndDate:null,defaultRange:-1,endDateSelector:null,endDaySelector:null,endExpanderSelector:null,endMonthSelector:null,excludeDates:[],expanderSelector:null,inputType:"text",language:"en",maximumDate:new Date((new Date).getFullYear()+1,(new Date).getMonth(),(new Date).getDate()),maximumRange:-1,minimumDate:new Date,minimumRange:-1,monthSelector:null,overwriteDayOptions:!0,overwriteMonthOptions:!0,startWeekOnMonday:!1},e);var g={position:Y.length,language:"en"};switch("fr"===e.language&&(g.language="fr"),!(g.overwriteMonthOptions=!0)===e.overwriteMonthOptions&&(g.overwriteMonthOptions=!1),!(g.overwriteDayOptions=!0)===e.overwriteDayOptions&&(g.overwriteDayOptions=!1),!(g.allowBlankDates=!1)===e.allowBlankDates&&(g.allowBlankDates=!0),!(g.startWeekOnMonday=!1)===e.startWeekOnMonday&&(g.startWeekOnMonday=!0),!(g.allowRange=!1)===e.allowRange&&(g.allowRange=!0),g.inputType="text","dropdown"===e.inputType&&(g.inputType="dropdown"),g.calendarCount=1,e.calendarCount){case 2:case 3:g.calendarCount=e.calendarCount}switch(g.calendarDisplay="inline",e.calendarDisplay){case"modal":case"full":g.calendarDisplay=e.calendarDisplay}switch(g.dayNameFormat="short",e.dayNameFormat){case"medium":case"full":g.dayNameFormat=e.dayNameFormat}switch(g.dateFormat=1,e.dateFormat){case 2:case 3:case 4:case 5:g.dateFormat=e.dateFormat}switch(g.autoSetEndDate="dates",e.autoSetEndDate){case!0:g.autoSetEndDate="always";break;case!1:g.autoSetEndDate="never";break;case"blanks":case"always":case"never":g.autoSetEndDate=e.autoSetEndDate}if(g.minimumDate=new Date,g.minimumDate.setHours(0,0,0,0),b[4].test(e.minimumDate)?g.minimumDate.setFullYear(e.minimumDate.substring(0,4),parseInt(e.minimumDate.substring(5,7),10)-1,e.minimumDate.substring(8,10)):e.minimumDate instanceof Date&&g.minimumDate.setFullYear(e.minimumDate.getFullYear(),e.minimumDate.getMonth(),e.minimumDate.getDate()),g.maximumDate=new Date((new Date).getFullYear()+1,(new Date).getMonth(),(new Date).getDate()),g.maximumDate.setHours(23,59,59,999),b[4].test(e.maximumDate)?(i=new Date(e.maximumDate.substring(0,4),parseInt(e.maximumDate.substring(5,7),10)-1,e.maximumDate.substring(8,10)),g.minimumDate<=i&&g.maximumDate.setFullYear(i.getFullYear(),i.getMonth(),i.getDate())):e.maximumDate instanceof Date&&e.maximumDate>=g.minimumDate&&g.maximumDate.setFullYear(e.maximumDate.getFullYear(),e.maximumDate.getMonth(),e.maximumDate.getDate()),g.defaultDate=new Date,b[4].test(e.defaultDate)||e.defaultDate instanceof Date?(i=new Date,b[4].test(e.defaultDate)?i.setFullYear(e.defaultDate.substring(0,4),parseInt(e.defaultDate.substring(5,7),10)-1,e.defaultDate.substring(8,10)):i.setFullYear(e.defaultDate.getFullYear(),e.defaultDate.getMonth(),e.defaultDate.getDate()),g.minimumDate<=i&&i<=g.maximumDate&&g.defaultDate.setFullYear(i.getFullYear(),i.getMonth(),i.getDate())):g.allowBlankDates&&"blank"===e.defaultDate&&(g.defaultDate="blank"),g.excludeDates=[],e.excludeDates&&e.excludeDates instanceof Array&&0<e.excludeDates.length)for(var a=0;a<e.excludeDates.length;a++){var t=-1;b[4].test(e.excludeDates[a])?t=new Date(e.excludeDates[a].substring(0,4),parseInt(e.excludeDates[a].substring(5,7),10)-1,e.excludeDates[a].substring(8,10)):e.excludeDates[a]instanceof Date&&(t=new Date(e.excludeDates[a].getFullYear(),e.excludeDates[a].getMonth(),e.excludeDates[a].getDate())),-1!==t&&g.minimumDate<=t&&t<=g.maximumDate&&g.excludeDates.push(t)}if(g.minimumRange=0,g.maximumRange=0,g.defaultRange=0,g.allowRange){for(var n=0,l=new Date(g.minimumDate.getFullYear(),g.minimumDate.getMonth(),g.minimumDate.getDate());l<=g.maximumDate;)n++,l.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()+1);g.minimumRange=0===n?0:1,!isNaN(e.minimumRange)&&0<=parseInt(e.minimumRange,10)&&parseInt(e.minimumRange,10)<=n&&(g.minimumRange=e.minimumRange),g.maximumRange=0===n?0:n,!isNaN(e.maximumRange)&&0<=parseInt(e.maximumRange,10)&&parseInt(e.maximumRange,10)<=n&&parseInt(e.maximumRange,10)>=g.minimumRange&&(g.maximumRange=e.maximumRange),g.defaultRange=0===n?0:1,isNaN(e.defaultRange)||(i=parseInt(e.defaultRange,10),g.minimumRange<=i&&i<=g.maximumRange&&(g.defaultRange=i)),g.defaultEndDate="blank"===g.defaultDate?"blank":new Date(g.defaultDate.getFullYear(),g.defaultDate.getMonth(),g.defaultDate.getDate()+g.defaultRange),b[4].test(e.defaultEndDate)||e.defaultEndDate instanceof Date?(i=new Date,b[4].test(e.defaultEndDate)?i.setFullYear(e.defaultEndDate.substring(0,4),parseInt(e.defaultEndDate.substring(5,7),10)-1,e.defaultEndDate.substring(8,10)):i.setFullYear(e.defaultEndDate.getFullYear(),e.defaultEndDate.getMonth(),e.defaultEndDate.getDate()),g.minimumDate<=i&&i<=g.maximumDate&&g.defaultEndDate.setFullYear(i.getFullYear(),i.getMonth(),i.getDate())):g.allowBlankDates&&"blank"===e.defaultEndDate&&(g.defaultEndDate="blank")}function r(e){if(S(g.position,e.data.isEnd))M.agjCalendar.deactivate();else{var a=g,t=e.data.isEnd;switch(!0!==t&&(t=!1),M.agjCalendar.isActive()&&!S(a.position,t)&&T(),a.inputType){case"text":M(a[t?"endDateSelector":"dateSelector"]).addClass("agjCalendar-active-input");break;case"dropdown":M(a[t?"endMonthSelector":"monthSelector"]).addClass("agjCalendar-active-input"),M(a[t?"endDaySelector":"daySelector"]).addClass("agjCalendar-active-input")}var n=M("#agjCalendar");switch((n=0===n.length?k():n).attr({"data-active":a.position,"data-active-is-end":t}),n.find("#agjCalendar-hide").attr("title",F[a.language].hideCalendar).text(F[a.language].hideCalendar),n.find("#agjCalendar-header-inner span").text(F[a.language].poweredBy),n.find("a.agjCalendar-previous-month").attr("title",F[a.language].previousMonth).find("span.agjCalendar-previous-month-inner").text(F[a.language].previousMonth),n.find("a.agjCalendar-next-month").attr("title",F[a.language].nextMonth).find("span.agjCalendar-next-month-inner").text(F[a.language].nextMonth),a.calendarCount){case 2:n.removeClass("agjCalendar-single agjCalendar-triple").addClass("agjCalendar-double");break;case 3:n.removeClass("agjCalendar-single agjCalendar-double").addClass("agjCalendar-triple");break;default:n.removeClass("agjCalendar-double agjCalendar-triple").addClass("agjCalendar-single")}a.startWeekOnMonday?n.addClass("agjCalendar-start-week-on-monday"):n.removeClass("agjCalendar-start-week-on-monday");for(var l=a.startWeekOnMonday?[1,2,3,4,5,6,0]:[0,1,2,3,4,5,6],r="",i=0;i<l.length;i++)r=(r=(r=(r+="<div")+' class="agjCalendar-'+E(l[i],"full","en").toLowerCase()+'"')+' title="'+E(l[i],"full",a.language)+'">')+E(l[i],a.dayNameFormat,a.language)+"</div>";switch(n.find("div.agjCalendar-days").empty().append(r),a.calendarDisplay){case"full":case"modal":var d=M("body"),o=(C=O(d.css("marginRight")),isNaN(C)&&(C=0),w=d.css("overflow"),M(window).width());d.css({overflow:"hidden"}).css({marginRight:C+M(window).width()-o}),j=M(window).scrollLeft(),x=M(window).scrollTop(),"full"===a.calendarDisplay&&(window.scrollTo(0,1),window.scrollTo(0,0)),M("#agjCalendar-modal-background").show()}H(a,t);var s,e=I(a,t);-1===e&&(-1!==(s=I(a,!1))?e=new Date(s.getFullYear(),s.getMonth(),s.getDate()+a.minimumRange):(e=new Date(a.minimumDate.getFullYear(),a.minimumDate.getMonth(),a.minimumDate.getDate()),t&&e.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()+a.minimumRange))),L(e),W(a,t),M("body").addClass("agjCalendar-active")}return!1}var i=M(e.expanderSelector);switch(0<i.length&&(g.expanderSelector=e.expanderSelector,i.on("click",{isEnd:!1},r),g.allowRange)&&0<(i=M(e.endExpanderSelector)).length&&(g.endExpanderSelector=e.endExpanderSelector,i.on("click",{isEnd:!0},r)),g.inputType){case"text":var d=M(e.dateSelector);if(1!==d.length)return h('Invalid `dateSelector` value: "'+e.dateSelector+'" ('+d.length+" elements found, 1 required)"),!1;g.dateSelector=e.dateSelector;function o(e){return setTimeout(function(){switch(g.calendarDisplay){case"full":case"modal":break;default:p||(M.agjCalendar.deactivate(),e.data.isEnd&&y(g))}},1),!0}var s=d.val();if(d.on("blur",{isEnd:!1},o).on("focus",{isEnd:!1},r),B(g,g.defaultDate),0<s.length&&d.val(s),g.allowRange){d=M(e.endDateSelector);if(1!==d.length)return h('Invalid `endDateSelector` value: "'+e.endDateSelector+'" ('+d.length+" elements found, 1 required)"),!1;g.endDateSelector=e.endDateSelector,s=d.val(),d.on("blur",{isEnd:!0},o).on("focus",{isEnd:!0},r),B(g,g.defaultEndDate,!0),0<s.length&&d.val(s)}break;case"dropdown":d=M(e.monthSelector);if(1!==d.length)return h('Invalid `monthSelector` value: "'+e.monthSelector+'" ('+d.length+" elements found, 1 required)"),!1;s=M(e.daySelector);if(1!==s.length)return h('Invalid `daySelector` value: "'+e.daySelector+'" ('+s.length+" elements found, 1 required)"),!1;g.monthSelector=e.monthSelector,g.daySelector=e.daySelector;function u(e){f(g,e.data.isEnd),e.data.isEnd||y(g)}var m=d.val(),c=s.val();if(d.on("change",{isEnd:!1},u),v(g),f(g),null!==m&&0<m.length&&0<d.find("option[value="+m+"]").length&&d.val(m).trigger("change"),null!==c&&0<c.length&&0<s.find("option[value="+c+"]").length&&s.val(c).trigger("change"),g.allowRange){d=M(e.endMonthSelector);if(1!==d.length)return h('Invalid `endMonthSelector` value: "'+e.endMonthSelector+'" ('+d.length+" elements found, 1 required)"),!1;var D=M(e.endDaySelector);if(1!==D.length)return h('Invalid `endDaySelector` value: "'+e.endDaySelector+'" ('+D.length+" elements found, 1 required)"),!1;g.endMonthSelector=e.endMonthSelector,g.endDaySelector=e.endDaySelector;m=d.val(),c=D.val();s.on("change",function(){y(g),v(g,!0),f(g,!0)}),d.on("change",{isEnd:!0},u),v(g,!0),f(g,!0),null!==m&&0<m.length&&0<d.find("option[value="+m+"]").length&&d.val(m).trigger("change"),null!==c&&0<c.length&&0<D.find("option[value="+c+"]").length&&D.val(c).trigger("change")}}return Y.push(g),!0},M.agjCalendar.deactivate=function(){p=!1;var e=M("#agjCalendar");0<e.length&&(M("body").removeClass("agjCalendar-active"),e.attr("data-active",-1),M(".agjCalendar-active-input").removeClass("agjCalendar-active-input")),T()},M.agjCalendar.isActive=function(){return M("body").hasClass("agjCalendar-active")},M.ctcCalendar=function(e){return M.agjCalendar(e)}}(jQuery);