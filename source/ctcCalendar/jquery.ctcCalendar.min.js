(function(e){if(!e.browser){(function(h){var g,i=navigator.userAgent||"";h.uaMatch=function(k){k=k.toLowerCase();var j=/(chrome)[ \/]([\w.]+)/.exec(k)||/(webkit)[ \/]([\w.]+)/.exec(k)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(k)||/(msie) ([\w.]+)/.exec(k)||k.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(k)||[];return{browser:j[1]||"",version:j[2]||"0"}};g=h.uaMatch(i);h.browser={};if(g.browser){h.browser[g.browser]=true;h.browser.version=g.version}if(h.browser.webkit){h.browser.safari=true}})(jQuery)}var d=new Array();var c=-1,b=false;var f="";var a="";get_true_height=function(h){var g=h.height();if(!isNaN(parseInt(h.css("borderTopWidth"),10))){g+=parseInt(h.css("borderTopWidth"),10)}if(!isNaN(parseInt(h.css("borderBottomWidth"),10))){g+=parseInt(h.css("borderBottomWidth"),10)}if(!isNaN(parseInt(h.css("padding-top"),10))){g+=parseInt(h.css("padding-top"),10)}if(!isNaN(parseInt(h.css("padding-bottom"),10))){g+=parseInt(h.css("padding-bottom"),10)}if(!isNaN(parseInt(h.css("margin-top"),10))){g+=parseInt(h.css("margin-top"),10)}if(!isNaN(parseInt(h.css("margin-bottom"),10))){g+=parseInt(h.css("margin-bottom"),10)}return g};get_true_width=function(g){var h=g.width();if(!isNaN(parseInt(g.css("borderLeftWidth"),10))){h+=parseInt(g.css("borderLeftWidth"),10)}if(!isNaN(parseInt(g.css("borderRightWidth"),10))){h+=parseInt(g.css("borderRightWidth"),10)}if(!isNaN(parseInt(g.css("padding-left"),10))){h+=parseInt(g.css("padding-left"),10)}if(!isNaN(parseInt(g.css("padding-right"),10))){h+=parseInt(g.css("padding-right"),10)}if(!isNaN(parseInt(g.css("margin-left"),10))){h+=parseInt(g.css("margin-left"),10)}if(!isNaN(parseInt(g.css("margin-right"),10))){h+=parseInt(g.css("margin-right"),10)}return h};get_month_name=function(g,i,h){if(i===undefined){i=true}if(h===undefined){h="en"}if(h=="en"){if(g==1){return i?"January":"Jan"}else{if(g==2){return i?"February":"Feb"}else{if(g==3){return i?"March":"Mar"}else{if(g==4){return i?"April":"Apr"}else{if(g==5){return"May"}else{if(g==6){return i?"June":"Jun"}else{if(g==7){return i?"July":"Jul"}else{if(g==8){return i?"August":"Aug"}else{if(g==9){return i?"September":"Sep"}else{if(g==10){return i?"October":"Oct"}else{if(g==11){return i?"November":"Nov"}else{if(g==12){return i?"December":"Dec"}}}}}}}}}}}}}return""};get_month_number=function(g,h){if(h===undefined){h="en"}if(h=="en"){if(g=="Jan"||g=="January"){return 1}else{if(g=="Feb"||g=="February"){return 2}else{if(g=="Mar"||g=="March"){return 3}else{if(g=="Apr"||g=="April"){return 4}else{if(g=="May"){return 5}else{if(g=="Jun"||g=="June"){return 6}else{if(g=="Jul"||g=="July"){return 7}else{if(g=="Aug"||g=="August"){return 8}else{if(g=="Sep"||g=="September"){return 9}else{if(g=="Oct"||g=="October"){return 10}else{if(g=="Nov"||g=="November"){return 11}else{if(g=="Dec"||g=="December"){return 12}}}}}}}}}}}}}return""};get_day_name=function(g,i,h){if(i===undefined){i=true}if(h===undefined){h="en"}if(h=="en"){if(g==1){return i?"Sunday":"Sun"}else{if(g==2){return i?"Monday":"Mon"}else{if(g==3){return i?"Tuesday":"Tue"}else{if(g==4){return i?"Wednesday":"Wed"}else{if(g==5){return i?"Thursday":"Thu"}else{if(g==6){return i?"Friday":"Fri"}else{if(g==7){return i?"Saturday":"Sat"}}}}}}}}return""};get_month_text=function(g){if(g===undefined){g="en"}if(g=="en"){return""}return""};get_day_text=function(g){if(g===undefined){g="en"}if(g=="en"){return""}return""};get_days_in_month=function(g,h){if(h==1||h==3||h==5||h==7||h==8||h==10||h==12){return 31}else{if(h==4||h==6||h==9||h==11){return 30}else{if(h==2){return(g%4==0&&g%100!=0)||g%400==0?29:28}}}return 0};number_to_text=function(g){if(!isNaN(g)){g=parseInt(g,10)}switch(g){case 0:return"Zero";case 1:return"One";case 2:return"Two";case 3:return"Three";case 4:return"Four";case 5:return"Five";case 6:return"Six";case 7:return"Seven";case 8:return"Eight";case 9:return"Nine";case 10:return"Ten"}return""};e(document).resize(function(){e.ctcCalendar.set_position()}).click(function(h){if(e("#ctc-calendar").length>0&&c>=0){if(d[c]["inputType"]=="text"){var g=d[c][!b?"dateSelector":"endDateSelector"];if(!(e(h.target).parents("#ctc-calendar").length>0||e(h.target).attr("id")=="ctc-calendar")&&!(e(h.target).parents(g).length>0||e(h.target).attr("id")==g.substring(1))){e.ctcCalendar.hide()}}else{if(d[c]["inputType"]=="dropdown"){if(!(e(h.target).parents("#ctc-calendar").length>0||e(h.target).attr("id")=="ctc-calendar")){e.ctcCalendar.hide()}}}}return true}).keyup(function(g){if(g.keyCode==27&&c>=0&&(d[c]["calendarDisplay"]=="modal"||d[c]["calendarDisplay"]=="full")&&e("#ctc-calendar").length>0){e("*:focus").blur();e.ctcCalendar.hide();return false}return true});e(window).scroll(function(){if(c>=0){e.ctcCalendar.set_position()}});e(window).resize(function(){if(c>=0){e.ctcCalendar.set_position()}});e.ctcCalendar=function(i){var z;z=new Array();z.calendarCount=1;if(i.calendarCount){if(!isNaN(i.calendarCount)){if(parseInt(i.calendarCount,10)>=1&&parseInt(i.calendarCount,10)<=3){z.calendarCount=parseInt(i.calendarCount,10)}}}z.overwriteMonthOptions=true;if(i.overwriteMonthOptions||i.overwriteMonthOptions===false){if(i.overwriteMonthOptions==false){z.overwriteMonthOptions=false}}z.overwriteDayOptions=true;if(i.overwriteDayOptions||i.overwriteDayOptions===false){if(i.overwriteDayOptions==false){z.overwriteDayOptions=false}}z.autoSetEndDate=false;if(i.autoSetEndDate){if(i.autoSetEndDate===true){z.autoSetEndDate=true}}z.allowBlankDates=false;if(i.allowBlankDates){if(i.allowBlankDates===true){z.allowBlankDates=true}}z.dateFormat=1;if(i.dateFormat){if(i.dateFormat==2||i.dateFormat==3){z.dateFormat=i.dateFormat}}z.minimumDate=new Date();if(i.minimumDate){if(/([0-9]{4})-([0-9]{2})-([0-9]{2})/.test(i.minimumDate)){var m,l,j,y;m=i.minimumDate.substring(0,4);l=i.minimumDate.substring(5,7);j=i.minimumDate.substring(8,10);y=new Date();y.setFullYear(m,parseInt(l,10)-1,j);z.minimumDate=y}}z.minimumDate.setHours(0,0,0,0);z.maximumDate=new Date();z.maximumDate.setFullYear(z.maximumDate.getFullYear()+1,z.maximumDate.getMonth(),z.maximumDate.getDate());if(i.maximumDate){if(/([0-9]{4})-([0-9]{2})-([0-9]{2})/.test(i.maximumDate)){var E,k,B,n;E=i.maximumDate.substring(0,4);k=i.maximumDate.substring(5,7);B=i.maximumDate.substring(8,10);n=new Date();n.setFullYear(E,parseInt(k,10)-1,B);if(n>=z.minimumDate){z.maximumDate=n}}}z.maximumDate.setHours(23,59,59,999);z.defaultDate=new Date();if(i.defaultDate){if(/([0-9]{4})-([0-9]{2})-([0-9]{2})/.test(i.defaultDate)){var F,h,C,o;F=i.defaultDate.substring(0,4);h=i.defaultDate.substring(5,7);C=i.defaultDate.substring(8,10);o=new Date();o.setFullYear(F,parseInt(h,10)-1,C);if(o>=z.minimumDate&&o<=z.maximumDate){z.defaultDate=o}}else{if(z.allowBlankDates&&i.defaultDate=="blank"){z.defaultDate=i.defaultDate}}}z.allowRange=false;if(i.allowRange){if(i.allowRange===true){z.allowRange=true}}if(i.allowRange){var v,q;q=new Date();q.setFullYear(z.minimumDate.getFullYear(),z.minimumDate.getMonth(),z.minimumDate.getDate());v=0;while(q<=z.maximumDate){v++;q.setFullYear(q.getFullYear(),q.getMonth(),q.getDate()+1)}z.minimumRange=v==0?0:1;if(i.minimumRange||i.minimumRange===0){if(!isNaN(i.minimumRange)){if(parseInt(i.minimumRange,10)<=v){z.minimumRange=i.minimumRange}}}z.maximumRange=v==0?0:v;if(i.maximumRange||i.maximumRange===0){if(!isNaN(i.maximumRange)){if(parseInt(i.maximumRange,10)<=v){z.maximumRange=i.maximumRange}}}z.defaultRange=v==0?0:1;if(i.defaultRange||i.defaultRange===0){if(!isNaN(i.defaultRange)){if(parseInt(i.defaultRange,10)>=z.minimumRange&&parseInt(i.defaultRange,10)<=z.maximumRange){z.defaultRange=i.defaultRange}}}}else{z.defaultRange=0;z.minimumRange=0;z.maximumRange=0}z.calendarDisplay="inline";if(i.calendarDisplay){if(i.calendarDisplay=="modal"||i.calendarDisplay=="full"){z.calendarDisplay=i.calendarDisplay}}z.inputType="text";if(i.inputType){if(i.inputType=="dropdown"){z.inputType=i.inputType}}if(z.inputType=="text"){var g,u,t,D;g=e(i.expanderSelector);u=e(i.dateSelector);if(i.allowRange){t=e(i.endExpanderSelector);D=e(i.endDateSelector)}if(g.length>0&&u.length==1&&(!i.allowRange||(t.length>0&&D.length==1))){z.expanderSelector=i.expanderSelector;z.dateSelector=i.dateSelector;if(i.allowRange){z.endExpanderSelector=i.endExpanderSelector;z.endDateSelector=i.endDateSelector}var p=d.length;d[p]=z;var G=c;c=p;e.ctcCalendar.set_new_date(z.defaultDate);c=G;display_calendar=function(){if(c!=p||b){c=p;b=false;e.ctcCalendar.show()}else{e.ctcCalendar.hide()}return false};g.click(display_calendar);u.focus(display_calendar).keydown(function(H){if(H.keyCode==9){if(i.allowRange){setTimeout(function(){if(e(":focus")[0]!=D[0]){e.ctcCalendar.hide()}},1)}}return true})}if(i.allowRange){G=c;var x;if(z.defaultDate=="blank"){x="blank"}else{x=new Date();x.setFullYear(z.defaultDate.getFullYear(),z.defaultDate.getMonth(),z.defaultDate.getDate()+z.defaultRange)}c=p;b=true;e.ctcCalendar.set_new_date(x,true);c=G;b=false;u.blur(function(){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(e(this).val())){e.ctcCalendar.check_end_date(p)}});D.keydown(function(H){if(H.keyCode==9){setTimeout(function(){if(e(":focus")[0]!=u[0]){e.ctcCalendar.hide()}},1)}return true});display_end_calendar=function(){if(c!=p||!b){c=p;b=true;e.ctcCalendar.show()}else{e.ctcCalendar.hide()}return false};t.click(display_end_calendar);D.focus(display_end_calendar)}}else{if(z.inputType=="dropdown"){var g,w,A,t,r,s;g=e(i.expanderSelector);w=e(i.monthSelector);A=e(i.daySelector);if(i.allowRange){t=e(i.endExpanderSelector);r=e(i.endMonthSelector);s=e(i.endDaySelector)}if(g.length>0&&w.length==1&&A.length==1&&(!i.allowRange||(t.length>0&&r.length==1&&s.length==1))){z.monthSelector=i.monthSelector;z.daySelector=i.daySelector;z.expanderSelector=i.expanderSelector;if(i.allowRange){z.endMonthSelector=i.endMonthSelector;z.endDaySelector=i.endDaySelector;z.endExpanderSelector=i.endExpanderSelector}var p=d.length;d[p]=z;e.ctcCalendar.update_month_selectors(p);e.ctcCalendar.update_day_selectors(p);var G=c;c=p;e.ctcCalendar.set_new_date(z.defaultDate);c=G;g.click(function(){if(c!=p||b){c=p;b=false;e.ctcCalendar.show()}else{e.ctcCalendar.hide()}return false});w.change(function(){e.ctcCalendar.update_day_selectors(p);if(i.allowRange){var H,J,I;H=new Date();H.setFullYear(w.val().substring(0,4),parseInt(w.val().substring(5,7),10)-1,A.val());H.setHours(0,0,0,0);J=new Date();J.setFullYear(r.val().substring(0,4),parseInt(r.val().substring(5,7),10)-1,s.val());J.setHours(0,0,0,0);e.ctcCalendar.update_month_selectors(p,true);e.ctcCalendar.update_day_selectors(p,true);if(H>J){c=p;I=new Date();I.setFullYear(H.getFullYear(),H.getMonth(),H.getDate()+z.defaultRange);e.ctcCalendar.set_new_date(I,true);c=-1}}});if(i.allowRange){e.ctcCalendar.update_month_selectors(p,true);e.ctcCalendar.update_day_selectors(p,true);G=c;var x;if(z.defaultDate=="blank"){x="blank"}else{x=new Date();x.setFullYear(z.defaultDate.getFullYear(),z.defaultDate.getMonth(),z.defaultDate.getDate()+z.defaultRange)}c=p;b=true;e.ctcCalendar.set_new_date(x,true);c=G;b=false;A.change(function(){e.ctcCalendar.check_end_date(p);e.ctcCalendar.update_month_selectors(p,true);e.ctcCalendar.update_day_selectors(p,true)});t.click(function(){if(c!=p||!b){c=p;b=true;e.ctcCalendar.show()}else{e.ctcCalendar.hide()}return false});r.change(function(){e.ctcCalendar.update_day_selectors(p,true)})}}}}};e.ctcCalendar.show=function(){var n=false;if(d[c]["inputType"]=="text"){var h,l;h=e(d[c][!b?"dateSelector":"endDateSelector"]);if(b){l=e(d[c]["dateSelector"])}n=h.length==1&&(!b||l.length==1)}else{if(d[c]["inputType"]=="dropdown"){var j,m,i,g;j=e(d[c][!b?"monthSelector":"endMonthSelector"]);m=e(d[c][!b?"daySelector":"endDaySelector"]);if(b){i=e(d[c]["monthSelector"]);g=e(d[c]["daySelector"])}n=j.length==1&&m.length==1&&(!b||(i.length==1&&g.length==1))}}if(n){var k;k=e("#ctc-calendar,#ctc-calendar-iframe");if(k.length==0){e.ctcCalendar.add_to_dom();k=e("#ctc-calendar,#ctc-calendar-iframe")}show_calendar=function(){if(d[c]["calendarDisplay"]=="modal"||d[c]["calendarDisplay"]=="full"){window.scrollTo(0,1);window.scrollTo(0,0);f=e("body").css("overflow");a=e("body").css("marginRight");if(String(a).indexOf("px")>=0){a=a.substring(0,a.length-2)}a=parseInt(a,10);e("body").css({overflow:"hidden",marginRight:a+17});e("#ctc-calendar-modal-background").css({display:"block"})}e.ctcCalendar.set_position();e.ctcCalendar.update_dropdown();var t=new Date();if(d[c]["inputType"]=="text"){if(d[c]["dateFormat"]==1){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(h.val())){t.setFullYear(h.val().substring(6,10),parseInt(h.val().substring(0,2),10)-1,parseInt(h.val().substring(3,5),10))}else{if(b&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(l.val())){t.setFullYear(l.val().substring(6,10),parseInt(l.val().substring(0,2),10)-1,parseInt(l.val().substring(3,5),10)+d[c]["minimumRange"])}else{if(!b){t.setFullYear(d[c]["minimumDate"].getFullYear(),d[c]["minimumDate"].getMonth(),d[c]["minimumDate"].getDate())}else{t.setFullYear(d[c]["minimumDate"].getFullYear(),d[c]["minimumDate"].getMonth(),d[c]["minimumDate"].getDate()+d[c]["minimumRange"])}}}if(b&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(l.val())){var v=new Date();v.setFullYear(l.val().substring(6,10),parseInt(l.val().substring(0,2),10)-1,parseInt(l.val().substring(3,5),10));if(Math.ceil(Math.abs(t.getTime()-v.getTime())/(1000*60*60*24))>d[c]["maximumRange"]){t=new Date(v.getTime()+(1000*60*60*24*d[c]["maximumRange"]))}}}else{if(d[c]["dateFormat"]==2){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(h.val())){var u,s,r;u=h.val().substring(h.val().length-4,h.val().length);s=get_month_number(h.val().substring(0,3));r=h.val().substring(h.val().indexOf(" ")+1,h.val().indexOf(","));t.setFullYear(u,s-1,r)}else{if(b&&/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(l.val())){var q,p,o;q=l.val().substring(l.val().length-4,l.val().length);p=get_month_number(l.val().substring(0,3));o=l.val().substring(l.val().indexOf(" ")+1,l.val().indexOf(","));t.setFullYear(q,p-1,parseInt(o,10)+d[c]["minimumRange"])}else{if(!b){t.setFullYear(d[c]["minimumDate"].getFullYear(),d[c]["minimumDate"].getMonth(),d[c]["minimumDate"].getDate())}else{t.setFullYear(d[c]["minimumDate"].getFullYear(),d[c]["minimumDate"].getMonth(),d[c]["minimumDate"].getDate()+d[c]["minimumRange"])}}}}else{if(d[c]["dateFormat"]==3){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(h.val())){t.setFullYear(h.val().substring(6,10),parseInt(h.val().substring(3,5),10)-1,1)}else{if(b&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(l.val())){t.setFullYear(l.val().substring(6,10),parseInt(l.val().substring(3,5),10)-1,parseInt(l.val().substring(0,2),10)+d[c]["minimumRange"])}else{if(!b){t.setFullYear(d[c]["minimumDate"].getFullYear(),d[c]["minimumDate"].getMonth(),d[c]["minimumDate"].getDate())}else{t.setFullYear(d[c]["minimumDate"].getFullYear(),d[c]["minimumDate"].getMonth(),d[c]["minimumDate"].getDate()+d[c]["minimumRange"])}}}}}}}else{if(d[c]["inputType"]=="dropdown"){if(/([0-9]{4})-([0-9]{2})/.test(j.val())){t.setFullYear(j.val().substring(0,4),parseInt(j.val().substring(5,7),10)-1,1)}else{if(b&&/([0-9]{4})-([0-9]{2})/.test(i.val())){t.setFullYear(i.val().substring(0,4),parseInt(i.val().substring(5,7),10)-1,parseInt(g.val(),10)+d[c]["minimumRange"])}else{if(!b){t.setFullYear(d[c]["minimumDate"].getFullYear(),d[c]["minimumDate"].getMonth(),d[c]["minimumDate"].getDate())}else{t.setFullYear(d[c]["minimumDate"].getFullYear(),d[c]["minimumDate"].getMonth(),d[c]["minimumDate"].getDate()+d[c]["minimumRange"])}}}}}t.setHours(0,0,0,0);e.ctcCalendar.update_calendars(t);if(d[c]["calendarCount"]==1){e("#ctc-calendar,#ctc-calendar-iframe").addClass("ctc-calendar-single").removeClass("ctc-calendar-double").removeClass("ctc-calendar-triple");e("#ctc-calendar-first").show();e("#ctc-calendar-second,#ctc-calendar-third").hide()}else{if(d[c]["calendarCount"]==2){e("#ctc-calendar,#ctc-calendar-iframe").removeClass("ctc-calendar-single").addClass("ctc-calendar-double").removeClass("ctc-calendar-triple");e("#ctc-calendar-first,#ctc-calendar-second").show();e("#ctc-calendar-third").hide()}else{if(d[c]["calendarCount"]==3){e("#ctc-calendar,#ctc-calendar-iframe").removeClass("ctc-calendar-single").removeClass("ctc-calendar-double").addClass("ctc-calendar-triple");e("#ctc-calendar-first,#ctc-calendar-second,#ctc-calendar-third").show()}}}k.show();e.ctcCalendar.set_position()};if(k.is(":visible")){k.hide();show_calendar()}else{show_calendar()}}if(d[c]["calendarDisplay"]=="full"){setTimeout(function(){e(document).resize();e(window).resize();e(window).scroll()},100)}};e.ctcCalendar.set_position=function(){if(c>-1){if(d[c]["calendarDisplay"]=="inline"){if(d[c]["inputType"]=="text"){var n,r,q;n=e("#ctc-calendar,#ctc-calendar-iframe");r=e(d[c][!b?"dateSelector":"endDateSelector"]);q=e(d[c][!b?"expanderSelector":"endExpanderSelector"]);if((n.length==1||n.length==2)&&q.length>0&&r.length==1){var i,m,j,k;i=q.offset().top+get_true_height(q);if(r.attr("type")=="hidden"){j=r.parent().offset().top+get_true_height(r.parent())}else{j=r.offset().top+get_true_height(r)}k=Math.max(i,j)+1;var s,t,o,g;s=q.offset().left;if(r.attr("type")=="hidden"){o=r.parent().offset().left}else{o=r.offset().left}g=Math.min(s,o);n.css({left:g,top:k})}}else{if(d[c]["inputType"]=="dropdown"){var n,l,h,q;n=e("#ctc-calendar,#ctc-calendar-iframe");l=e(d[c][!b?"monthSelector":"endMonthSelector"]);h=e(d[c][!b?"daySelector":"endDaySelector"]);q=e(d[c][!b?"expanderSelector":"endExpanderSelector"]);if((n.length==1||n.length==2)&&q.length>0&&l.length==1&&h.length==1){var i,m,u,k;i=q.offset().top+get_true_height(q);m=l.offset().top+get_true_height(l);u=h.offset().top+get_true_height(h);k=Math.max(i,m,u)+1;var s,t,p,g;s=q.offset().left;t=l.offset().left;p=h.offset().left;g=Math.min(s,t,p);n.css({left:g,top:k})}}}var n=e("#ctc-calendar,#ctc-calendar-iframe");n.removeClass("ctc-calendar-full").css({position:"absolute"});e("#ctc-calendar-modal-background").addClass("ctc-calendar-modal-background-full")}else{if(d[c]["calendarDisplay"]=="modal"){var n=e("#ctc-calendar,#ctc-calendar-iframe");n.removeClass("ctc-calendar-full").css({left:(e(window).width()/2)-(get_true_width(n)/2),position:"fixed",top:(e(window).height()/2)-(get_true_height(n)/2)});e("#ctc-calendar-modal-background").addClass("ctc-calendar-modal-background-full")}else{if(d[c]["calendarDisplay"]=="full"){var n=e("#ctc-calendar,#ctc-calendar-iframe");n.addClass("ctc-calendar-full").css({left:0,position:"fixed",top:0});e("#ctc-calendar-modal-background").addClass("ctc-calendar-modal-background-full")}}}}};e.ctcCalendar.hide=function(){var g;g=e("#ctc-calendar,#ctc-calendar-iframe");if(d[c]["calendarDisplay"]=="modal"||d[c]["calendarDisplay"]=="full"){e("body").css({overflow:f,marginRight:a});e("#ctc-calendar-modal-background").hide()}if(g.length==1||g.length==2){g.hide();c=-1}};e.ctcCalendar.update_month_selectors=function(r,n){if(n===undefined){n=false}if(d[r]["overwriteMonthOptions"]){var m,j,h,k;m=e(d[r][!n?"monthSelector":"endMonthSelector"]);j=e(d[r][!n?"daySelector":"endDaySelector"]);if(d[r]["allowRange"]&&n){h=e(d[r]["monthSelector"]);k=e(d[r]["daySelector"])}if(m.length==1&&j.length==1&&(!d[r]["allowRange"]||!n||(h.length==1&&k.length==1))){if(/([0-9]{4})-([0-9]{2})/.test(m.val())&&j.val().length>0){var o=new Date();o.setFullYear(m.val().substring(0,4),parseInt(m.val().substring(5,7),10)-1,1);if(get_days_in_month(o.getFullYear(),o.getMonth()+1)<parseInt(j.val(),10)){o.setFullYear(m.val().substring(0,4),parseInt(m.val().substring(5,7),10)-1,get_days_in_month(o.getFullYear(),o.getMonth()+1))}else{o.setFullYear(m.val().substring(0,4),parseInt(m.val().substring(5,7),10)-1,parseInt(j.val(),10))}}m.html("");if(d[r]["allowBlankDates"]){m.append('<option value="">'+get_month_text()+"</option>")}var q,i,g;q=new Date();q.setFullYear(d[r]["minimumDate"].getFullYear(),d[r]["minimumDate"].getMonth(),d[r]["minimumDate"].getDate());if(n){if(h.length==1&&k.length==1&&h.val().length>0&&k.val().length>0){q.setFullYear(h.val().substring(0,4),parseInt(h.val().substring(5,7),10)-1,parseInt(k.val(),10)+d[r]["minimumRange"])}}q.setHours(0,0,0,0);i=new Date();i.setFullYear(d[r]["maximumDate"].getFullYear(),d[r]["maximumDate"].getMonth(),d[r]["maximumDate"].getDate());if(d[r]["allowRange"]){var l;if(n){if(/([0-9]{4})-([0-9]{2})/.test(h.val())&&k.val().length>0){l=new Date();l.setFullYear(h.val().substring(0,4),parseInt(h.val().substring(5,7),10)-1,1);if(get_days_in_month(l.getFullYear(),l.getMonth()+1)<parseInt(j.val(),10)){l.setFullYear(h.val().substring(0,4),parseInt(h.val().substring(5,7),10)-1,get_days_in_month(l.getFullYear(),l.getMonth()+1))}else{l.setFullYear(h.val().substring(0,4),parseInt(h.val().substring(5,7),10)-1,parseInt(k.val(),10))}}}if(!n){i.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()-d[r]["minimumRange"])}else{if(typeof l!="undefined"){i.setFullYear(l.getFullYear(),l.getMonth(),l.getDate()+d[r]["maximumRange"])}}}i.setHours(23,59,59,999);g=q;while(g<i){var p="";if(typeof o!="undefined"){if(o.getFullYear()==g.getFullYear()&&o.getMonth()==g.getMonth()){p=' selected="selected"'}}m.append('<option value="'+g.getFullYear()+"-"+(g.getMonth()+1<10?"0"+(g.getMonth()+1):g.getMonth()+1)+'"'+p+">"+get_month_name(g.getMonth()+1)+" "+g.getFullYear()+"</option>");g.setFullYear(g.getFullYear(),g.getMonth()+1,1)}}}};e.ctcCalendar.update_day_selectors=function(s,o){if(o===undefined){o=false}if(d[s]["overwriteDayOptions"]){var n,i,g,l;n=e(d[s][!o?"monthSelector":"endMonthSelector"]);i=e(d[s][!o?"daySelector":"endDaySelector"]);if(d[s]["allowRange"]&&o){g=e(d[s]["monthSelector"]);l=e(d[s]["daySelector"])}if(n.length==1&&i.length==1){if(/([0-9]{4})-([0-9]{2})/.test(n.val())){if(i.val().length>0){var p=new Date();p.setFullYear(n.val().substring(0,4),parseInt(n.val().substring(5,7),10)-1,1);if(get_days_in_month(p.getFullYear(),p.getMonth()+1)<parseInt(i.val(),10)){p.setFullYear(n.val().substring(0,4),parseInt(n.val().substring(5,7),10)-1,get_days_in_month(p.getFullYear(),p.getMonth()+1))}else{p.setFullYear(n.val().substring(0,4),parseInt(n.val().substring(5,7),10)-1,parseInt(i.val(),10))}}var j=get_days_in_month(n.val().substring(0,4),n.val().substring(5,7));if(j>0){i.html("");if(d[s]["allowBlankDates"]){i.append('<option value="">'+get_day_text()+"</option>")}var r,h;r=new Date();r.setFullYear(d[s]["minimumDate"].getFullYear(),d[s]["minimumDate"].getMonth(),d[s]["minimumDate"].getDate());if(o){var g,l;g=e(d[s]["monthSelector"]);l=e(d[s]["daySelector"]);if(g.length==1&&l.length==1&&g.val().length>0&&l.val().length>0){r.setFullYear(g.val().substring(0,4),parseInt(g.val().substring(5,7),10)-1,parseInt(l.val(),10)+d[s]["minimumRange"])}else{r.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()+d[s]["minimumRange"])}}r.setHours(0,0,0,0);h=new Date();h.setFullYear(d[s]["maximumDate"].getFullYear(),d[s]["maximumDate"].getMonth(),d[s]["maximumDate"].getDate());if(d[s]["allowRange"]){var m;if(o){if(/([0-9]{4})-([0-9]{2})/.test(g.val())&&l.val().length>0){m=new Date();m.setFullYear(g.val().substring(0,4),parseInt(g.val().substring(5,7),10)-1,1);if(get_days_in_month(m.getFullYear(),m.getMonth()+1)<parseInt(i.val(),10)){m.setFullYear(g.val().substring(0,4),parseInt(g.val().substring(5,7),10)-1,get_days_in_month(m.getFullYear(),m.getMonth()+1))}else{m.setFullYear(g.val().substring(0,4),parseInt(g.val().substring(5,7),10)-1,parseInt(l.val(),10))}}}if(!o){h.setFullYear(h.getFullYear(),h.getMonth(),h.getDate()-d[s]["minimumRange"])}else{if(typeof m!="undefined"){h.setFullYear(m.getFullYear(),m.getMonth(),m.getDate()+d[s]["maximumRange"])}}}h.setHours(23,59,59,999);var k=new Date();k.setFullYear(n.val().substring(0,4),parseInt(n.val().substring(5,7),10)-1,1);if(k<r&&!d[s]["overwriteMonthOptions"]){k.setFullYear(r.getFullYear(),r.getMonth(),1)}for(day=1;day<=j;day++){k.setFullYear(k.getFullYear(),k.getMonth(),day);k.setHours(12,30,30,500);var q="";if(typeof p!="undefined"){if(p.getDate()==day){q=' selected="selected"'}}if(k>=r&&k<=h){i.append('<option value="'+(day<10?"0"+day:day)+'"'+q+">"+day+"</option>")}}}}else{i.html('<option value="">'+get_day_text()+"</option>")}}}};e.ctcCalendar.update_dropdown=function(){var i,n,j;i=e("#ctc-calendar-dropdown");n=new Date();n.setFullYear(d[c]["minimumDate"].getFullYear(),d[c]["minimumDate"].getMonth(),d[c]["minimumDate"].getDate());if(b){if(d[c]["inputType"]=="text"){var m;m=e(d[c]["dateSelector"]);if(m.length==1){if(d[c]["dateFormat"]==1&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(m.val())){n.setFullYear(m.val().substring(6,10),parseInt(m.val().substring(0,2),10)-1,parseInt(m.val().substring(3,5),10)+d[c]["minimumRange"])}else{if(d[c]["dateFormat"]==2&&/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(m.val())){minimum_year=m.val().substring(m.val().length-4,m.val().length);minimum_month=get_month_number(m.val().substring(0,3));minimum_day=m.val().substring(m.val().indexOf(" ")+1,m.val().indexOf(","));n=new Date();n.setFullYear(minimum_year,minimum_month-1,minimum_day)}else{if(d[c]["dateFormat"]==3&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(m.val())){n.setFullYear(m.val().substring(6,10),parseInt(m.val().substring(3,5),10)-1,parseInt(m.val().substring(0,2),10)+d[c]["minimumRange"])}else{n.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()+d[c]["minimumRange"])}}}}}else{if(d[c]["inputType"]=="dropdown"){var l,h;l=e(d[c]["monthSelector"]);h=e(d[c]["daySelector"]);if(l.length==1&&h.length==1&&l.val().length>0&&h.val().length>0){n.setFullYear(l.val().substring(0,4),parseInt(l.val().substring(5,7),10)-1,parseInt(h.val(),10)+d[c]["minimumRange"])}else{n.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()+d[c]["minimumRange"])}}}}n.setHours(0,0,0,0);j=new Date();j.setFullYear(d[c]["maximumDate"].getFullYear(),d[c]["maximumDate"].getMonth(),d[c]["maximumDate"].getDate());if(d[c]["allowRange"]){if(d[c]["inputType"]=="text"){var g;if(b){if(d[c]["dateFormat"]==1&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(m.val())){g=new Date();g.setFullYear(m.val().substring(6,10),parseInt(m.val().substring(0,2),10)-1,parseInt(m.val().substring(3,5),10))}else{if(d[c]["dateFormat"]==2&&/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(m.val())){g=new Date();start_year=m.val().substring(m.val().length-4,m.val().length);start_month=get_month_number(m.val().substring(0,3));start_day=m.val().substring(m.val().indexOf(" ")+1,m.val().indexOf(","));g=new Date();g.setFullYear(start_year,start_month-1,start_day)}else{if(d[c]["dateFormat"]==3&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(m.val())){g=new Date();g.setFullYear(m.val().substring(6,10),parseInt(m.val().substring(3,5),10)-1,parseInt(m.val().substring(0,2),10))}}}}if(!b){j.setFullYear(j.getFullYear(),j.getMonth(),j.getDate()-d[c]["minimumRange"])}else{if(typeof g!="undefined"){j.setFullYear(g.getFullYear(),g.getMonth(),g.getDate()+d[c]["maximumRange"])}}if(b&&j>d[c]["maximumDate"]){j=d[c]["maximumDate"]}}else{if(d[c]["inputType"]=="dropdown"){var g;if(b){if(/([0-9]{4})-([0-9]{2})/.test(l.val())&&h.val().length>0){g=new Date();g.setFullYear(l.val().substring(0,4),parseInt(l.val().substring(5,7),10)-1,h.val())}}if(!b){j.setFullYear(j.getFullYear(),j.getMonth(),j.getDate()-d[c]["minimumRange"])}else{if(typeof g!="undefined"){j.setFullYear(g.getFullYear(),g.getMonth(),g.getDate()+d[c]["maximumRange"])}}if(b&&j>d[c]["maximumDate"]){j=d[c]["maximumDate"]}}}}j.setHours(23,59,59,999);i.html("");var k=n;while(k<j){i.append('<option value="'+k.getFullYear()+"-"+(k.getMonth()+1<10?"0"+(k.getMonth()+1):k.getMonth()+1)+'">'+get_month_name(k.getMonth()+1,false)+" "+k.getFullYear()+"</option>");k.setFullYear(k.getFullYear(),k.getMonth()+1,1)}};e.ctcCalendar.update_calendars=function(r){var C,g;if(r.getDate()!=1){r.setFullYear(r.getFullYear(),r.getMonth(),1)}if(d[c]["inputType"]=="text"){var u,k;u=e(d[c][!b?"dateSelector":"endDateSelector"]);if(d[c]["allowRange"]){if(b){k=e(d[c]["dateSelector"])}else{k=e(d[c]["endDateSelector"])}}}else{if(d[c]["inputType"]=="dropdown"){var w,F,G,y;w=e(d[c][!b?"monthSelector":"endMonthSelector"]);F=e(d[c][!b?"daySelector":"endDaySelector"]);if(d[c]["allowRange"]&&b){G=e(d[c]["monthSelector"]);y=e(d[c]["daySelector"])}}}todays_date=new Date();if(d[c]["inputType"]=="text"){if(u.length==1){if(d[c]["dateFormat"]==1){if(parseInt(u.val().substring(3,5),10)<=get_days_in_month(parseInt(u.val().substring(6,10)),parseInt(u.val().substring(0,2),10))&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(u.val())){C=new Date();C.setFullYear(u.val().substring(6,10),parseInt(u.val().substring(0,2),10)-1,parseInt(u.val().substring(3,5),10));C.setHours(0,0,0,0);if(d[c]["allowRange"]){if(parseInt(k.val().substring(3,5),10)<=get_days_in_month(parseInt(k.val().substring(6,10)),parseInt(k.val().substring(0,2),10))&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(k.val())){g=new Date();g.setFullYear(k.val().substring(6,10),parseInt(k.val().substring(0,2),10)-1,parseInt(k.val().substring(3,5),10));g.setHours(0,0,0,0)}}}}else{if(d[c]["dateFormat"]==2){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(u.val())){var p,B,l;p=u.val().substring(u.val().length-4,u.val().length);B=get_month_number(u.val().substring(0,3));l=u.val().substring(u.val().indexOf(" ")+1,u.val().indexOf(","));C=new Date();C.setFullYear(p,B-1,l);C.setHours(0,0,0,0);if(d[c]["allowRange"]){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(k.val())){var A,q,H;A=k.val().substring(k.val().length-4,k.val().length);q=get_month_number(k.val().substring(0,3));H=k.val().substring(k.val().indexOf(" ")+1,k.val().indexOf(","));g=new Date();g.setFullYear(A,q-1,H);g.setHours(0,0,0,0)}}}}else{if(d[c]["dateFormat"]==3){if(parseInt(u.val().substring(0,2),10)<=get_days_in_month(parseInt(u.val().substring(6,10)),parseInt(u.val().substring(3,5),10))&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(u.val())){C=new Date();C.setFullYear(u.val().substring(6,10),parseInt(u.val().substring(3,5),10)-1,parseInt(u.val().substring(0,2),10));C.setHours(0,0,0,0);if(d[c]["allowRange"]){if(parseInt(k.val().substring(0,2),10)<=get_days_in_month(parseInt(k.val().substring(6,10)),parseInt(k.val().substring(3,5),10))&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(k.val())){g=new Date();g.setFullYear(k.val().substring(6,10),parseInt(k.val().substring(3,5),10)-1,parseInt(k.val().substring(0,2),10));g.setHours(0,0,0,0)}}}}}}}}else{if(d[c]["inputType"]=="dropdown"){if(w.length==1&&F.length==1){if(parseInt(F.val(),10)<=get_days_in_month(w.val().substring(0,4),parseInt(w.val().substring(5,7),10))){C=new Date();C.setFullYear(w.val().substring(0,4),parseInt(w.val().substring(5,7),10)-1,parseInt(F.val(),10));C.setHours(0,0,0,0)}}}}var t=e("#ctc-calendar-dropdown");for(var x=1;x<=3;x++){var v;if(x==1){v="#ctc-calendar-first"}else{if(x==2){v="#ctc-calendar-second"}else{if(x==3){v="#ctc-calendar-third"}}}if(x==1){t.val(r.getFullYear()+"-"+(r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1))}else{if(x==2||x==3){e(v+"-month-name").text(get_month_name(r.getMonth()+1)+" "+r.getFullYear())}}var o="",j=0;if(r.getDay()>0){o+='<div class="ctc-calendar-week ctc-calendar-week-one">';for(day=1;day<=r.getDay();day++){o+='<div class="ctc-calendar-blank ctc-calendar-'+get_day_name(++j%7).toLowerCase()+'" />'}}var z,n;z=new Date();z.setFullYear(d[c]["minimumDate"].getFullYear(),d[c]["minimumDate"].getMonth(),d[c]["minimumDate"].getDate());if(b){if(d[c]["inputType"]=="text"){var k;k=e(d[c]["dateSelector"]);if(d[c]["dateFormat"]==1){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(k.val())){z.setFullYear(k.val().substring(6,10),parseInt(k.val().substring(0,2),10)-1,parseInt(k.val().substring(3,5),10)+d[c]["minimumRange"])}else{z.setFullYear(z.getFullYear(),z.getMonth(),z.getDate()+d[c]["minimumRange"])}}else{if(d[c]["dateFormat"]==2){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(k.val())){var D,E,h;D=k.val().substring(k.val().length-4,k.val().length);E=get_month_number(k.val().substring(0,3));h=k.val().substring(k.val().indexOf(" ")+1,k.val().indexOf(","));z.setFullYear(D,E-1,parseInt(h)+d[c]["minimumRange"])}else{z.setFullYear(z.getFullYear(),z.getMonth(),z.getDate()+d[c]["minimumRange"])}}else{if(d[c]["dateFormat"]==3){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(k.val())){z.setFullYear(k.val().substring(6,10),parseInt(k.val().substring(3,5),10)-1,parseInt(k.val().substring(0,2),10)+d[c]["minimumRange"])}else{z.setFullYear(z.getFullYear(),z.getMonth(),z.getDate()+d[c]["minimumRange"])}}}}}else{if(d[c]["inputType"]=="dropdown"){var G,y;G=e(d[c]["monthSelector"]);y=e(d[c]["daySelector"]);if(G.length==1&&y.length==1&&G.val().length>0&&y.val().length>0){z.setFullYear(G.val().substring(0,4),parseInt(G.val().substring(5,7),10)-1,parseInt(y.val(),10)+d[c]["minimumRange"])}else{z.setFullYear(z.getFullYear(),z.getMonth(),z.getDate()+d[c]["minimumRange"])}}}}z.setHours(0,0,0,0);n=new Date();n.setFullYear(d[c]["maximumDate"].getFullYear(),d[c]["maximumDate"].getMonth(),d[c]["maximumDate"].getDate());if(d[c]["allowRange"]){var i;if(b){if(d[c]["inputType"]=="text"){if(d[c]["dateFormat"]==1){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(k.val())){i=new Date();i.setFullYear(k.val().substring(6,10),parseInt(k.val().substring(0,2),10)-1,1);if(get_days_in_month(i.getFullYear(),i.getMonth()+1)<parseInt(k.val().substring(3,5),10)){i.setFullYear(k.val().substring(6,10),parseInt(k.val().substring(0,2),10)-1,get_days_in_month(i.getFullYear(),i.getMonth()+1))}else{i.setFullYear(k.val().substring(6,10),parseInt(k.val().substring(0,2),10)-1,parseInt(k.val().substring(3,5),10))}}}else{if(d[c]["dateFormat"]==2){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(k.val())){var D,E,h;D=k.val().substring(k.val().length-4,k.val().length);E=get_month_number(k.val().substring(0,3));h=k.val().substring(k.val().indexOf(" ")+1,k.val().indexOf(","));i=new Date();i.setFullYear(D,E-1,1);if(get_days_in_month(i.getFullYear(),i.getMonth()+1)<h){i.setFullYear(D,E-1,get_days_in_month(i.getFullYear(),i.getMonth()+1))}else{i.setFullYear(D,E-1,h)}}}else{if(d[c]["dateFormat"]==3){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(k.val())){i=new Date();i.setFullYear(k.val().substring(6,10),parseInt(k.val().substring(3,5),10)-1,1);if(get_days_in_month(i.getFullYear(),i.getMonth()+1)<parseInt(k.val().substring(0,2),10)){i.setFullYear(k.val().substring(6,10),parseInt(k.val().substring(3,5),10)-1,get_days_in_month(i.getFullYear(),i.getMonth()+1))}else{i.setFullYear(k.val().substring(6,10),parseInt(k.val().substring(3,5),10)-1,parseInt(k.val().substring(0,2),10))}}}}}}else{if(d[c]["inputType"]=="dropdown"){if(/([0-9]{4})-([0-9]{2})/.test(G.val())&&y.val().length>0){i=new Date();i.setFullYear(G.val().substring(0,4),parseInt(G.val().substring(5,7),10)-1,1);if(get_days_in_month(i.getFullYear(),i.getMonth()+1)<parseInt(F.val(),10)){i.setFullYear(G.val().substring(0,4),parseInt(G.val().substring(5,7),10)-1,get_days_in_month(i.getFullYear(),i.getMonth()+1))}else{i.setFullYear(G.val().substring(0,4),parseInt(G.val().substring(5,7),10)-1,parseInt(y.val(),10))}}}}}if(!b){n.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()-d[c]["minimumRange"])}else{if(typeof i!="undefined"){n.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()+d[c]["maximumRange"])}}if(b&&n>d[c]["maximumDate"]){n=d[c]["maximumDate"]}}n.setHours(23,59,59,999);for(day=1;day<=42-r.getDay();day++){if(j%7==0){if(o.length>0){o+="</div>"}o+='<div class="ctc-calendar-week ctc-calendar-week-'+number_to_text(Math.round(j/7)+1).toLowerCase()+'">'}if(day<=get_days_in_month(r.getFullYear(),r.getMonth()+1)){var I,s;I=new Date();I.setFullYear(r.getFullYear(),r.getMonth(),day);s="";if(I>=z&&I<=n){s+=" ctc-calendar-selectable"}if(I.getFullYear()==todays_date.getFullYear()&&I.getMonth()==todays_date.getMonth()&&I.getDate()==todays_date.getDate()){s+=" ctc-calendar-today"}if(C){if(I.getFullYear()==C.getFullYear()&&I.getMonth()==C.getMonth()&&I.getDate()==C.getDate()){s+=" ctc-calendar-active"}}if(g){if(I.getFullYear()==g.getFullYear()&&I.getMonth()==g.getMonth()&&I.getDate()==g.getDate()){s+=" ctc-calendar-other-active"}}if(C&&g&&C!=g){if((C<g&&I>=C&&I<=g)||(C>g&&I<=C&&I>=g)){s+=" ctc-calendar-in-range"}}o+='<div class="ctc-calendar-'+get_day_name((j++%7)+1).toLowerCase()+s+'">';if(I>=z&&I<=n){o+='<a href="#" title="'+get_month_name(r.getMonth()+1)+" "+day+", "+r.getFullYear()+'" id="ctc-calendar-'+r.getFullYear()+"-"+(r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1)+"-"+day+'">'}o+=day;if(I>=d[c]["minimumDate"]&&I<=n){o+="</a>"}o+="</div>"}else{o+='<div class="ctc-calendar-blank ctc-calendar-'+get_day_name((j++%7)+1).toLowerCase()+'" />'}}o+="</div>";e(v+" div.ctc-calendar-week").remove();e(v).append(o);if(e(v+" div.ctc-calendar-week-five div.ctc-calendar-blank").length==7){e(v).addClass("ctc-calendar-four-weeks").removeClass("ctc-calendar-five-weeks").removeClass("ctc-calendar-six-weeks")}else{if(e(v+" div.ctc-calendar-week-six div.ctc-calendar-blank").length==7){e(v).removeClass("ctc-calendar-four-weeks").addClass("ctc-calendar-five-weeks").removeClass("ctc-calendar-six-weeks")}else{e(v).removeClass("ctc-calendar-four-weeks").removeClass("ctc-calendar-five-weeks").addClass("ctc-calendar-six-weeks")}}r.setFullYear(r.getFullYear(),r.getMonth()+1,1)}e("#ctc-calendar div.ctc-calendar-week a").click(function(){var J=new Date();J.setFullYear(this.id.substring(13,17),parseInt(this.id.substring(18,20),10)-1,this.id.substring(21,23));e.ctcCalendar.set_new_date(J,b);if(!b&&d[c]["allowRange"]){e.ctcCalendar.check_end_date(c)}e.ctcCalendar.hide();return false});var m=new Date();m.setFullYear(t.val().substring(0,4),parseInt(t.val().substring(5,7),10)-2,1);if(t.find("option[value="+m.getFullYear()+"-"+(m.getMonth()+1<10?"0"+(m.getMonth()+1):m.getMonth()+1)+"]").length==0){e("#ctc-calendar a.ctc-calendar-previous-month").fadeTo(1,0.33)}else{e("#ctc-calendar a.ctc-calendar-previous-month").fadeTo(1,1)}m.setFullYear(t.val().substring(0,4),parseInt(t.val().substring(5,7),10),1);if(t.find("option[value="+m.getFullYear()+"-"+(m.getMonth()+1<10?"0"+(m.getMonth()+1):m.getMonth()+1)+"]").length==0){e("#ctc-calendar a.ctc-calendar-next-month").fadeTo(1,0.33)}else{e("#ctc-calendar a.ctc-calendar-next-month").fadeTo(1,1)}};e.ctcCalendar.set_new_date=function(l,i){if(i===undefined){i=false}if(d[c]["inputType"]=="text"){var g=e(d[c][!i?"dateSelector":"endDateSelector"]);if(l=="blank"){if(d[c]["dateFormat"]==1){g.val("mm/dd/yyyy").change()}else{if(d[c]["dateFormat"]==2){g.val("Select a Date").change()}else{if(d[c]["dateFormat"]==3){g.val("dd/mm/yyyy").change()}}}}else{if(d[c]["dateFormat"]==1){g.val((l.getMonth()+1<10?"0"+(l.getMonth()+1):l.getMonth()+1)+"/"+(l.getDate()<10?"0"+l.getDate():l.getDate())+"/"+l.getFullYear()).change()}else{if(d[c]["dateFormat"]==2){g.val(get_month_name(l.getMonth()+1,false)+" "+l.getDate()+", "+l.getFullYear()).change()}else{if(d[c]["dateFormat"]==3){g.val((l.getDate()<10?"0"+l.getDate():l.getDate())+"/"+(l.getMonth()+1<10?"0"+(l.getMonth()+1):l.getMonth()+1)+"/"+l.getFullYear()).change()}}}}}else{if(d[c]["inputType"]=="dropdown"){var k,m,h,j;k=e(d[c][!i?"monthSelector":"endMonthSelector"]);if(l=="blank"){h=""}else{h=l.getFullYear()+"-"+(l.getMonth()+1<10?"0"+(l.getMonth()+1):l.getMonth()+1)}m=e(d[c][!i?"daySelector":"endDaySelector"]);if(l=="blank"){j=""}else{j=l.getDate()<10?"0"+l.getDate():l.getDate()}if(k.find("option[value="+h+"]").length>0&&(l=="blank"||parseInt(j,10)<=get_days_in_month(l.getFullYear(),l.getMonth()+1))){k.val(h).change();e.ctcCalendar.update_day_selectors(c,i);m.val(j).change()}}}};e.ctcCalendar.check_end_date=function(s){if(d[s]["inputType"]=="text"){var x,w;x=e(d[s]["dateSelector"]);w=e(d[s]["endDateSelector"]);if(x.length==1&&w.length==1){if(d[s]["dateFormat"]==1){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(x.val())){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(w.val())){var j,i,q,k;j=new Date();j.setFullYear(x.val().substring(6,10),parseInt(x.val().substring(0,2),10)-1,parseInt(x.val().substring(3,5),10));j.setHours(0,0,0,0);i=new Date();i.setFullYear(w.val().substring(6,10),parseInt(w.val().substring(0,2),10)-1,parseInt(w.val().substring(3,5),10));i.setHours(0,0,0,0);q=new Date();q.setFullYear(j.getFullYear(),j.getMonth(),j.getDate()+d[s]["minimumRange"]);q.setHours(0,0,0,0);k=new Date();k.setFullYear(j.getFullYear(),j.getMonth(),j.getDate()+d[s]["maximumRange"]);k.setHours(0,0,0,0);if(i<q||i>k){if(i>k){i.setFullYear(k.getFullYear(),k.getMonth(),k.getDate())}else{i.setFullYear(j.getFullYear(),j.getMonth(),j.getDate()+d[s]["defaultRange"])}var z=c;c=s;e.ctcCalendar.set_new_date(i,true);c=z}}else{if(d[s]["autoSetEndDate"]){var h;h=new Date();h.setFullYear(x.val().substring(6,10),parseInt(x.val().substring(0,2),10)-1,parseInt(x.val().substring(3,5),10)+d[s]["defaultRange"]);var z=c;c=s;e.ctcCalendar.set_new_date(h,true);c=z}}}}else{if(d[s]["dateFormat"]==2){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(x.val())){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(w.val())){var u,g,y,r,o,n;u=x.val().substring(x.val().length-4,x.val().length);g=get_month_number(x.val().substring(0,3));y=x.val().substring(x.val().indexOf(" ")+1,x.val().indexOf(","));r=w.val().substring(w.val().length-4,w.val().length);o=get_month_number(w.val().substring(0,3));n=w.val().substring(w.val().indexOf(" ")+1,w.val().indexOf(","));var j,i,t;j=new Date();j.setFullYear(u,g-1,y);i=new Date();i.setFullYear(r,o-1,n);i.setHours(0,0,0,0);t=new Date();t.setFullYear(j.getFullYear(),j.getMonth(),j.getDate()+d[s]["minimumRange"]);t.setHours(0,0,0,0);if(t>i){t.setFullYear(j.getFullYear(),j.getMonth(),j.getDate()+d[s]["defaultRange"]);var z=c;c=s;e.ctcCalendar.set_new_date(t,true);c=z}}else{if(d[s]["autoSetEndDate"]){var u,g,y,r,o,n;u=x.val().substring(x.val().length-4,x.val().length);g=get_month_number(x.val().substring(0,3));y=x.val().substring(x.val().indexOf(" ")+1,x.val().indexOf(","));var h;h=new Date();h.setFullYear(u,g-1,parseInt(y,10)+d[s]["defaultRange"]);var z=c;c=s;e.ctcCalendar.set_new_date(h,true);c=z}}}}else{if(d[s]["dateFormat"]==3){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(x.val())){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(w.val())){var j,i,t;j=new Date();j.setFullYear(x.val().substring(6,10),parseInt(x.val().substring(3,5),10)-1,parseInt(x.val().substring(0,2),10));i=new Date();i.setFullYear(w.val().substring(6,10),parseInt(w.val().substring(3,5),10)-1,parseInt(w.val().substring(0,2),10));i.setHours(0,0,0,0);t=new Date();t.setFullYear(j.getFullYear(),j.getMonth(),j.getDate()+d[s]["minimumRange"]);t.setHours(0,0,0,0);if(t>i){t.setFullYear(j.getFullYear(),j.getMonth(),j.getDate()+d[s]["defaultRange"]);var z=c;c=s;e.ctcCalendar.set_new_date(t,true);c=z}}else{if(d[s]["autoSetEndDate"]){var h;h=new Date();h.setFullYear(x.val().substring(6,10),parseInt(x.val().substring(3,5),10)-1,parseInt(x.val().substring(0,2),10)+d[s]["defaultRange"]);var z=c;c=s;e.ctcCalendar.set_new_date(h,true);c=z}}}}}}}}else{if(d[s]["inputType"]=="dropdown"){var v,p,l,m;v=e(d[s]["monthSelector"]);p=e(d[s]["daySelector"]);l=e(d[s]["endMonthSelector"]);m=e(d[s]["endDaySelector"]);if(v.length==1&&p.length==1&&l.length==1&&m.length==1){if(/([0-9]{4})-([0-9]{2})/.test(v.val())&&p.val().length>0){var j,i,t;j=new Date();j.setFullYear(v.val().substring(0,4),parseInt(v.val().substring(5,7),10)-1,parseInt(p.val(),10));i=new Date();i.setFullYear(l.val().substring(0,4),parseInt(l.val().substring(5,7),10)-1,parseInt(m.val(),10));i.setHours(0,0,0,0);t=new Date();t.setFullYear(j.getFullYear(),j.getMonth(),j.getDate()+d[s]["minimumRange"]);t.setHours(0,0,0,0);if(t>i){t.setFullYear(j.getFullYear(),j.getMonth(),j.getDate()+d[s]["defaultRange"]);var z=c;c=s;e.ctcCalendar.set_new_date(t,true);c=z}}}}}};e.ctcCalendar.add_to_dom=function(){var g="";if(e.browser.msie&&parseInt(e.browser.version)===6){g+='<iframe id="ctc-calendar-iframe" frameborder="0" />'}g+='<div id="ctc-calendar-modal-background" /><div id="ctc-calendar"><div id="ctc-calendar-header"><div id="ctc-calendar-header-inner"><a href="#" title="Hide Calendar" id="ctc-calendar-hide">Hide Calendar</a><span>Powered by</span> <a href="https://github.com/ctcCalendar/ctcCalendar" target="_blank" title="ctcCalendar" id="ctc-calendar-powered-by">ctcCalendar</a></div></div><div id="ctc-calendar-body"><div id="ctc-calendar-first"><div class="ctc-calendar-month"><div class="ctc-calendar-month-inner-1"><div class="ctc-calendar-month-inner-2"><select id="ctc-calendar-dropdown" /><a href="#" title="Next Month" class="ctc-calendar-next-month"><span class="ctc-calendar-next-month-inner">Next Month</span></a><a href="#" title="Previous Month" class="ctc-calendar-previous-month"><span class="ctc-calendar-previous-month-inner">Previous Month</span></a></div></div></div><div class="ctc-calendar-days"><div class="ctc-calendar-sunday">'+get_day_name(1,false).substring(0,1)+'</div><div class="ctc-calendar-monday">'+get_day_name(2,false).substring(0,1)+'</div><div class="ctc-calendar-tuesday">'+get_day_name(3,false).substring(0,1)+'</div><div class="ctc-calendar-wednesday">'+get_day_name(4,false).substring(0,1)+'</div><div class="ctc-calendar-thursday">'+get_day_name(5,false).substring(0,1)+'</div><div class="ctc-calendar-friday">'+get_day_name(6,false).substring(0,1)+'</div><div class="ctc-calendar-saturday">'+get_day_name(7,false).substring(0,1)+'</div></div></div><div id="ctc-calendar-second"><div class="ctc-calendar-month"><div class="ctc-calendar-month-inner" colspan="5"><strong id="ctc-calendar-second-month-name" /><a href="#" title="Next Month" class="ctc-calendar-next-month">Next Month</a><a href="#" title="Previous Month" class="ctc-calendar-previous-month">Previous Month</a></div></div><div class="ctc-calendar-days"><div class="ctc-calendar-sunday">'+get_day_name(1,false).substring(0,1)+'</div><div class="ctc-calendar-monday">'+get_day_name(2,false).substring(0,1)+'</div><div class="ctc-calendar-tuesday">'+get_day_name(3,false).substring(0,1)+'</div><div class="ctc-calendar-wednesday">'+get_day_name(4,false).substring(0,1)+'</div><div class="ctc-calendar-thursday">'+get_day_name(5,false).substring(0,1)+'</div><div class="ctc-calendar-friday">'+get_day_name(6,false).substring(0,1)+'</div><div class="ctc-calendar-saturday">'+get_day_name(7,false).substring(0,1)+'</div></div></div><div id="ctc-calendar-third"><div class="ctc-calendar-month"><div class="ctc-calendar-month-inner" colspan="5"><strong id="ctc-calendar-third-month-name" /><a href="#" title="Next Month" class="ctc-calendar-next-month">Next Month</a><a href="#" title="Previous Month" class="ctc-calendar-previous-month">Previous Month</a></div></div><div class="ctc-calendar-days"><div class="ctc-calendar-sunday">'+get_day_name(1,false).substring(0,1)+'</div><div class="ctc-calendar-monday">'+get_day_name(2,false).substring(0,1)+'</div><div class="ctc-calendar-tuesday">'+get_day_name(3,false).substring(0,1)+'</div><div class="ctc-calendar-wednesday">'+get_day_name(4,false).substring(0,1)+'</div><div class="ctc-calendar-thursday">'+get_day_name(5,false).substring(0,1)+'</div><div class="ctc-calendar-friday">'+get_day_name(6,false).substring(0,1)+'</div><div class="ctc-calendar-saturday">'+get_day_name(7,false).substring(0,1)+"</div></div></div></div></div>";e("body").prepend(g);e("#ctc-calendar-hide").click(function(){e.ctcCalendar.hide();return false});e("#ctc-calendar-dropdown").change(function(){if(/([0-9]{4})-([0-9]{2})/.test(e(this).val())){var h=new Date();h.setFullYear(e(this).val().substring(0,4),parseInt(e(this).val().substring(5,7),10)-1,1);e.ctcCalendar.update_calendars(h)}});e("#ctc-calendar a.ctc-calendar-previous-month,#ctc-calendar a.ctc-calendar-next-month").click(function(){if(/([0-9]{4})-([0-9]{2})/.test(e("#ctc-calendar-dropdown").val())){var h=new Date();if(e(this).hasClass("ctc-calendar-previous-month")){h.setFullYear(e("#ctc-calendar-dropdown").val().substring(0,4),parseInt(e("#ctc-calendar-dropdown").val().substring(5,7),10)-1-1,1)}else{if(e(this).hasClass("ctc-calendar-next-month")){h.setFullYear(e("#ctc-calendar-dropdown").val().substring(0,4),parseInt(e("#ctc-calendar-dropdown").val().substring(5,7),10)-1+1,1)}}var i=h.getFullYear()+"-"+(h.getMonth()+1<10?"0"+(h.getMonth()+1):h.getMonth()+1);if(e("#ctc-calendar-dropdown option[value="+i+"]").length>0){e("#ctc-calendar-dropdown").val(i).change()}}return false})}})(jQuery);