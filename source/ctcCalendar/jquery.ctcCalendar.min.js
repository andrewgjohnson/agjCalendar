(function(e){if(!e.browser){(function(r){var q,s=navigator.userAgent||"";r.uaMatch=function(v){v=v.toLowerCase();var u=/(chrome)[ \/]([\w.]+)/.exec(v)||/(webkit)[ \/]([\w.]+)/.exec(v)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(v)||/(msie) ([\w.]+)/.exec(v)||v.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(v)||[];return{browser:u[1]||"",version:u[2]||"0"}};q=r.uaMatch(s);r.browser={};if(q.browser){r.browser[q.browser]=true;r.browser.version=q.version}if(r.browser.webkit){r.browser.safari=true}})(jQuery)}var p=new Array();var k=-1,b=false;var n="";var h="";var i=function(r){var q=r.height();if(!isNaN(parseInt(r.css("borderTopWidth"),10))){q+=parseInt(r.css("borderTopWidth"),10)}if(!isNaN(parseInt(r.css("borderBottomWidth"),10))){q+=parseInt(r.css("borderBottomWidth"),10)}if(!isNaN(parseInt(r.css("padding-top"),10))){q+=parseInt(r.css("padding-top"),10)}if(!isNaN(parseInt(r.css("padding-bottom"),10))){q+=parseInt(r.css("padding-bottom"),10)}if(!isNaN(parseInt(r.css("margin-top"),10))){q+=parseInt(r.css("margin-top"),10)}if(!isNaN(parseInt(r.css("margin-bottom"),10))){q+=parseInt(r.css("margin-bottom"),10)}return q};var m=function(q){var r=q.width();if(!isNaN(parseInt(q.css("borderLeftWidth"),10))){r+=parseInt(q.css("borderLeftWidth"),10)}if(!isNaN(parseInt(q.css("borderRightWidth"),10))){r+=parseInt(q.css("borderRightWidth"),10)}if(!isNaN(parseInt(q.css("padding-left"),10))){r+=parseInt(q.css("padding-left"),10)}if(!isNaN(parseInt(q.css("padding-right"),10))){r+=parseInt(q.css("padding-right"),10)}if(!isNaN(parseInt(q.css("margin-left"),10))){r+=parseInt(q.css("margin-left"),10)}if(!isNaN(parseInt(q.css("margin-right"),10))){r+=parseInt(q.css("margin-right"),10)}return r};var g=function(q,s,r){if(s===undefined){s=true}if(r===undefined){r="en"}if(r=="en"){if(q==1){return s?"January":"Jan"}else{if(q==2){return s?"February":"Feb"}else{if(q==3){return s?"March":"Mar"}else{if(q==4){return s?"April":"Apr"}else{if(q==5){return"May"}else{if(q==6){return s?"June":"Jun"}else{if(q==7){return s?"July":"Jul"}else{if(q==8){return s?"August":"Aug"}else{if(q==9){return s?"September":"Sep"}else{if(q==10){return s?"October":"Oct"}else{if(q==11){return s?"November":"Nov"}else{if(q==12){return s?"December":"Dec"}}}}}}}}}}}}}return""};var o=function(q,r){if(r===undefined){r="en"}if(r=="en"){if(q=="Jan"||q=="January"){return 1}else{if(q=="Feb"||q=="February"){return 2}else{if(q=="Mar"||q=="March"){return 3}else{if(q=="Apr"||q=="April"){return 4}else{if(q=="May"){return 5}else{if(q=="Jun"||q=="June"){return 6}else{if(q=="Jul"||q=="July"){return 7}else{if(q=="Aug"||q=="August"){return 8}else{if(q=="Sep"||q=="September"){return 9}else{if(q=="Oct"||q=="October"){return 10}else{if(q=="Nov"||q=="November"){return 11}else{if(q=="Dec"||q=="December"){return 12}}}}}}}}}}}}}return""};var c=function(q,r){if(r===undefined){r="en"}if(r=="en"){if(!p[k]["startWeekOnMonday"]){if(q==1){return"Sunday"}else{if(q==2){return"Monday"}else{if(q==3){return"Tuesday"}else{if(q==4){return"Wednesday"}else{if(q==5){return"Thursday"}else{if(q==6){return"Friday"}else{if(q==7){return"Saturday"}}}}}}}}else{if(q==1){return"Monday"}else{if(q==2){return"Tuesday"}else{if(q==3){return"Wednesday"}else{if(q==4){return"Thursday"}else{if(q==5){return"Friday"}else{if(q==6){return"Saturday"}else{if(q==7){return"Sunday"}}}}}}}}}return""};var d=function(q){if(q===undefined){q="en"}if(q=="en"){return""}return""};var a=function(q){if(q===undefined){q="en"}if(q=="en"){return""}return""};var j=function(q,r){if(r==1||r==3||r==5||r==7||r==8||r==10||r==12){return 31}else{if(r==4||r==6||r==9||r==11){return 30}else{if(r==2){return(q%4==0&&q%100!=0)||q%400==0?29:28}}}return 0};var f=function(q){if(!isNaN(q)){q=parseInt(q,10)}switch(q){case 0:return"Zero";case 1:return"One";case 2:return"Two";case 3:return"Three";case 4:return"Four";case 5:return"Five";case 6:return"Six";case 7:return"Seven";case 8:return"Eight";case 9:return"Nine";case 10:return"Ten"}return""};var l=function(){var q="";var r=(function(){if(p[k]["dayNameFormat"]=="full"){return Number.MAX_SAFE_INTEGER}else{if(p[k]["dayNameFormat"]=="medium"){return 3}else{return 1}}})();if(!p[k]["startWeekOnMonday"]){q+='<div class="ctc-calendar-sunday">'+c(1).substring(0,r)+'</div><div class="ctc-calendar-monday">'+c(2).substring(0,r)+'</div><div class="ctc-calendar-tuesday">'+c(3).substring(0,r)+'</div><div class="ctc-calendar-wednesday">'+c(4).substring(0,r)+'</div><div class="ctc-calendar-thursday">'+c(5).substring(0,r)+'</div><div class="ctc-calendar-friday">'+c(6).substring(0,r)+'</div><div class="ctc-calendar-saturday">'+c(7).substring(0,r)+"</div>"}else{q+='<div class="ctc-calendar-monday">'+c(1).substring(0,r)+'</div><div class="ctc-calendar-tuesday">'+c(2).substring(0,r)+'</div><div class="ctc-calendar-wednesday">'+c(3).substring(0,r)+'</div><div class="ctc-calendar-thursday">'+c(4).substring(0,r)+'</div><div class="ctc-calendar-friday">'+c(5).substring(0,r)+'</div><div class="ctc-calendar-saturday">'+c(6).substring(0,r)+'</div><div class="ctc-calendar-sunday">'+c(7).substring(0,r)+"</div>"}return q};e(document).resize(function(){e.ctcCalendar.set_position()}).click(function(r){if(e("#ctc-calendar").length>0&&k>=0){if(p[k]["inputType"]=="text"){var q=p[k][!b?"dateSelector":"endDateSelector"];if(!(e(r.target).parents("#ctc-calendar").length>0||e(r.target).attr("id")=="ctc-calendar")&&!(e(r.target).parents(q).length>0||e(r.target).attr("id")==q.substring(1))){e.ctcCalendar.hide()}}else{if(p[k]["inputType"]=="dropdown"){if(!(e(r.target).parents("#ctc-calendar").length>0||e(r.target).attr("id")=="ctc-calendar")){e.ctcCalendar.hide()}}}}return true}).keyup(function(q){if(q.keyCode==27&&k>=0&&(p[k]["calendarDisplay"]=="modal"||p[k]["calendarDisplay"]=="full")&&e("#ctc-calendar").length>0){e("*:focus").blur();e.ctcCalendar.hide();return false}return true});e(window).scroll(function(){if(k>=0){e.ctcCalendar.set_position()}});e(window).resize(function(){if(k>=0){e.ctcCalendar.set_position()}});e.ctcCalendar=function(s){var J;J=new Array();J.calendarCount=1;if(s.calendarCount){if(!isNaN(s.calendarCount)){if(parseInt(s.calendarCount,10)>=1&&parseInt(s.calendarCount,10)<=3){J.calendarCount=parseInt(s.calendarCount,10)}}}J.overwriteMonthOptions=true;if(s.overwriteMonthOptions||s.overwriteMonthOptions===false){if(s.overwriteMonthOptions==false){J.overwriteMonthOptions=false}}J.overwriteDayOptions=true;if(s.overwriteDayOptions||s.overwriteDayOptions===false){if(s.overwriteDayOptions==false){J.overwriteDayOptions=false}}J.autoSetEndDate=false;if(s.autoSetEndDate){if(s.autoSetEndDate===true){J.autoSetEndDate=true}}J.allowBlankDates=false;if(s.allowBlankDates){if(s.allowBlankDates===true){J.allowBlankDates=true}}J.startWeekOnMonday=false;if(s.startWeekOnMonday){if(s.startWeekOnMonday===true){J.startWeekOnMonday=true}}J.dayNameFormat="short";if(s.dayNameFormat){if(s.dayNameFormat=="short"){J.dayNameFormat="short"}else{if(s.dayNameFormat=="medium"){J.dayNameFormat="medium"}else{if(s.dayNameFormat=="full"){J.dayNameFormat="full"}}}}J.dateFormat=1;if(s.dateFormat){if(s.dateFormat==2||s.dateFormat==3||s.dateFormat==4){J.dateFormat=s.dateFormat}}J.minimumDate=new Date();if(s.minimumDate){if(/([0-9]{4})-([0-9]{2})-([0-9]{2})/.test(s.minimumDate)){var w,v,t,I;w=s.minimumDate.substring(0,4);v=s.minimumDate.substring(5,7);t=s.minimumDate.substring(8,10);I=new Date();I.setFullYear(w,parseInt(v,10)-1,t);J.minimumDate=I}}J.minimumDate.setHours(0,0,0,0);J.maximumDate=new Date();J.maximumDate.setFullYear(J.maximumDate.getFullYear()+1,J.maximumDate.getMonth(),J.maximumDate.getDate());if(s.maximumDate){if(/([0-9]{4})-([0-9]{2})-([0-9]{2})/.test(s.maximumDate)){var O,u,L,x;O=s.maximumDate.substring(0,4);u=s.maximumDate.substring(5,7);L=s.maximumDate.substring(8,10);x=new Date();x.setFullYear(O,parseInt(u,10)-1,L);if(x>=J.minimumDate){J.maximumDate=x}}}J.maximumDate.setHours(23,59,59,999);J.defaultDate=new Date();if(s.defaultDate){if(/([0-9]{4})-([0-9]{2})-([0-9]{2})/.test(s.defaultDate)){var P,r,M,y;P=s.defaultDate.substring(0,4);r=s.defaultDate.substring(5,7);M=s.defaultDate.substring(8,10);y=new Date();y.setFullYear(P,parseInt(r,10)-1,M);if(y>=J.minimumDate&&y<=J.maximumDate){J.defaultDate=y}}else{if(J.allowBlankDates&&s.defaultDate=="blank"){J.defaultDate=s.defaultDate}}}J.allowRange=false;if(s.allowRange){if(s.allowRange===true){J.allowRange=true}}if(s.allowRange){var F,A;A=new Date();A.setFullYear(J.minimumDate.getFullYear(),J.minimumDate.getMonth(),J.minimumDate.getDate());F=0;while(A<=J.maximumDate){F++;A.setFullYear(A.getFullYear(),A.getMonth(),A.getDate()+1)}J.minimumRange=F==0?0:1;if(s.minimumRange||s.minimumRange===0){if(!isNaN(s.minimumRange)){if(parseInt(s.minimumRange,10)<=F){J.minimumRange=s.minimumRange}}}J.maximumRange=F==0?0:F;if(s.maximumRange||s.maximumRange===0){if(!isNaN(s.maximumRange)){if(parseInt(s.maximumRange,10)<=F){J.maximumRange=s.maximumRange}}}J.defaultRange=F==0?0:1;if(s.defaultRange||s.defaultRange===0){if(!isNaN(s.defaultRange)){if(parseInt(s.defaultRange,10)>=J.minimumRange&&parseInt(s.defaultRange,10)<=J.maximumRange){J.defaultRange=s.defaultRange}}}}else{J.defaultRange=0;J.minimumRange=0;J.maximumRange=0}J.calendarDisplay="inline";if(s.calendarDisplay){if(s.calendarDisplay=="modal"||s.calendarDisplay=="full"){J.calendarDisplay=s.calendarDisplay}}J.inputType="text";if(s.inputType){if(s.inputType=="dropdown"){J.inputType=s.inputType}}if(J.inputType=="text"){var q,E,D,N;q=e(s.expanderSelector);E=e(s.dateSelector);if(s.allowRange){D=e(s.endExpanderSelector);N=e(s.endDateSelector)}if(q.length>0&&E.length==1&&(!s.allowRange||(D.length>0&&N.length==1))){J.expanderSelector=s.expanderSelector;J.dateSelector=s.dateSelector;if(s.allowRange){J.endExpanderSelector=s.endExpanderSelector;J.endDateSelector=s.endDateSelector}var z=p.length;p[z]=J;var Q=k;k=z;e.ctcCalendar.set_new_date(J.defaultDate);k=Q;display_calendar=function(){if(k!=z||b||e(E).is(":focus")){k=z;b=false;e.ctcCalendar.show()}else{e.ctcCalendar.hide()}return false};q.click(display_calendar);E.focus(display_calendar).keydown(function(R){if(R.keyCode==9){if(s.allowRange){setTimeout(function(){if(e(":focus")[0]!=N[0]){e.ctcCalendar.hide()}},1)}}return true})}if(s.allowRange){Q=k;var H;if(J.defaultDate=="blank"){H="blank"}else{H=new Date();H.setFullYear(J.defaultDate.getFullYear(),J.defaultDate.getMonth(),J.defaultDate.getDate()+J.defaultRange)}k=z;b=true;e.ctcCalendar.set_new_date(H,true);k=Q;b=false;E.blur(function(){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(e(this).val())){e.ctcCalendar.check_end_date(z)}});N.keydown(function(R){if(R.keyCode==9){setTimeout(function(){if(e(":focus")[0]!=E[0]){e.ctcCalendar.hide()}},1)}return true});display_end_calendar=function(){if(k!=z||!b||e(N).is(":focus")){k=z;b=true;e.ctcCalendar.show()}else{e.ctcCalendar.hide()}return false};D.click(display_end_calendar);N.focus(display_end_calendar)}}else{if(J.inputType=="dropdown"){var q,G,K,D,B,C;q=e(s.expanderSelector);G=e(s.monthSelector);K=e(s.daySelector);if(s.allowRange){D=e(s.endExpanderSelector);B=e(s.endMonthSelector);C=e(s.endDaySelector)}if(q.length>0&&G.length==1&&K.length==1&&(!s.allowRange||(D.length>0&&B.length==1&&C.length==1))){J.monthSelector=s.monthSelector;J.daySelector=s.daySelector;J.expanderSelector=s.expanderSelector;if(s.allowRange){J.endMonthSelector=s.endMonthSelector;J.endDaySelector=s.endDaySelector;J.endExpanderSelector=s.endExpanderSelector}var z=p.length;p[z]=J;e.ctcCalendar.update_month_selectors(z);e.ctcCalendar.update_day_selectors(z);var Q=k;k=z;e.ctcCalendar.set_new_date(J.defaultDate);k=Q;q.click(function(){if(k!=z||b){k=z;b=false;e.ctcCalendar.show()}else{e.ctcCalendar.hide()}return false});G.change(function(){e.ctcCalendar.update_day_selectors(z);if(s.allowRange){var R,T,S;R=new Date();R.setFullYear(G.val().substring(0,4),parseInt(G.val().substring(5,7),10)-1,K.val());R.setHours(0,0,0,0);T=new Date();T.setFullYear(B.val().substring(0,4),parseInt(B.val().substring(5,7),10)-1,C.val());T.setHours(0,0,0,0);e.ctcCalendar.update_month_selectors(z,true);e.ctcCalendar.update_day_selectors(z,true);if(R>T){k=z;S=new Date();S.setFullYear(R.getFullYear(),R.getMonth(),R.getDate()+J.defaultRange);e.ctcCalendar.set_new_date(S,true);k=-1}}});if(s.allowRange){e.ctcCalendar.update_month_selectors(z,true);e.ctcCalendar.update_day_selectors(z,true);Q=k;var H;if(J.defaultDate=="blank"){H="blank"}else{H=new Date();H.setFullYear(J.defaultDate.getFullYear(),J.defaultDate.getMonth(),J.defaultDate.getDate()+J.defaultRange)}k=z;b=true;e.ctcCalendar.set_new_date(H,true);k=Q;b=false;K.change(function(){e.ctcCalendar.check_end_date(z);e.ctcCalendar.update_month_selectors(z,true);e.ctcCalendar.update_day_selectors(z,true)});D.click(function(){if(k!=z||!b){k=z;b=true;e.ctcCalendar.show()}else{e.ctcCalendar.hide()}return false});B.change(function(){e.ctcCalendar.update_day_selectors(z,true)})}}}}};e.ctcCalendar.show=function(){var x=false;if(p[k]["inputType"]=="text"){var r,v;r=e(p[k][!b?"dateSelector":"endDateSelector"]);if(b){v=e(p[k]["dateSelector"])}x=r.length==1&&(!b||v.length==1)}else{if(p[k]["inputType"]=="dropdown"){var t,w,s,q;t=e(p[k][!b?"monthSelector":"endMonthSelector"]);w=e(p[k][!b?"daySelector":"endDaySelector"]);if(b){s=e(p[k]["monthSelector"]);q=e(p[k]["daySelector"])}x=t.length==1&&w.length==1&&(!b||(s.length==1&&q.length==1))}}if(p[k]["startWeekOnMonday"]===true){e("#ctc-calendar-body").removeClass().addClass("start-week-on-monday")}else{e("#ctc-calendar-body").removeClass().removeClass("start-week-on-monday")}e("div.ctc-calendar-days").empty().append(l());if(x){var u;u=e("#ctc-calendar,#ctc-calendar-iframe");if(u.length==0){e.ctcCalendar.add_to_dom();u=e("#ctc-calendar,#ctc-calendar-iframe")}show_calendar=function(){if(p[k]["calendarDisplay"]=="modal"||p[k]["calendarDisplay"]=="full"){window.scrollTo(0,1);window.scrollTo(0,0);n=e("body").css("overflow");h=e("body").css("marginRight");if(String(h).indexOf("px")>=0){h=h.substring(0,h.length-2)}h=parseInt(h,10);e("body").css({overflow:"hidden",marginRight:h+17});e("#ctc-calendar-modal-background").css({display:"block"})}e.ctcCalendar.set_position();e.ctcCalendar.update_dropdown();var D=new Date();if(p[k]["inputType"]=="text"){if(p[k]["dateFormat"]==1){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(r.val())){D.setFullYear(r.val().substring(6,10),parseInt(r.val().substring(0,2),10)-1,parseInt(r.val().substring(3,5),10))}else{if(b&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(v.val())){D.setFullYear(v.val().substring(6,10),parseInt(v.val().substring(0,2),10)-1,parseInt(v.val().substring(3,5),10)+p[k]["minimumRange"])}else{if(!b){D.setFullYear(p[k]["minimumDate"].getFullYear(),p[k]["minimumDate"].getMonth(),p[k]["minimumDate"].getDate())}else{D.setFullYear(p[k]["minimumDate"].getFullYear(),p[k]["minimumDate"].getMonth(),p[k]["minimumDate"].getDate()+p[k]["minimumRange"])}}}if(b&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(v.val())){var F=new Date();F.setFullYear(v.val().substring(6,10),parseInt(v.val().substring(0,2),10)-1,parseInt(v.val().substring(3,5),10));if(Math.ceil(Math.abs(D.getTime()-F.getTime())/(1000*60*60*24))>p[k]["maximumRange"]){D=new Date(F.getTime()+(1000*60*60*24*p[k]["maximumRange"]))}}}else{if(p[k]["dateFormat"]==2){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(r.val())){var E,C,B;E=r.val().substring(r.val().length-4,r.val().length);C=o(r.val().substring(0,3));B=r.val().substring(r.val().indexOf(" ")+1,r.val().indexOf(","));D.setFullYear(E,C-1,B)}else{if(b&&/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(v.val())){var A,z,y;A=v.val().substring(v.val().length-4,v.val().length);z=o(v.val().substring(0,3));y=v.val().substring(v.val().indexOf(" ")+1,v.val().indexOf(","));D.setFullYear(A,z-1,parseInt(y,10)+p[k]["minimumRange"])}else{if(!b){D.setFullYear(p[k]["minimumDate"].getFullYear(),p[k]["minimumDate"].getMonth(),p[k]["minimumDate"].getDate())}else{D.setFullYear(p[k]["minimumDate"].getFullYear(),p[k]["minimumDate"].getMonth(),p[k]["minimumDate"].getDate()+p[k]["minimumRange"])}}}}else{if(p[k]["dateFormat"]==3){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(r.val())){D.setFullYear(r.val().substring(6,10),parseInt(r.val().substring(3,5),10)-1,parseInt(r.val().substring(0,2),10))}else{if(b&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(v.val())){D.setFullYear(v.val().substring(6,10),parseInt(v.val().substring(3,5),10)-1,parseInt(v.val().substring(0,2),10)+p[k]["minimumRange"])}else{if(!b){D.setFullYear(p[k]["minimumDate"].getFullYear(),p[k]["minimumDate"].getMonth(),p[k]["minimumDate"].getDate())}else{D.setFullYear(p[k]["minimumDate"].getFullYear(),p[k]["minimumDate"].getMonth(),p[k]["minimumDate"].getDate()+p[k]["minimumRange"])}}}}else{if(p[k]["dateFormat"]==4){if(/([0-9]{4})-([0-9]{2})-([0-9]{2})$/.test(r.val())){D.setFullYear(r.val().substring(0,4),parseInt(r.val().substring(5,7),10)-1,parseInt(r.val().substring(8,10),10))}else{if(b&&/([0-9]{4})-([0-9]{2})-([0-9]{2})$/.test(v.val())){D.setFullYear(v.val().substring(0,4),parseInt(v.val().substring(5,7),10)-1,parseInt(v.val().substring(8,10),10)+p[k]["minimumRange"])}else{if(!b){D.setFullYear(p[k]["minimumDate"].getFullYear(),p[k]["minimumDate"].getMonth(),p[k]["minimumDate"].getDate())}else{D.setFullYear(p[k]["minimumDate"].getFullYear(),p[k]["minimumDate"].getMonth(),p[k]["minimumDate"].getDate()+p[k]["minimumRange"])}}}}}}}}else{if(p[k]["inputType"]=="dropdown"){if(/([0-9]{4})-([0-9]{2})/.test(t.val())){D.setFullYear(t.val().substring(0,4),parseInt(t.val().substring(5,7),10)-1,1)}else{if(b&&/([0-9]{4})-([0-9]{2})/.test(s.val())){D.setFullYear(s.val().substring(0,4),parseInt(s.val().substring(5,7),10)-1,parseInt(q.val(),10)+p[k]["minimumRange"])}else{if(!b){D.setFullYear(p[k]["minimumDate"].getFullYear(),p[k]["minimumDate"].getMonth(),p[k]["minimumDate"].getDate())}else{D.setFullYear(p[k]["minimumDate"].getFullYear(),p[k]["minimumDate"].getMonth(),p[k]["minimumDate"].getDate()+p[k]["minimumRange"])}}}}}D.setHours(0,0,0,0);e.ctcCalendar.update_calendars(D);if(p[k]["calendarCount"]==1){e("#ctc-calendar,#ctc-calendar-iframe").addClass("ctc-calendar-single").removeClass("ctc-calendar-double").removeClass("ctc-calendar-triple");e("#ctc-calendar-first").show();e("#ctc-calendar-second,#ctc-calendar-third").hide()}else{if(p[k]["calendarCount"]==2){e("#ctc-calendar,#ctc-calendar-iframe").removeClass("ctc-calendar-single").addClass("ctc-calendar-double").removeClass("ctc-calendar-triple");e("#ctc-calendar-first,#ctc-calendar-second").show();e("#ctc-calendar-third").hide()}else{if(p[k]["calendarCount"]==3){e("#ctc-calendar,#ctc-calendar-iframe").removeClass("ctc-calendar-single").removeClass("ctc-calendar-double").addClass("ctc-calendar-triple");e("#ctc-calendar-first,#ctc-calendar-second,#ctc-calendar-third").show()}}}u.show();e.ctcCalendar.set_position()};if(u.is(":visible")){u.hide();show_calendar()}else{show_calendar()}}if(p[k]["calendarDisplay"]=="full"){setTimeout(function(){e(document).resize();e(window).resize();e(window).scroll()},100)}};e.ctcCalendar.set_position=function(){if(k>-1){if(p[k]["calendarDisplay"]=="inline"){if(p[k]["inputType"]=="text"){var x,B,A;x=e("#ctc-calendar,#ctc-calendar-iframe");B=e(p[k][!b?"dateSelector":"endDateSelector"]);A=e(p[k][!b?"expanderSelector":"endExpanderSelector"]);if((x.length==1||x.length==2)&&A.length>0&&B.length==1){var s,w,t,u;s=A.offset().top+i(A);if(B.attr("type")=="hidden"){t=B.parent().offset().top+i(B.parent())}else{t=B.offset().top+i(B)}u=Math.max(s,t)+1;var C,D,y,q;C=A.offset().left;if(B.attr("type")=="hidden"){y=B.parent().offset().left}else{y=B.offset().left}q=Math.min(C,y);x.css({left:q,top:u})}}else{if(p[k]["inputType"]=="dropdown"){var x,v,r,A;x=e("#ctc-calendar,#ctc-calendar-iframe");v=e(p[k][!b?"monthSelector":"endMonthSelector"]);r=e(p[k][!b?"daySelector":"endDaySelector"]);A=e(p[k][!b?"expanderSelector":"endExpanderSelector"]);if((x.length==1||x.length==2)&&A.length>0&&v.length==1&&r.length==1){var s,w,E,u;s=A.offset().top+i(A);w=v.offset().top+i(v);E=r.offset().top+i(r);u=Math.max(s,w,E)+1;var C,D,z,q;C=A.offset().left;D=v.offset().left;z=r.offset().left;q=Math.min(C,D,z);x.css({left:q,top:u})}}}var x=e("#ctc-calendar,#ctc-calendar-iframe");x.removeClass("ctc-calendar-full").css({position:"absolute"});e("#ctc-calendar-modal-background").addClass("ctc-calendar-modal-background-full")}else{if(p[k]["calendarDisplay"]=="modal"){var x=e("#ctc-calendar,#ctc-calendar-iframe");x.removeClass("ctc-calendar-full").css({left:(e(window).width()/2)-(m(x)/2),position:"fixed",top:(e(window).height()/2)-(i(x)/2)});e("#ctc-calendar-modal-background").addClass("ctc-calendar-modal-background-full")}else{if(p[k]["calendarDisplay"]=="full"){var x=e("#ctc-calendar,#ctc-calendar-iframe");x.addClass("ctc-calendar-full").css({left:0,position:"fixed",top:0});e("#ctc-calendar-modal-background").addClass("ctc-calendar-modal-background-full")}}}}};e.ctcCalendar.hide=function(){var q;q=e("#ctc-calendar,#ctc-calendar-iframe");if(p[k]["calendarDisplay"]=="modal"||p[k]["calendarDisplay"]=="full"){e("body").css({overflow:n,marginRight:h});e("#ctc-calendar-modal-background").hide()}if(q.length==1||q.length==2){q.hide();k=-1}};e.ctcCalendar.update_month_selectors=function(B,x){if(x===undefined){x=false}if(p[B]["overwriteMonthOptions"]){var w,t,r,u;w=e(p[B][!x?"monthSelector":"endMonthSelector"]);t=e(p[B][!x?"daySelector":"endDaySelector"]);if(p[B]["allowRange"]&&x){r=e(p[B]["monthSelector"]);u=e(p[B]["daySelector"])}if(w.length==1&&t.length==1&&(!p[B]["allowRange"]||!x||(r.length==1&&u.length==1))){if(/([0-9]{4})-([0-9]{2})/.test(w.val())&&t.val().length>0){var y=new Date();y.setFullYear(w.val().substring(0,4),parseInt(w.val().substring(5,7),10)-1,1);if(j(y.getFullYear(),y.getMonth()+1)<parseInt(t.val(),10)){y.setFullYear(w.val().substring(0,4),parseInt(w.val().substring(5,7),10)-1,j(y.getFullYear(),y.getMonth()+1))}else{y.setFullYear(w.val().substring(0,4),parseInt(w.val().substring(5,7),10)-1,parseInt(t.val(),10))}}w.html("");if(p[B]["allowBlankDates"]){w.append('<option value="">'+d()+"</option>")}var A,s,q;A=new Date();A.setFullYear(p[B]["minimumDate"].getFullYear(),p[B]["minimumDate"].getMonth(),p[B]["minimumDate"].getDate());if(x){if(r.length==1&&u.length==1&&r.val().length>0&&u.val().length>0){A.setFullYear(r.val().substring(0,4),parseInt(r.val().substring(5,7),10)-1,parseInt(u.val(),10)+p[B]["minimumRange"])}}A.setHours(0,0,0,0);s=new Date();s.setFullYear(p[B]["maximumDate"].getFullYear(),p[B]["maximumDate"].getMonth(),p[B]["maximumDate"].getDate());if(p[B]["allowRange"]){var v;if(x){if(/([0-9]{4})-([0-9]{2})/.test(r.val())&&u.val().length>0){v=new Date();v.setFullYear(r.val().substring(0,4),parseInt(r.val().substring(5,7),10)-1,1);if(j(v.getFullYear(),v.getMonth()+1)<parseInt(t.val(),10)){v.setFullYear(r.val().substring(0,4),parseInt(r.val().substring(5,7),10)-1,j(v.getFullYear(),v.getMonth()+1))}else{v.setFullYear(r.val().substring(0,4),parseInt(r.val().substring(5,7),10)-1,parseInt(u.val(),10))}}}if(!x){s.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()-p[B]["minimumRange"])}else{if(typeof v!="undefined"){s.setFullYear(v.getFullYear(),v.getMonth(),v.getDate()+p[B]["maximumRange"])}}}s.setHours(23,59,59,999);q=A;while(q<s){var z="";if(typeof y!="undefined"){if(y.getFullYear()==q.getFullYear()&&y.getMonth()==q.getMonth()){z=' selected="selected"'}}w.append('<option value="'+q.getFullYear()+"-"+(q.getMonth()+1<10?"0"+(q.getMonth()+1):q.getMonth()+1)+'"'+z+">"+g(q.getMonth()+1)+" "+q.getFullYear()+"</option>");q.setFullYear(q.getFullYear(),q.getMonth()+1,1)}}}};e.ctcCalendar.update_day_selectors=function(C,y){if(y===undefined){y=false}if(p[C]["overwriteDayOptions"]){var x,s,q,v;x=e(p[C][!y?"monthSelector":"endMonthSelector"]);s=e(p[C][!y?"daySelector":"endDaySelector"]);if(p[C]["allowRange"]&&y){q=e(p[C]["monthSelector"]);v=e(p[C]["daySelector"])}if(x.length==1&&s.length==1){if(/([0-9]{4})-([0-9]{2})/.test(x.val())){if(s.val().length>0){var z=new Date();z.setFullYear(x.val().substring(0,4),parseInt(x.val().substring(5,7),10)-1,1);if(j(z.getFullYear(),z.getMonth()+1)<parseInt(s.val(),10)){z.setFullYear(x.val().substring(0,4),parseInt(x.val().substring(5,7),10)-1,j(z.getFullYear(),z.getMonth()+1))}else{z.setFullYear(x.val().substring(0,4),parseInt(x.val().substring(5,7),10)-1,parseInt(s.val(),10))}}var t=j(x.val().substring(0,4),x.val().substring(5,7));if(t>0){s.html("");if(p[C]["allowBlankDates"]){s.append('<option value="">'+a()+"</option>")}var B,r;B=new Date();B.setFullYear(p[C]["minimumDate"].getFullYear(),p[C]["minimumDate"].getMonth(),p[C]["minimumDate"].getDate());if(y){var q,v;q=e(p[C]["monthSelector"]);v=e(p[C]["daySelector"]);if(q.length==1&&v.length==1&&q.val().length>0&&v.val().length>0){B.setFullYear(q.val().substring(0,4),parseInt(q.val().substring(5,7),10)-1,parseInt(v.val(),10)+p[C]["minimumRange"])}else{B.setFullYear(B.getFullYear(),B.getMonth(),B.getDate()+p[C]["minimumRange"])}}B.setHours(0,0,0,0);r=new Date();r.setFullYear(p[C]["maximumDate"].getFullYear(),p[C]["maximumDate"].getMonth(),p[C]["maximumDate"].getDate());if(p[C]["allowRange"]){var w;if(y){if(/([0-9]{4})-([0-9]{2})/.test(q.val())&&v.val().length>0){w=new Date();w.setFullYear(q.val().substring(0,4),parseInt(q.val().substring(5,7),10)-1,1);if(j(w.getFullYear(),w.getMonth()+1)<parseInt(s.val(),10)){w.setFullYear(q.val().substring(0,4),parseInt(q.val().substring(5,7),10)-1,j(w.getFullYear(),w.getMonth()+1))}else{w.setFullYear(q.val().substring(0,4),parseInt(q.val().substring(5,7),10)-1,parseInt(v.val(),10))}}}if(!y){r.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()-p[C]["minimumRange"])}else{if(typeof w!="undefined"){r.setFullYear(w.getFullYear(),w.getMonth(),w.getDate()+p[C]["maximumRange"])}}}r.setHours(23,59,59,999);var u=new Date();u.setFullYear(x.val().substring(0,4),parseInt(x.val().substring(5,7),10)-1,1);if(u<B&&!p[C]["overwriteMonthOptions"]){u.setFullYear(B.getFullYear(),B.getMonth(),1)}for(day=1;day<=t;day++){u.setFullYear(u.getFullYear(),u.getMonth(),day);u.setHours(12,30,30,500);var A="";if(typeof z!="undefined"){if(z.getDate()==day){A=' selected="selected"'}}if(u>=B&&u<=r){s.append('<option value="'+(day<10?"0"+day:day)+'"'+A+">"+day+"</option>")}}}}else{s.html('<option value="">'+a()+"</option>")}}}};e.ctcCalendar.update_dropdown=function(){var s,x,t;s=e("#ctc-calendar-dropdown");x=new Date();x.setFullYear(p[k]["minimumDate"].getFullYear(),p[k]["minimumDate"].getMonth(),p[k]["minimumDate"].getDate());if(b){if(p[k]["inputType"]=="text"){var w;w=e(p[k]["dateSelector"]);if(w.length==1){if(p[k]["dateFormat"]==1&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(w.val())){x.setFullYear(w.val().substring(6,10),parseInt(w.val().substring(0,2),10)-1,parseInt(w.val().substring(3,5),10)+p[k]["minimumRange"])}else{if(p[k]["dateFormat"]==2&&/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(w.val())){minimum_year=w.val().substring(w.val().length-4,w.val().length);minimum_month=o(w.val().substring(0,3));minimum_day=w.val().substring(w.val().indexOf(" ")+1,w.val().indexOf(","));x=new Date();x.setFullYear(minimum_year,minimum_month-1,minimum_day)}else{if(p[k]["dateFormat"]==3&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(w.val())){x.setFullYear(w.val().substring(6,10),parseInt(w.val().substring(3,5),10)-1,parseInt(w.val().substring(0,2),10)+p[k]["minimumRange"])}else{if(p[k]["dateFormat"]==4&&/([0-9]{4})-([0-9]{2})-([0-9]{2})$/.test(w.val())){x.setFullYear(w.val().substring(0,4),parseInt(w.val().substring(5,7),10)-1,parseInt(w.val().substring(8,10),10)+p[k]["minimumRange"])}else{x.setFullYear(x.getFullYear(),x.getMonth(),x.getDate()+p[k]["minimumRange"])}}}}}}else{if(p[k]["inputType"]=="dropdown"){var v,r;v=e(p[k]["monthSelector"]);r=e(p[k]["daySelector"]);if(v.length==1&&r.length==1&&v.val().length>0&&r.val().length>0){x.setFullYear(v.val().substring(0,4),parseInt(v.val().substring(5,7),10)-1,parseInt(r.val(),10)+p[k]["minimumRange"])}else{x.setFullYear(x.getFullYear(),x.getMonth(),x.getDate()+p[k]["minimumRange"])}}}}x.setHours(0,0,0,0);t=new Date();t.setFullYear(p[k]["maximumDate"].getFullYear(),p[k]["maximumDate"].getMonth(),p[k]["maximumDate"].getDate());if(p[k]["allowRange"]){if(p[k]["inputType"]=="text"){var q;if(b){if(p[k]["dateFormat"]==1&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(w.val())){q=new Date();q.setFullYear(w.val().substring(6,10),parseInt(w.val().substring(0,2),10)-1,parseInt(w.val().substring(3,5),10))}else{if(p[k]["dateFormat"]==2&&/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(w.val())){q=new Date();start_year=w.val().substring(w.val().length-4,w.val().length);start_month=o(w.val().substring(0,3));start_day=w.val().substring(w.val().indexOf(" ")+1,w.val().indexOf(","));q=new Date();q.setFullYear(start_year,start_month-1,start_day)}else{if(p[k]["dateFormat"]==3&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(w.val())){q=new Date();q.setFullYear(w.val().substring(6,10),parseInt(w.val().substring(3,5),10)-1,parseInt(w.val().substring(0,2),10))}else{if(p[k]["dateFormat"]==4&&/([0-9]{4})-([0-9]{2})-([0-9]{2})$/.test(w.val())){q=new Date();q.setFullYear(w.val().substring(0,4),parseInt(w.val().substring(5,7),10)-1,parseInt(w.val().substring(8,10),10))}}}}}if(!b){t.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()-p[k]["minimumRange"])}else{if(typeof q!="undefined"){t.setFullYear(q.getFullYear(),q.getMonth(),q.getDate()+p[k]["maximumRange"])}}if(b&&t>p[k]["maximumDate"]){t=p[k]["maximumDate"]}}else{if(p[k]["inputType"]=="dropdown"){var q;if(b){if(/([0-9]{4})-([0-9]{2})/.test(v.val())&&r.val().length>0){q=new Date();q.setFullYear(v.val().substring(0,4),parseInt(v.val().substring(5,7),10)-1,r.val())}}if(!b){t.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()-p[k]["minimumRange"])}else{if(typeof q!="undefined"){t.setFullYear(q.getFullYear(),q.getMonth(),q.getDate()+p[k]["maximumRange"])}}if(b&&t>p[k]["maximumDate"]){t=p[k]["maximumDate"]}}}}t.setHours(23,59,59,999);s.html("");var u=x;while(u<t){s.append('<option value="'+u.getFullYear()+"-"+(u.getMonth()+1<10?"0"+(u.getMonth()+1):u.getMonth()+1)+'">'+g(u.getMonth()+1,false)+" "+u.getFullYear()+"</option>");u.setFullYear(u.getFullYear(),u.getMonth()+1,1)}};e.ctcCalendar.update_calendars=function(C){var O,q;if(C.getDate()!=1){C.setFullYear(C.getFullYear(),C.getMonth(),1)}if(p[k]["inputType"]=="text"){var G,u;G=e(p[k][!b?"dateSelector":"endDateSelector"]);if(p[k]["allowRange"]){if(b){u=e(p[k]["dateSelector"])}else{u=e(p[k]["endDateSelector"])}}}else{if(p[k]["inputType"]=="dropdown"){var J,R,S,K;J=e(p[k][!b?"monthSelector":"endMonthSelector"]);R=e(p[k][!b?"daySelector":"endDaySelector"]);if(p[k]["allowRange"]&&b){S=e(p[k]["monthSelector"]);K=e(p[k]["daySelector"])}}}todays_date=new Date();if(p[k]["inputType"]=="text"){if(G.length==1){if(p[k]["dateFormat"]==1){if(parseInt(G.val().substring(3,5),10)<=j(parseInt(G.val().substring(6,10)),parseInt(G.val().substring(0,2),10))&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(G.val())){O=new Date();O.setFullYear(G.val().substring(6,10),parseInt(G.val().substring(0,2),10)-1,parseInt(G.val().substring(3,5),10));O.setHours(0,0,0,0);if(p[k]["allowRange"]){if(parseInt(u.val().substring(3,5),10)<=j(parseInt(u.val().substring(6,10)),parseInt(u.val().substring(0,2),10))&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(u.val())){q=new Date();q.setFullYear(u.val().substring(6,10),parseInt(u.val().substring(0,2),10)-1,parseInt(u.val().substring(3,5),10));q.setHours(0,0,0,0)}}}}else{if(p[k]["dateFormat"]==2){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(G.val())){var A,N,w;A=G.val().substring(G.val().length-4,G.val().length);N=o(G.val().substring(0,3));w=G.val().substring(G.val().indexOf(" ")+1,G.val().indexOf(","));O=new Date();O.setFullYear(A,N-1,w);O.setHours(0,0,0,0);if(p[k]["allowRange"]){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(u.val())){var M,B,T;M=u.val().substring(u.val().length-4,u.val().length);B=o(u.val().substring(0,3));T=u.val().substring(u.val().indexOf(" ")+1,u.val().indexOf(","));q=new Date();q.setFullYear(M,B-1,T);q.setHours(0,0,0,0)}}}}else{if(p[k]["dateFormat"]==3){if(parseInt(G.val().substring(0,2),10)<=j(parseInt(G.val().substring(6,10)),parseInt(G.val().substring(3,5),10))&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(G.val())){O=new Date();O.setFullYear(G.val().substring(6,10),parseInt(G.val().substring(3,5),10)-1,parseInt(G.val().substring(0,2),10));O.setHours(0,0,0,0);if(p[k]["allowRange"]){if(parseInt(u.val().substring(0,2),10)<=j(parseInt(u.val().substring(6,10)),parseInt(u.val().substring(3,5),10))&&/([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.test(u.val())){q=new Date();q.setFullYear(u.val().substring(6,10),parseInt(u.val().substring(3,5),10)-1,parseInt(u.val().substring(0,2),10));q.setHours(0,0,0,0)}}}}else{if(p[k]["dateFormat"]==4){if(parseInt(G.val().substring(8,10),10)<=j(parseInt(G.val().substring(0,4)),parseInt(G.val().substring(5,7),10))&&/([0-9]{4})-([0-9]{2})-([0-9]{2})$/.test(G.val())){O=new Date();O.setFullYear(G.val().substring(0,4),parseInt(G.val().substring(5,7),10)-1,parseInt(G.val().substring(8,10),10));O.setHours(0,0,0,0);if(p[k]["allowRange"]){if(parseInt(u.val().substring(8,10),10)<=j(parseInt(u.val().substring(0,4)),parseInt(u.val().substring(5,7),10))&&/([0-9]{4})-([0-9]{2})-([0-9]{2})$/.test(u.val())){q=new Date();q.setFullYear(u.val().substring(0,4),parseInt(u.val().substring(5,7),10)-1,parseInt(u.val().substring(8,10),10));q.setHours(0,0,0,0)}}}}}}}}}else{if(p[k]["inputType"]=="dropdown"){if(J.length==1&&R.length==1){if(parseInt(R.val(),10)<=j(J.val().substring(0,4),parseInt(J.val().substring(5,7),10))){O=new Date();O.setFullYear(J.val().substring(0,4),parseInt(J.val().substring(5,7),10)-1,parseInt(R.val(),10));O.setHours(0,0,0,0)}}}}var E=e("#ctc-calendar-dropdown");var F=p[k]["calendarCount"];for(var I=1;I<=F;I++){if(!p[k]["startWeekOnMonday"]){var v=C.getDay()}else{var v=(C.getDay()+6)%7}var H;if(I==1){H="#ctc-calendar-first"}else{if(I==2){H="#ctc-calendar-second"}else{if(I==3){H="#ctc-calendar-third"}}}if(I==1){E.val(C.getFullYear()+"-"+(C.getMonth()+1<10?"0"+(C.getMonth()+1):C.getMonth()+1))}else{if(I==2||I==3){e(H+"-month-name").text(g(C.getMonth()+1)+" "+C.getFullYear())}}var z="",t=0;if(v>0){z+='<div class="ctc-calendar-week ctc-calendar-week-one">';for(day=1;day<=v;day++){z+='<div class="ctc-calendar-blank ctc-calendar-'+c(++t%7).toLowerCase()+'" />'}}var L,y;L=new Date();L.setFullYear(p[k]["minimumDate"].getFullYear(),p[k]["minimumDate"].getMonth(),p[k]["minimumDate"].getDate());if(b){if(p[k]["inputType"]=="text"){var u;u=e(p[k]["dateSelector"]);if(p[k]["dateFormat"]==1){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(u.val())){L.setFullYear(u.val().substring(6,10),parseInt(u.val().substring(0,2),10)-1,parseInt(u.val().substring(3,5),10)+p[k]["minimumRange"])}else{L.setFullYear(L.getFullYear(),L.getMonth(),L.getDate()+p[k]["minimumRange"])}}else{if(p[k]["dateFormat"]==2){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(u.val())){var P,Q,r;P=u.val().substring(u.val().length-4,u.val().length);Q=o(u.val().substring(0,3));r=u.val().substring(u.val().indexOf(" ")+1,u.val().indexOf(","));L.setFullYear(P,Q-1,parseInt(r)+p[k]["minimumRange"])}else{L.setFullYear(L.getFullYear(),L.getMonth(),L.getDate()+p[k]["minimumRange"])}}else{if(p[k]["dateFormat"]==3){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(u.val())){L.setFullYear(u.val().substring(6,10),parseInt(u.val().substring(3,5),10)-1,parseInt(u.val().substring(0,2),10)+p[k]["minimumRange"])}else{L.setFullYear(L.getFullYear(),L.getMonth(),L.getDate()+p[k]["minimumRange"])}}else{if(p[k]["dateFormat"]==4){if(/([0-9]{4})-([0-9]{2})-([0-9]{2})/.test(u.val())){L.setFullYear(u.val().substring(0,4),parseInt(u.val().substring(5,7),10)-1,parseInt(u.val().substring(8,10),10)+p[k]["minimumRange"])}else{L.setFullYear(L.getFullYear(),L.getMonth(),L.getDate()+p[k]["minimumRange"])}}}}}}else{if(p[k]["inputType"]=="dropdown"){var S,K;S=e(p[k]["monthSelector"]);K=e(p[k]["daySelector"]);if(S.length==1&&K.length==1&&S.val().length>0&&K.val().length>0){L.setFullYear(S.val().substring(0,4),parseInt(S.val().substring(5,7),10)-1,parseInt(K.val(),10)+p[k]["minimumRange"])}else{L.setFullYear(L.getFullYear(),L.getMonth(),L.getDate()+p[k]["minimumRange"])}}}}L.setHours(0,0,0,0);y=new Date();y.setFullYear(p[k]["maximumDate"].getFullYear(),p[k]["maximumDate"].getMonth(),p[k]["maximumDate"].getDate());if(p[k]["allowRange"]){var s;if(b){if(p[k]["inputType"]=="text"){if(p[k]["dateFormat"]==1){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(u.val())){s=new Date();s.setFullYear(u.val().substring(6,10),parseInt(u.val().substring(0,2),10)-1,1);if(j(s.getFullYear(),s.getMonth()+1)<parseInt(u.val().substring(3,5),10)){s.setFullYear(u.val().substring(6,10),parseInt(u.val().substring(0,2),10)-1,j(s.getFullYear(),s.getMonth()+1))}else{s.setFullYear(u.val().substring(6,10),parseInt(u.val().substring(0,2),10)-1,parseInt(u.val().substring(3,5),10))}}}else{if(p[k]["dateFormat"]==2){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(u.val())){var P,Q,r;P=u.val().substring(u.val().length-4,u.val().length);Q=o(u.val().substring(0,3));r=u.val().substring(u.val().indexOf(" ")+1,u.val().indexOf(","));s=new Date();s.setFullYear(P,Q-1,1);if(j(s.getFullYear(),s.getMonth()+1)<r){s.setFullYear(P,Q-1,j(s.getFullYear(),s.getMonth()+1))}else{s.setFullYear(P,Q-1,r)}}}else{if(p[k]["dateFormat"]==3){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(u.val())){s=new Date();s.setFullYear(u.val().substring(6,10),parseInt(u.val().substring(3,5),10)-1,1);if(j(s.getFullYear(),s.getMonth()+1)<parseInt(u.val().substring(0,2),10)){s.setFullYear(u.val().substring(6,10),parseInt(u.val().substring(3,5),10)-1,j(s.getFullYear(),s.getMonth()+1))}else{s.setFullYear(u.val().substring(6,10),parseInt(u.val().substring(3,5),10)-1,parseInt(u.val().substring(0,2),10))}}}else{if(p[k]["dateFormat"]==4){if(/([0-9]{4})-([0-9]{2})-([0-9]{2})/.test(u.val())){s=new Date();s.setFullYear(u.val().substring(0,4),parseInt(u.val().substring(5,7),10)-1,1);if(j(s.getFullYear(),s.getMonth()+1)<parseInt(u.val().substring(8,10),10)){s.setFullYear(u.val().substring(0,4),parseInt(u.val().substring(5,7),10)-1,j(s.getFullYear(),s.getMonth()+1))}else{s.setFullYear(u.val().substring(0,4),parseInt(u.val().substring(5,7),10)-1,parseInt(u.val().substring(8,10),10))}}}}}}}else{if(p[k]["inputType"]=="dropdown"){if(/([0-9]{4})-([0-9]{2})/.test(S.val())&&K.val().length>0){s=new Date();s.setFullYear(S.val().substring(0,4),parseInt(S.val().substring(5,7),10)-1,1);if(j(s.getFullYear(),s.getMonth()+1)<parseInt(R.val(),10)){s.setFullYear(S.val().substring(0,4),parseInt(S.val().substring(5,7),10)-1,j(s.getFullYear(),s.getMonth()+1))}else{s.setFullYear(S.val().substring(0,4),parseInt(S.val().substring(5,7),10)-1,parseInt(K.val(),10))}}}}}if(!b){y.setFullYear(y.getFullYear(),y.getMonth(),y.getDate()-p[k]["minimumRange"])}else{if(typeof s!="undefined"){y.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()+p[k]["maximumRange"])}}if(b&&y>p[k]["maximumDate"]){y=p[k]["maximumDate"]}}y.setHours(23,59,59,999);for(day=1;day<=42-v;day++){if(t%7==0){if(z.length>0){z+="</div>"}z+='<div class="ctc-calendar-week ctc-calendar-week-'+f(Math.round(t/7)+1).toLowerCase()+'">'}if(day<=j(C.getFullYear(),C.getMonth()+1)){var U,D;U=new Date();U.setFullYear(C.getFullYear(),C.getMonth(),day);D="";if(U>=L&&U<=y){D+=" ctc-calendar-selectable"}if(U.getFullYear()==todays_date.getFullYear()&&U.getMonth()==todays_date.getMonth()&&U.getDate()==todays_date.getDate()){D+=" ctc-calendar-today"}if(O){if(U.getFullYear()==O.getFullYear()&&U.getMonth()==O.getMonth()&&U.getDate()==O.getDate()){D+=" ctc-calendar-active"}}if(q){if(U.getFullYear()==q.getFullYear()&&U.getMonth()==q.getMonth()&&U.getDate()==q.getDate()){D+=" ctc-calendar-other-active"}}if(O&&q&&O!=q){if((O<q&&U>=O&&U<=q)||(O>q&&U<=O&&U>=q)){D+=" ctc-calendar-in-range"}}z+='<div class="ctc-calendar-'+c((t++%7)+1).toLowerCase()+D+'">';if(U>=L&&U<=y){z+='<a href="#" title="'+g(C.getMonth()+1)+" "+day+", "+C.getFullYear()+'" id="ctc-calendar-'+C.getFullYear()+"-"+(C.getMonth()+1<10?"0"+(C.getMonth()+1):C.getMonth()+1)+"-"+day+'">'}z+=day;if(U>=p[k]["minimumDate"]&&U<=y){z+="</a>"}z+="</div>"}else{z+='<div class="ctc-calendar-blank ctc-calendar-'+c((t++%7)+1).toLowerCase()+'" />'}}z+="</div>";e(H+" div.ctc-calendar-week").remove();e(H).append(z);if(e(H+" div.ctc-calendar-week-five div.ctc-calendar-blank").length==7){e(H).addClass("ctc-calendar-four-weeks").removeClass("ctc-calendar-five-weeks").removeClass("ctc-calendar-six-weeks")}else{if(e(H+" div.ctc-calendar-week-six div.ctc-calendar-blank").length==7){e(H).removeClass("ctc-calendar-four-weeks").addClass("ctc-calendar-five-weeks").removeClass("ctc-calendar-six-weeks")}else{e(H).removeClass("ctc-calendar-four-weeks").removeClass("ctc-calendar-five-weeks").addClass("ctc-calendar-six-weeks")}}C.setFullYear(C.getFullYear(),C.getMonth()+1,1)}e("#ctc-calendar div.ctc-calendar-week a").click(function(){var V=new Date();V.setFullYear(this.id.substring(13,17),parseInt(this.id.substring(18,20),10)-1,this.id.substring(21,23));e.ctcCalendar.set_new_date(V,b);if(!b&&p[k]["allowRange"]){e.ctcCalendar.check_end_date(k)}e.ctcCalendar.hide();return false});var x=new Date();x.setFullYear(E.val().substring(0,4),parseInt(E.val().substring(5,7),10)-2,1);if(E.find("option[value="+x.getFullYear()+"-"+(x.getMonth()+1<10?"0"+(x.getMonth()+1):x.getMonth()+1)+"]").length==0){e("#ctc-calendar a.ctc-calendar-previous-month").fadeTo(1,0.33)}else{e("#ctc-calendar a.ctc-calendar-previous-month").fadeTo(1,1)}x.setFullYear(E.val().substring(0,4),parseInt(E.val().substring(5,7),10),1);if(E.find("option[value="+x.getFullYear()+"-"+(x.getMonth()+1<10?"0"+(x.getMonth()+1):x.getMonth()+1)+"]").length==0){e("#ctc-calendar a.ctc-calendar-next-month").fadeTo(1,0.33)}else{e("#ctc-calendar a.ctc-calendar-next-month").fadeTo(1,1)}};e.ctcCalendar.set_new_date=function(v,s){if(s===undefined){s=false}if(p[k]["inputType"]=="text"){var q=e(p[k][!s?"dateSelector":"endDateSelector"]);if(v=="blank"){if(p[k]["dateFormat"]==1){q.val("mm/dd/yyyy").change()}else{if(p[k]["dateFormat"]==2){q.val("Select a Date").change()}else{if(p[k]["dateFormat"]==3){q.val("dd/mm/yyyy").change()}else{if(p[k]["dateFormat"]==4){q.val("yyyy-mm-dd").change()}}}}}else{if(p[k]["dateFormat"]==1){q.val((v.getMonth()+1<10?"0"+(v.getMonth()+1):v.getMonth()+1)+"/"+(v.getDate()<10?"0"+v.getDate():v.getDate())+"/"+v.getFullYear()).change()}else{if(p[k]["dateFormat"]==2){q.val(g(v.getMonth()+1,false)+" "+v.getDate()+", "+v.getFullYear()).change()}else{if(p[k]["dateFormat"]==3){q.val((v.getDate()<10?"0"+v.getDate():v.getDate())+"/"+(v.getMonth()+1<10?"0"+(v.getMonth()+1):v.getMonth()+1)+"/"+v.getFullYear()).change()}else{if(p[k]["dateFormat"]==4){q.val(v.getFullYear()+"-"+(v.getMonth()+1<10?"0"+(v.getMonth()+1):v.getMonth()+1)+"-"+(v.getDate()<10?"0"+v.getDate():v.getDate())).change()}}}}}}else{if(p[k]["inputType"]=="dropdown"){var u,w,r,t;u=e(p[k][!s?"monthSelector":"endMonthSelector"]);if(v=="blank"){r=""}else{r=v.getFullYear()+"-"+(v.getMonth()+1<10?"0"+(v.getMonth()+1):v.getMonth()+1)}w=e(p[k][!s?"daySelector":"endDaySelector"]);if(v=="blank"){t=""}else{t=v.getDate()<10?"0"+v.getDate():v.getDate()}if(u.find("option[value="+r+"]").length>0&&(v=="blank"||parseInt(t,10)<=j(v.getFullYear(),v.getMonth()+1))){u.val(r).change();e.ctcCalendar.update_day_selectors(k,s);w.val(t).change()}}}};e.ctcCalendar.check_end_date=function(C){if(p[C]["inputType"]=="text"){var H,G;H=e(p[C]["dateSelector"]);G=e(p[C]["endDateSelector"]);if(H.length==1&&G.length==1){if(p[C]["dateFormat"]==1){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(H.val())){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(G.val())){var t,s,A,u;t=new Date();t.setFullYear(H.val().substring(6,10),parseInt(H.val().substring(0,2),10)-1,parseInt(H.val().substring(3,5),10));t.setHours(0,0,0,0);s=new Date();s.setFullYear(G.val().substring(6,10),parseInt(G.val().substring(0,2),10)-1,parseInt(G.val().substring(3,5),10));s.setHours(0,0,0,0);A=new Date();A.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+p[C]["minimumRange"]);A.setHours(0,0,0,0);u=new Date();u.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+p[C]["maximumRange"]);u.setHours(0,0,0,0);if(s<A||s>u){if(s>u){s.setFullYear(u.getFullYear(),u.getMonth(),u.getDate())}else{s.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+p[C]["defaultRange"])}var J=k;k=C;e.ctcCalendar.set_new_date(s,true);k=J}}else{if(p[C]["autoSetEndDate"]){var r;r=new Date();r.setFullYear(H.val().substring(6,10),parseInt(H.val().substring(0,2),10)-1,parseInt(H.val().substring(3,5),10)+p[C]["defaultRange"]);var J=k;k=C;e.ctcCalendar.set_new_date(r,true);k=J}}}}else{if(p[C]["dateFormat"]==2){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(H.val())){if(/([A-Za-z]{3}) ([0-9]{1,2}), ([0-9]{4})$/.test(G.val())){var E,q,I,B,y,x;E=H.val().substring(H.val().length-4,H.val().length);q=o(H.val().substring(0,3));I=H.val().substring(H.val().indexOf(" ")+1,H.val().indexOf(","));B=G.val().substring(G.val().length-4,G.val().length);y=o(G.val().substring(0,3));x=G.val().substring(G.val().indexOf(" ")+1,G.val().indexOf(","));var t,s,D;t=new Date();t.setFullYear(E,q-1,I);s=new Date();s.setFullYear(B,y-1,x);s.setHours(0,0,0,0);D=new Date();D.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+p[C]["minimumRange"]);D.setHours(0,0,0,0);if(D>s){D.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+p[C]["defaultRange"]);var J=k;k=C;e.ctcCalendar.set_new_date(D,true);k=J}}else{if(p[C]["autoSetEndDate"]){var E,q,I,B,y,x;E=H.val().substring(H.val().length-4,H.val().length);q=o(H.val().substring(0,3));I=H.val().substring(H.val().indexOf(" ")+1,H.val().indexOf(","));var r;r=new Date();r.setFullYear(E,q-1,parseInt(I,10)+p[C]["defaultRange"]);var J=k;k=C;e.ctcCalendar.set_new_date(r,true);k=J}}}}else{if(p[C]["dateFormat"]==3){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(H.val())){if(/([0-9]{2})\/([0-9]{2})\/([0-9]{4})/.test(G.val())){var t,s,D;t=new Date();t.setFullYear(H.val().substring(6,10),parseInt(H.val().substring(3,5),10)-1,parseInt(H.val().substring(0,2),10));s=new Date();s.setFullYear(G.val().substring(6,10),parseInt(G.val().substring(3,5),10)-1,parseInt(G.val().substring(0,2),10));s.setHours(0,0,0,0);D=new Date();D.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+p[C]["minimumRange"]);D.setHours(0,0,0,0);if(D>s){D.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+p[C]["defaultRange"]);var J=k;k=C;e.ctcCalendar.set_new_date(D,true);k=J}}else{if(p[C]["autoSetEndDate"]){var r;r=new Date();r.setFullYear(H.val().substring(6,10),parseInt(H.val().substring(3,5),10)-1,parseInt(H.val().substring(0,2),10)+p[C]["defaultRange"]);var J=k;k=C;e.ctcCalendar.set_new_date(r,true);k=J}}}}else{if(p[C]["dateFormat"]==4){if(/([0-9]{4})-([0-9]{2})-([0-9]{2})/.test(H.val())){if(/([0-9]{4})-([0-9]{2})-([0-9]{2})/.test(G.val())){var t,s,D;t=new Date();t.setFullYear(H.val().substring(0,4),parseInt(H.val().substring(5,7),10)-1,parseInt(H.val().substring(8,10),10));s=new Date();s.setFullYear(G.val().substring(0,4),parseInt(G.val().substring(5,7),10)-1,parseInt(G.val().substring(8,10),10));s.setHours(0,0,0,0);D=new Date();D.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+p[C]["minimumRange"]);D.setHours(0,0,0,0);if(D>s){D.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+p[C]["defaultRange"]);var J=k;k=C;e.ctcCalendar.set_new_date(D,true);k=J}}else{if(p[C]["autoSetEndDate"]){var r;r=new Date();r.setFullYear(H.val().substring(0,4),parseInt(H.val().substring(5,7),10)-1,parseInt(H.val().substring(8,10),10)+p[C]["defaultRange"]);var J=k;k=C;e.ctcCalendar.set_new_date(r,true);k=J}}}}}}}}}else{if(p[C]["inputType"]=="dropdown"){var F,z,v,w;F=e(p[C]["monthSelector"]);z=e(p[C]["daySelector"]);v=e(p[C]["endMonthSelector"]);w=e(p[C]["endDaySelector"]);if(F.length==1&&z.length==1&&v.length==1&&w.length==1){if(/([0-9]{4})-([0-9]{2})/.test(F.val())&&z.val().length>0){var t,s,D;t=new Date();t.setFullYear(F.val().substring(0,4),parseInt(F.val().substring(5,7),10)-1,parseInt(z.val(),10));s=new Date();s.setFullYear(v.val().substring(0,4),parseInt(v.val().substring(5,7),10)-1,parseInt(w.val(),10));s.setHours(0,0,0,0);D=new Date();D.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+p[C]["minimumRange"]);D.setHours(0,0,0,0);if(D>s){D.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+p[C]["defaultRange"]);var J=k;k=C;e.ctcCalendar.set_new_date(D,true);k=J}}}}}};e.ctcCalendar.add_to_dom=function(){var q=l();var r="";if(e.browser.msie&&parseInt(e.browser.version)===6){r+='<iframe id="ctc-calendar-iframe" frameborder="0" />'}r+='<div id="ctc-calendar-modal-background" /><div id="ctc-calendar"><div id="ctc-calendar-header"><div id="ctc-calendar-header-inner"><a href="#" title="Hide Calendar" id="ctc-calendar-hide">Hide Calendar</a><span>Powered by</span> <a href="https://github.com/ctcCalendar/ctcCalendar" target="_blank" title="ctcCalendar" id="ctc-calendar-powered-by">ctcCalendar</a></div></div><div id="ctc-calendar-body"';if(p[k]["startWeekOnMonday"]){r+=' class="start-week-on-monday"'}r+='><div id="ctc-calendar-first"><div class="ctc-calendar-month"><div class="ctc-calendar-month-inner-1"><div class="ctc-calendar-month-inner-2"><select id="ctc-calendar-dropdown" /><a href="#" title="Next Month" class="ctc-calendar-next-month"><span class="ctc-calendar-next-month-inner">Next Month</span></a><a href="#" title="Previous Month" class="ctc-calendar-previous-month"><span class="ctc-calendar-previous-month-inner">Previous Month</span></a></div></div></div><div class="ctc-calendar-days">'+q+'</div></div><div id="ctc-calendar-second"><div class="ctc-calendar-month"><div class="ctc-calendar-month-inner" colspan="5"><strong id="ctc-calendar-second-month-name" /><a href="#" title="Next Month" class="ctc-calendar-next-month"><span class="ctc-calendar-next-month-inner">Next Month</span></a><a href="#" title="Previous Month" class="ctc-calendar-previous-month"><span class="ctc-calendar-previous-month-inner">Previous Month</span></a></div></div><div class="ctc-calendar-days">'+q+'</div></div><div id="ctc-calendar-third"><div class="ctc-calendar-month"><div class="ctc-calendar-month-inner" colspan="5"><strong id="ctc-calendar-third-month-name" /><a href="#" title="Next Month" class="ctc-calendar-next-month"><span class="ctc-calendar-next-month-inner">Next Month</span></a><a href="#" title="Previous Month" class="ctc-calendar-previous-month"><span class="ctc-calendar-previous-month-inner">Previous Month</span></a></div></div><div class="ctc-calendar-days">'+q+"</div></div></div></div>";e("body").prepend(r);e("#ctc-calendar-hide").click(function(){e.ctcCalendar.hide();return false});e("#ctc-calendar-dropdown").change(function(){if(/([0-9]{4})-([0-9]{2})/.test(e(this).val())){var s=new Date();s.setFullYear(e(this).val().substring(0,4),parseInt(e(this).val().substring(5,7),10)-1,1);e.ctcCalendar.update_calendars(s)}});e("#ctc-calendar a.ctc-calendar-previous-month,#ctc-calendar a.ctc-calendar-next-month").click(function(){if(/([0-9]{4})-([0-9]{2})/.test(e("#ctc-calendar-dropdown").val())){var s=new Date();if(e(this).hasClass("ctc-calendar-previous-month")){s.setFullYear(e("#ctc-calendar-dropdown").val().substring(0,4),parseInt(e("#ctc-calendar-dropdown").val().substring(5,7),10)-1-1,1)}else{if(e(this).hasClass("ctc-calendar-next-month")){s.setFullYear(e("#ctc-calendar-dropdown").val().substring(0,4),parseInt(e("#ctc-calendar-dropdown").val().substring(5,7),10)-1+1,1)}}var t=s.getFullYear()+"-"+(s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1);if(e("#ctc-calendar-dropdown option[value="+t+"]").length>0){e("#ctc-calendar-dropdown").val(t).change()}}return false})}})(jQuery);